var Qp=h=>{throw TypeError(h)};var Qu=(h,t,i)=>t.has(h)||Qp("Cannot "+i);var Wt=(h,t,i)=>(Qu(h,t,"read from private field"),i?i.call(h):t.get(h)),Li=(h,t,i)=>t.has(h)?Qp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,i),je=(h,t,i,s)=>(Qu(h,t,"write to private field"),s?s.call(h,i):t.set(h,i),i),Oi=(h,t,i)=>(Qu(h,t,"access private method"),i);var Zp=(h,t,i,s)=>({set _(r){je(h,t,r,i)},get _(){return Wt(h,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();function Vm(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Zu={exports:{}},dr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function _v(){if(Jp)return dr;Jp=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:h,type:s,key:c,ref:r!==void 0?r:null,props:o}}return dr.Fragment=t,dr.jsx=i,dr.jsxs=i,dr}var tm;function xv(){return tm||(tm=1,Zu.exports=_v()),Zu.exports}var wt=xv(),Ju={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var em;function Tv(){if(em)return yt;em=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function R(P,V,Q){this.props=P,this.context=V,this.refs=C,this.updater=Q||_}R.prototype.isReactComponent={},R.prototype.setState=function(P,V){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,V,"setState")},R.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function L(){}L.prototype=R.prototype;function D(P,V,Q){this.props=P,this.context=V,this.refs=C,this.updater=Q||_}var b=D.prototype=new L;b.constructor=D,E(b,R.prototype),b.isPureReactComponent=!0;var S=Array.isArray;function T(){}var M={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function B(P,V,Q){var Z=Q.ref;return{$$typeof:h,type:P,key:V,ref:Z!==void 0?Z:null,props:Q}}function Y(P,V){return B(P.type,V,P.props)}function $(P){return typeof P=="object"&&P!==null&&P.$$typeof===h}function J(P){var V={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Q){return V[Q]})}var nt=/\/+/g;function tt(P,V){return typeof P=="object"&&P!==null&&P.key!=null?J(""+P.key):V.toString(36)}function gt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(T,T):(P.status="pending",P.then(function(V){P.status==="pending"&&(P.status="fulfilled",P.value=V)},function(V){P.status==="pending"&&(P.status="rejected",P.reason=V)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function k(P,V,Q,Z,ot){var ut=typeof P;(ut==="undefined"||ut==="boolean")&&(P=null);var rt=!1;if(P===null)rt=!0;else switch(ut){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(P.$$typeof){case h:case t:rt=!0;break;case m:return rt=P._init,k(rt(P._payload),V,Q,Z,ot)}}if(rt)return ot=ot(P),rt=Z===""?"."+tt(P,0):Z,S(ot)?(Q="",rt!=null&&(Q=rt.replace(nt,"$&/")+"/"),k(ot,V,Q,"",function(zt){return zt})):ot!=null&&($(ot)&&(ot=Y(ot,Q+(ot.key==null||P&&P.key===ot.key?"":(""+ot.key).replace(nt,"$&/")+"/")+rt)),V.push(ot)),1;rt=0;var Vt=Z===""?".":Z+":";if(S(P))for(var Lt=0;Lt<P.length;Lt++)Z=P[Lt],ut=Vt+tt(Z,Lt),rt+=k(Z,V,Q,ut,ot);else if(Lt=w(P),typeof Lt=="function")for(P=Lt.call(P),Lt=0;!(Z=P.next()).done;)Z=Z.value,ut=Vt+tt(Z,Lt++),rt+=k(Z,V,Q,ut,ot);else if(ut==="object"){if(typeof P.then=="function")return k(gt(P),V,Q,Z,ot);throw V=String(P),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return rt}function j(P,V,Q){if(P==null)return P;var Z=[],ot=0;return k(P,Z,"","",function(ut){return V.call(Q,ut,ot++)}),Z}function et(P){if(P._status===-1){var V=P._result;V=V(),V.then(function(Q){(P._status===0||P._status===-1)&&(P._status=1,P._result=Q)},function(Q){(P._status===0||P._status===-1)&&(P._status=2,P._result=Q)}),P._status===-1&&(P._status=0,P._result=V)}if(P._status===1)return P._result.default;throw P._result}var pt=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},At={map:j,forEach:function(P,V,Q){j(P,function(){V.apply(this,arguments)},Q)},count:function(P){var V=0;return j(P,function(){V++}),V},toArray:function(P){return j(P,function(V){return V})||[]},only:function(P){if(!$(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return yt.Activity=y,yt.Children=At,yt.Component=R,yt.Fragment=i,yt.Profiler=r,yt.PureComponent=D,yt.StrictMode=s,yt.Suspense=d,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,yt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return M.H.useMemoCache(P)}},yt.cache=function(P){return function(){return P.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(P,V,Q){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Z=E({},P.props),ot=P.key;if(V!=null)for(ut in V.key!==void 0&&(ot=""+V.key),V)!N.call(V,ut)||ut==="key"||ut==="__self"||ut==="__source"||ut==="ref"&&V.ref===void 0||(Z[ut]=V[ut]);var ut=arguments.length-2;if(ut===1)Z.children=Q;else if(1<ut){for(var rt=Array(ut),Vt=0;Vt<ut;Vt++)rt[Vt]=arguments[Vt+2];Z.children=rt}return B(P.type,ot,Z)},yt.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},yt.createElement=function(P,V,Q){var Z,ot={},ut=null;if(V!=null)for(Z in V.key!==void 0&&(ut=""+V.key),V)N.call(V,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ot[Z]=V[Z]);var rt=arguments.length-2;if(rt===1)ot.children=Q;else if(1<rt){for(var Vt=Array(rt),Lt=0;Lt<rt;Lt++)Vt[Lt]=arguments[Lt+2];ot.children=Vt}if(P&&P.defaultProps)for(Z in rt=P.defaultProps,rt)ot[Z]===void 0&&(ot[Z]=rt[Z]);return B(P,ut,ot)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(P){return{$$typeof:u,render:P}},yt.isValidElement=$,yt.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:et}},yt.memo=function(P,V){return{$$typeof:g,type:P,compare:V===void 0?null:V}},yt.startTransition=function(P){var V=M.T,Q={};M.T=Q;try{var Z=P(),ot=M.S;ot!==null&&ot(Q,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(T,pt)}catch(ut){pt(ut)}finally{V!==null&&Q.types!==null&&(V.types=Q.types),M.T=V}},yt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},yt.use=function(P){return M.H.use(P)},yt.useActionState=function(P,V,Q){return M.H.useActionState(P,V,Q)},yt.useCallback=function(P,V){return M.H.useCallback(P,V)},yt.useContext=function(P){return M.H.useContext(P)},yt.useDebugValue=function(){},yt.useDeferredValue=function(P,V){return M.H.useDeferredValue(P,V)},yt.useEffect=function(P,V){return M.H.useEffect(P,V)},yt.useEffectEvent=function(P){return M.H.useEffectEvent(P)},yt.useId=function(){return M.H.useId()},yt.useImperativeHandle=function(P,V,Q){return M.H.useImperativeHandle(P,V,Q)},yt.useInsertionEffect=function(P,V){return M.H.useInsertionEffect(P,V)},yt.useLayoutEffect=function(P,V){return M.H.useLayoutEffect(P,V)},yt.useMemo=function(P,V){return M.H.useMemo(P,V)},yt.useOptimistic=function(P,V){return M.H.useOptimistic(P,V)},yt.useReducer=function(P,V,Q){return M.H.useReducer(P,V,Q)},yt.useRef=function(P){return M.H.useRef(P)},yt.useState=function(P){return M.H.useState(P)},yt.useSyncExternalStore=function(P,V,Q){return M.H.useSyncExternalStore(P,V,Q)},yt.useTransition=function(){return M.H.useTransition()},yt.version="19.2.0",yt}var im;function Ch(){return im||(im=1,Ju.exports=Tv()),Ju.exports}var I=Ch();const vr=Vm(I);var th={exports:{}},fr={},eh={exports:{}},ih={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nm;function Cv(){return nm||(nm=1,(function(h){function t(k,j){var et=k.length;k.push(j);t:for(;0<et;){var pt=et-1>>>1,At=k[pt];if(0<r(At,j))k[pt]=j,k[et]=At,et=pt;else break t}}function i(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var j=k[0],et=k.pop();if(et!==j){k[0]=et;t:for(var pt=0,At=k.length,P=At>>>1;pt<P;){var V=2*(pt+1)-1,Q=k[V],Z=V+1,ot=k[Z];if(0>r(Q,et))Z<At&&0>r(ot,Q)?(k[pt]=ot,k[Z]=et,pt=Z):(k[pt]=Q,k[V]=et,pt=V);else if(Z<At&&0>r(ot,et))k[pt]=ot,k[Z]=et,pt=Z;else break t}}return j}function r(k,j){var et=k.sortIndex-j.sortIndex;return et!==0?et:k.id-j.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();h.unstable_now=function(){return c.now()-u}}var d=[],g=[],m=1,y=null,v=3,w=!1,_=!1,E=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function b(k){for(var j=i(g);j!==null;){if(j.callback===null)s(g);else if(j.startTime<=k)s(g),j.sortIndex=j.expirationTime,t(d,j);else break;j=i(g)}}function S(k){if(E=!1,b(k),!_)if(i(d)!==null)_=!0,T||(T=!0,J());else{var j=i(g);j!==null&&gt(S,j.startTime-k)}}var T=!1,M=-1,N=5,B=-1;function Y(){return C?!0:!(h.unstable_now()-B<N)}function $(){if(C=!1,T){var k=h.unstable_now();B=k;var j=!0;try{t:{_=!1,E&&(E=!1,L(M),M=-1),w=!0;var et=v;try{e:{for(b(k),y=i(d);y!==null&&!(y.expirationTime>k&&Y());){var pt=y.callback;if(typeof pt=="function"){y.callback=null,v=y.priorityLevel;var At=pt(y.expirationTime<=k);if(k=h.unstable_now(),typeof At=="function"){y.callback=At,b(k),j=!0;break e}y===i(d)&&s(d),b(k)}else s(d);y=i(d)}if(y!==null)j=!0;else{var P=i(g);P!==null&&gt(S,P.startTime-k),j=!1}}break t}finally{y=null,v=et,w=!1}j=void 0}}finally{j?J():T=!1}}}var J;if(typeof D=="function")J=function(){D($)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,tt=nt.port2;nt.port1.onmessage=$,J=function(){tt.postMessage(null)}}else J=function(){R($,0)};function gt(k,j){M=R(function(){k(h.unstable_now())},j)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(k){k.callback=null},h.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<k?Math.floor(1e3/k):5},h.unstable_getCurrentPriorityLevel=function(){return v},h.unstable_next=function(k){switch(v){case 1:case 2:case 3:var j=3;break;default:j=v}var et=v;v=j;try{return k()}finally{v=et}},h.unstable_requestPaint=function(){C=!0},h.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var et=v;v=k;try{return j()}finally{v=et}},h.unstable_scheduleCallback=function(k,j,et){var pt=h.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?pt+et:pt):et=pt,k){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=et+At,k={id:m++,callback:j,priorityLevel:k,startTime:et,expirationTime:At,sortIndex:-1},et>pt?(k.sortIndex=et,t(g,k),i(d)===null&&k===i(g)&&(E?(L(M),M=-1):E=!0,gt(S,et-pt))):(k.sortIndex=At,t(d,k),_||w||(_=!0,T||(T=!0,J()))),k},h.unstable_shouldYield=Y,h.unstable_wrapCallback=function(k){var j=v;return function(){var et=v;v=j;try{return k.apply(this,arguments)}finally{v=et}}}})(ih)),ih}var sm;function Rv(){return sm||(sm=1,eh.exports=Cv()),eh.exports}var nh={exports:{}},Ce={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am;function Mv(){if(am)return Ce;am=1;var h=Ch();function t(d){var g="https://react.dev/errors/"+d;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,g,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:g,implementation:m}}var c=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,g){if(d==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ce.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ce.createPortal=function(d,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return o(d,g,null,m)},Ce.flushSync=function(d){var g=c.T,m=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=g,s.p=m,s.d.f()}},Ce.preconnect=function(d,g){typeof d=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(d,g))},Ce.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Ce.preinit=function(d,g){if(typeof d=="string"&&g&&typeof g.as=="string"){var m=g.as,y=u(m,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?s.d.S(d,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):m==="script"&&s.d.X(d,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ce.preinitModule=function(d,g){if(typeof d=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=u(g.as,g.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(d)},Ce.preload=function(d,g){if(typeof d=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,y=u(m,g.crossOrigin);s.d.L(d,m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ce.preloadModule=function(d,g){if(typeof d=="string")if(g){var m=u(g.as,g.crossOrigin);s.d.m(d,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(d)},Ce.requestFormReset=function(d){s.d.r(d)},Ce.unstable_batchedUpdates=function(d,g){return d(g)},Ce.useFormState=function(d,g,m){return c.H.useFormState(d,g,m)},Ce.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ce.version="19.2.0",Ce}var rm;function Dv(){if(rm)return nh.exports;rm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),nh.exports=Mv(),nh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om;function Lv(){if(om)return fr;om=1;var h=Rv(),t=Ch(),i=Dv();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(s(188))}function g(e){var n=e.alternate;if(!n){if(n=o(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,l=n;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return d(f),e;if(p===l)return d(f),n;p=p.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=p;else{for(var A=!1,x=f.child;x;){if(x===a){A=!0,a=f,l=p;break}if(x===l){A=!0,l=f,a=p;break}x=x.sibling}if(!A){for(x=p.child;x;){if(x===a){A=!0,a=p,l=f;break}if(x===l){A=!0,l=p,a=f;break}x=x.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function m(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=m(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),D=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Symbol.for("react.client.reference");function tt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===nt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case R:return"Profiler";case C:return"StrictMode";case S:return"Suspense";case T:return"SuspenseList";case B:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case D:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case b:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:tt(e.type)||"Memo";case N:n=e._payload,e=e._init;try{return tt(e(n))}catch{}}return null}var gt=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},pt=[],At=-1;function P(e){return{current:e}}function V(e){0>At||(e.current=pt[At],pt[At]=null,At--)}function Q(e,n){At++,pt[At]=e.current,e.current=n}var Z=P(null),ot=P(null),ut=P(null),rt=P(null);function Vt(e,n){switch(Q(ut,n),Q(ot,e),Q(Z,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ap(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ap(n),e=Sp(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(Z),Q(Z,e)}function Lt(){V(Z),V(ot),V(ut)}function zt(e){e.memoizedState!==null&&Q(rt,e);var n=Z.current,a=Sp(n,e.type);n!==a&&(Q(ot,e),Q(Z,a))}function ke(e){ot.current===e&&(V(Z),V(ot)),rt.current===e&&(V(rt),lr._currentValue=et)}var Ye,Dt;function Ot(e){if(Ye===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Ye=n&&n[1]||"",Dt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+e+Dt}var Qt=!1;function te(e,n){if(!e||Qt)return"";Qt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(q){var G=q}Reflect.construct(e,[],K)}else{try{K.call()}catch(q){G=q}e.call(K.prototype)}}else{try{throw Error()}catch(q){G=q}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(q){if(q&&G&&typeof q.stack=="string")return[q.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),A=p[0],x=p[1];if(A&&x){var O=A.split(`
`),U=x.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<U.length&&!U[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===U.length)for(l=O.length-1,f=U.length-1;1<=l&&0<=f&&O[l]!==U[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==U[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==U[f]){var X=`
`+O[l].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=l&&0<=f);break}}}finally{Qt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ot(a):""}function fn(e,n){switch(e.tag){case 26:case 27:case 5:return Ot(e.type);case 16:return Ot("Lazy");case 13:return e.child!==n&&n!==null?Ot("Suspense Fallback"):Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return te(e.type,!1);case 11:return te(e.type.render,!1);case 1:return te(e.type,!0);case 31:return Ot("Activity");default:return""}}function gn(e){try{var n="",a=null;do n+=fn(e,a),a=e,e=e.return;while(e);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var qn=Object.prototype.hasOwnProperty,va=h.unstable_scheduleCallback,pn=h.unstable_cancelCallback,zl=h.unstable_shouldYield,Bl=h.unstable_requestPaint,Le=h.unstable_now,Il=h.unstable_getCurrentPriorityLevel,qr=h.unstable_ImmediatePriority,bi=h.unstable_UserBlockingPriority,vi=h.unstable_NormalPriority,Ti=h.unstable_LowPriority,Ss=h.unstable_IdlePriority,r0=h.log,o0=h.unstable_setDisableYieldValue,Aa=null,Xe=null;function mn(e){if(typeof r0=="function"&&o0(e),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Aa,e)}catch{}}var $e=Math.clz32?Math.clz32:u0,l0=Math.log,c0=Math.LN2;function u0(e){return e>>>=0,e===0?32:31-(l0(e)/c0|0)|0}var Vr=256,Yr=262144,Xr=4194304;function Vn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function $r(e,n,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,p=e.suspendedLanes,A=e.pingedLanes;e=e.warmLanes;var x=l&134217727;return x!==0?(l=x&~p,l!==0?f=Vn(l):(A&=x,A!==0?f=Vn(A):a||(a=x&~e,a!==0&&(f=Vn(a))))):(x=l&~p,x!==0?f=Vn(x):A!==0?f=Vn(A):a||(a=l&~e,a!==0&&(f=Vn(a)))),f===0?0:n!==0&&n!==f&&(n&p)===0&&(p=f&-f,a=n&-n,p>=a||p===32&&(a&4194048)!==0)?n:f}function Sa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function h0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function td(){var e=Xr;return Xr<<=1,(Xr&62914560)===0&&(Xr=4194304),e}function Hl(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function wa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function d0(e,n,a,l,f,p){var A=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,O=e.expirationTimes,U=e.hiddenUpdates;for(a=A&~a;0<a;){var X=31-$e(a),K=1<<X;x[X]=0,O[X]=-1;var G=U[X];if(G!==null)for(U[X]=null,X=0;X<G.length;X++){var q=G[X];q!==null&&(q.lane&=-536870913)}a&=~K}l!==0&&ed(e,l,0),p!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=p&~(A&~n))}function ed(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var l=31-$e(n);e.entangledLanes|=n,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function id(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var l=31-$e(a),f=1<<l;f&n|e[l]&n&&(e[l]|=n),a&=~f}}function nd(e,n){var a=n&-n;return a=(a&42)!==0?1:Fl(a),(a&(e.suspendedLanes|n))!==0?0:a}function Fl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ul(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function sd(){var e=j.p;return e!==0?e:(e=window.event,e===void 0?32:qp(e.type))}function ad(e,n){var a=j.p;try{return j.p=e,n()}finally{j.p=a}}var yn=Math.random().toString(36).slice(2),Se="__reactFiber$"+yn,ze="__reactProps$"+yn,ws="__reactContainer$"+yn,Gl="__reactEvents$"+yn,f0="__reactListeners$"+yn,g0="__reactHandles$"+yn,rd="__reactResources$"+yn,Ea="__reactMarker$"+yn;function jl(e){delete e[Se],delete e[ze],delete e[Gl],delete e[f0],delete e[g0]}function Es(e){var n=e[Se];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ws]||a[Se]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Rp(e);e!==null;){if(a=e[Se])return a;e=Rp(e)}return n}e=a,a=e.parentNode}return null}function _s(e){if(e=e[Se]||e[ws]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function _a(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function xs(e){var n=e[rd];return n||(n=e[rd]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ye(e){e[Ea]=!0}var od=new Set,ld={};function Yn(e,n){Ts(e,n),Ts(e+"Capture",n)}function Ts(e,n){for(ld[e]=n,e=0;e<n.length;e++)od.add(n[e])}var p0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cd={},ud={};function m0(e){return qn.call(ud,e)?!0:qn.call(cd,e)?!1:p0.test(e)?ud[e]=!0:(cd[e]=!0,!1)}function Wr(e,n,a){if(m0(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Kr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Ui(e,n,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+l)}}function ai(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hd(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function y0(e,n,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(A){a=""+A,p.call(this,A)}}),Object.defineProperty(e,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ql(e){if(!e._valueTracker){var n=hd(e)?"checked":"value";e._valueTracker=y0(e,n,""+e[n])}}function dd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return e&&(l=hd(e)?e.checked?"true":"false":e.value),e=l,e!==a?(n.setValue(e),!0):!1}function Qr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var b0=/[\n"\\]/g;function ri(e){return e.replace(b0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Vl(e,n,a,l,f,p,A,x){e.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.type=A:e.removeAttribute("type"),n!=null?A==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ai(n)):e.value!==""+ai(n)&&(e.value=""+ai(n)):A!=="submit"&&A!=="reset"||e.removeAttribute("value"),n!=null?Yl(e,A,ai(n)):a!=null?Yl(e,A,ai(a)):l!=null&&e.removeAttribute("value"),f==null&&p!=null&&(e.defaultChecked=!!p),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+ai(x):e.removeAttribute("name")}function fd(e,n,a,l,f,p,A,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.type=p),n!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){ql(e);return}a=a!=null?""+ai(a):"",n=n!=null?""+ai(n):a,x||n===e.value||(e.value=n),e.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=x?e.checked:!!l,e.defaultChecked=!!l,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(e.name=A),ql(e)}function Yl(e,n,a){n==="number"&&Qr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Cs(e,n,a,l){if(e=e.options,n){n={};for(var f=0;f<a.length;f++)n["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=n.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+ai(a),n=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function gd(e,n,a){if(n!=null&&(n=""+ai(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ai(a):""}function pd(e,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(gt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=ai(n),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),ql(e)}function Rs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var v0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function md(e,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":l?e.setProperty(n,a):typeof a!="number"||a===0||v0.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function yd(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&a[f]!==l&&md(e,f,l)}else for(var p in n)n.hasOwnProperty(p)&&md(e,p,n[p])}function Xl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),S0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zr(e){return S0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Gi(){}var $l=null;function Wl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ms=null,Ds=null;function bd(e){var n=_s(e);if(n&&(e=n.stateNode)){var a=e[ze]||null;t:switch(e=n.stateNode,n.type){case"input":if(Vl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ri(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==e&&l.form===e.form){var f=l[ze]||null;if(!f)throw Error(s(90));Vl(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===e.form&&dd(l)}break t;case"textarea":gd(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Cs(e,!!a.multiple,n,!1)}}}var Kl=!1;function vd(e,n,a){if(Kl)return e(n,a);Kl=!0;try{var l=e(n);return l}finally{if(Kl=!1,(Ms!==null||Ds!==null)&&(Fo(),Ms&&(n=Ms,e=Ds,Ds=Ms=null,bd(n),e)))for(n=0;n<e.length;n++)bd(e[n])}}function xa(e,n){var a=e.stateNode;if(a===null)return null;var l=a[ze]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ql=!1;if(ji)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{Ql=!1}var bn=null,Zl=null,Jr=null;function Ad(){if(Jr)return Jr;var e,n=Zl,a=n.length,l,f="value"in bn?bn.value:bn.textContent,p=f.length;for(e=0;e<a&&n[e]===f[e];e++);var A=a-e;for(l=1;l<=A&&n[a-l]===f[p-l];l++);return Jr=f.slice(e,1<l?1-l:void 0)}function to(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function eo(){return!0}function Sd(){return!1}function Be(e){function n(a,l,f,p,A){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=A,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?eo:Sd,this.isPropagationStopped=Sd,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),n}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},io=Be(Xn),Ca=y({},Xn,{view:0,detail:0}),w0=Be(Ca),Jl,tc,Ra,no=y({},Ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ra&&(Ra&&e.type==="mousemove"?(Jl=e.screenX-Ra.screenX,tc=e.screenY-Ra.screenY):tc=Jl=0,Ra=e),Jl)},movementY:function(e){return"movementY"in e?e.movementY:tc}}),wd=Be(no),E0=y({},no,{dataTransfer:0}),_0=Be(E0),x0=y({},Ca,{relatedTarget:0}),ec=Be(x0),T0=y({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),C0=Be(T0),R0=y({},Xn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),M0=Be(R0),D0=y({},Xn,{data:0}),Ed=Be(D0),L0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=N0[e])?!!n[e]:!1}function ic(){return P0}var k0=y({},Ca,{key:function(e){if(e.key){var n=L0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=to(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?O0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ic,charCode:function(e){return e.type==="keypress"?to(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?to(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),z0=Be(k0),B0=y({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_d=Be(B0),I0=y({},Ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ic}),H0=Be(I0),F0=y({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),U0=Be(F0),G0=y({},no,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=Be(G0),q0=y({},Xn,{newState:0,oldState:0}),V0=Be(q0),Y0=[9,13,27,32],nc=ji&&"CompositionEvent"in window,Ma=null;ji&&"documentMode"in document&&(Ma=document.documentMode);var X0=ji&&"TextEvent"in window&&!Ma,xd=ji&&(!nc||Ma&&8<Ma&&11>=Ma),Td=" ",Cd=!1;function Rd(e,n){switch(e){case"keyup":return Y0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Md(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ls=!1;function $0(e,n){switch(e){case"compositionend":return Md(n);case"keypress":return n.which!==32?null:(Cd=!0,Td);case"textInput":return e=n.data,e===Td&&Cd?null:e;default:return null}}function W0(e,n){if(Ls)return e==="compositionend"||!nc&&Rd(e,n)?(e=Ad(),Jr=Zl=bn=null,Ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return xd&&n.locale!=="ko"?null:n.data;default:return null}}var K0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!K0[e.type]:n==="textarea"}function Ld(e,n,a,l){Ms?Ds?Ds.push(l):Ds=[l]:Ms=l,n=Xo(n,"onChange"),0<n.length&&(a=new io("onChange","change",null,a,l),e.push({event:a,listeners:n}))}var Da=null,La=null;function Q0(e){gp(e,0)}function so(e){var n=_a(e);if(dd(n))return e}function Od(e,n){if(e==="change")return n}var Nd=!1;if(ji){var sc;if(ji){var ac="oninput"in document;if(!ac){var Pd=document.createElement("div");Pd.setAttribute("oninput","return;"),ac=typeof Pd.oninput=="function"}sc=ac}else sc=!1;Nd=sc&&(!document.documentMode||9<document.documentMode)}function kd(){Da&&(Da.detachEvent("onpropertychange",zd),La=Da=null)}function zd(e){if(e.propertyName==="value"&&so(La)){var n=[];Ld(n,La,e,Wl(e)),vd(Q0,n)}}function Z0(e,n,a){e==="focusin"?(kd(),Da=n,La=a,Da.attachEvent("onpropertychange",zd)):e==="focusout"&&kd()}function J0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return so(La)}function tb(e,n){if(e==="click")return so(n)}function eb(e,n){if(e==="input"||e==="change")return so(n)}function ib(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var We=typeof Object.is=="function"?Object.is:ib;function Oa(e,n){if(We(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!qn.call(n,f)||!We(e[f],n[f]))return!1}return!0}function Bd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Id(e,n){var a=Bd(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=n&&l>=n)return{node:a,offset:n-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Bd(a)}}function Hd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Hd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Fd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Qr(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Qr(e.document)}return n}function rc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var nb=ji&&"documentMode"in document&&11>=document.documentMode,Os=null,oc=null,Na=null,lc=!1;function Ud(e,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;lc||Os==null||Os!==Qr(l)||(l=Os,"selectionStart"in l&&rc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Na&&Oa(Na,l)||(Na=l,l=Xo(oc,"onSelect"),0<l.length&&(n=new io("onSelect","select",null,n,a),e.push({event:n,listeners:l}),n.target=Os)))}function $n(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ns={animationend:$n("Animation","AnimationEnd"),animationiteration:$n("Animation","AnimationIteration"),animationstart:$n("Animation","AnimationStart"),transitionrun:$n("Transition","TransitionRun"),transitionstart:$n("Transition","TransitionStart"),transitioncancel:$n("Transition","TransitionCancel"),transitionend:$n("Transition","TransitionEnd")},cc={},Gd={};ji&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Wn(e){if(cc[e])return cc[e];if(!Ns[e])return e;var n=Ns[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Gd)return cc[e]=n[a];return e}var jd=Wn("animationend"),qd=Wn("animationiteration"),Vd=Wn("animationstart"),sb=Wn("transitionrun"),ab=Wn("transitionstart"),rb=Wn("transitioncancel"),Yd=Wn("transitionend"),Xd=new Map,uc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uc.push("scrollEnd");function Ai(e,n){Xd.set(e,n),Yn(n,[e])}var ao=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oi=[],Ps=0,hc=0;function ro(){for(var e=Ps,n=hc=Ps=0;n<e;){var a=oi[n];oi[n++]=null;var l=oi[n];oi[n++]=null;var f=oi[n];oi[n++]=null;var p=oi[n];if(oi[n++]=null,l!==null&&f!==null){var A=l.pending;A===null?f.next=f:(f.next=A.next,A.next=f),l.pending=f}p!==0&&$d(a,f,p)}}function oo(e,n,a,l){oi[Ps++]=e,oi[Ps++]=n,oi[Ps++]=a,oi[Ps++]=l,hc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function dc(e,n,a,l){return oo(e,n,a,l),lo(e)}function Kn(e,n){return oo(e,null,null,n),lo(e)}function $d(e,n,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=e.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(f=!0)),e=p,p=p.return;return e.tag===3?(p=e.stateNode,f&&n!==null&&(f=31-$e(a),e=p.hiddenUpdates,l=e[f],l===null?e[f]=[n]:l.push(n),n.lane=a|536870912),p):null}function lo(e){if(50<er)throw er=0,Su=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ks={};function ob(e,n,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ke(e,n,a,l){return new ob(e,n,a,l)}function fc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qi(e,n){var a=e.alternate;return a===null?(a=Ke(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Wd(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function co(e,n,a,l,f,p){var A=0;if(l=e,typeof e=="function")fc(e)&&(A=1);else if(typeof e=="string")A=dv(e,a,Z.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case B:return e=Ke(31,a,n,f),e.elementType=B,e.lanes=p,e;case E:return Qn(a.children,f,p,n);case C:A=8,f|=24;break;case R:return e=Ke(12,a,n,f|2),e.elementType=R,e.lanes=p,e;case S:return e=Ke(13,a,n,f),e.elementType=S,e.lanes=p,e;case T:return e=Ke(19,a,n,f),e.elementType=T,e.lanes=p,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:A=10;break t;case L:A=9;break t;case b:A=11;break t;case M:A=14;break t;case N:A=16,l=null;break t}A=29,a=Error(s(130,e===null?"null":typeof e,"")),l=null}return n=Ke(A,a,n,f),n.elementType=e,n.type=l,n.lanes=p,n}function Qn(e,n,a,l){return e=Ke(7,e,l,n),e.lanes=a,e}function gc(e,n,a){return e=Ke(6,e,null,n),e.lanes=a,e}function Kd(e){var n=Ke(18,null,null,0);return n.stateNode=e,n}function pc(e,n,a){return n=Ke(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Qd=new WeakMap;function li(e,n){if(typeof e=="object"&&e!==null){var a=Qd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:gn(n)},Qd.set(e,n),n)}return{value:e,source:n,stack:gn(n)}}var zs=[],Bs=0,uo=null,Pa=0,ci=[],ui=0,vn=null,Ci=1,Ri="";function Vi(e,n){zs[Bs++]=Pa,zs[Bs++]=uo,uo=e,Pa=n}function Zd(e,n,a){ci[ui++]=Ci,ci[ui++]=Ri,ci[ui++]=vn,vn=e;var l=Ci;e=Ri;var f=32-$e(l)-1;l&=~(1<<f),a+=1;var p=32-$e(n)+f;if(30<p){var A=f-f%5;p=(l&(1<<A)-1).toString(32),l>>=A,f-=A,Ci=1<<32-$e(n)+f|a<<f|l,Ri=p+e}else Ci=1<<p|a<<f|l,Ri=e}function mc(e){e.return!==null&&(Vi(e,1),Zd(e,1,0))}function yc(e){for(;e===uo;)uo=zs[--Bs],zs[Bs]=null,Pa=zs[--Bs],zs[Bs]=null;for(;e===vn;)vn=ci[--ui],ci[ui]=null,Ri=ci[--ui],ci[ui]=null,Ci=ci[--ui],ci[ui]=null}function Jd(e,n){ci[ui++]=Ci,ci[ui++]=Ri,ci[ui++]=vn,Ci=n.id,Ri=n.overflow,vn=e}var we=null,Yt=null,Mt=!1,An=null,hi=!1,bc=Error(s(519));function Sn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ka(li(n,e)),bc}function tf(e){var n=e.stateNode,a=e.type,l=e.memoizedProps;switch(n[Se]=e,n[ze]=l,a){case"dialog":_t("cancel",n),_t("close",n);break;case"iframe":case"object":case"embed":_t("load",n);break;case"video":case"audio":for(a=0;a<nr.length;a++)_t(nr[a],n);break;case"source":_t("error",n);break;case"img":case"image":case"link":_t("error",n),_t("load",n);break;case"details":_t("toggle",n);break;case"input":_t("invalid",n),fd(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":_t("invalid",n);break;case"textarea":_t("invalid",n),pd(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||bp(n.textContent,a)?(l.popover!=null&&(_t("beforetoggle",n),_t("toggle",n)),l.onScroll!=null&&_t("scroll",n),l.onScrollEnd!=null&&_t("scrollend",n),l.onClick!=null&&(n.onclick=Gi),n=!0):n=!1,n||Sn(e,!0)}function ef(e){for(we=e.return;we;)switch(we.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:we=we.return}}function Is(e){if(e!==we)return!1;if(!Mt)return ef(e),Mt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||zu(e.type,e.memoizedProps)),a=!a),a&&Yt&&Sn(e),ef(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Yt=Cp(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Yt=Cp(e)}else n===27?(n=Yt,kn(e.type)?(e=Uu,Uu=null,Yt=e):Yt=n):Yt=we?fi(e.stateNode.nextSibling):null;return!0}function Zn(){Yt=we=null,Mt=!1}function vc(){var e=An;return e!==null&&(Ue===null?Ue=e:Ue.push.apply(Ue,e),An=null),e}function ka(e){An===null?An=[e]:An.push(e)}var Ac=P(null),Jn=null,Yi=null;function wn(e,n,a){Q(Ac,n._currentValue),n._currentValue=a}function Xi(e){e._currentValue=Ac.current,V(Ac)}function Sc(e,n,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===a)break;e=e.return}}function wc(e,n,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var p=f.dependencies;if(p!==null){var A=f.child;p=p.firstContext;t:for(;p!==null;){var x=p;p=f;for(var O=0;O<n.length;O++)if(x.context===n[O]){p.lanes|=a,x=p.alternate,x!==null&&(x.lanes|=a),Sc(p.return,a,e),l||(A=null);break t}p=x.next}}else if(f.tag===18){if(A=f.return,A===null)throw Error(s(341));A.lanes|=a,p=A.alternate,p!==null&&(p.lanes|=a),Sc(A,a,e),A=null}else A=f.child;if(A!==null)A.return=f;else for(A=f;A!==null;){if(A===e){A=null;break}if(f=A.sibling,f!==null){f.return=A.return,A=f;break}A=A.return}f=A}}function Hs(e,n,a,l){e=null;for(var f=n,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var A=f.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var x=f.type;We(f.pendingProps.value,A.value)||(e!==null?e.push(x):e=[x])}}else if(f===rt.current){if(A=f.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(lr):e=[lr])}f=f.return}e!==null&&wc(n,e,a,l),n.flags|=262144}function ho(e){for(e=e.firstContext;e!==null;){if(!We(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ts(e){Jn=e,Yi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ee(e){return nf(Jn,e)}function fo(e,n){return Jn===null&&ts(e),nf(e,n)}function nf(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Yi===null){if(e===null)throw Error(s(308));Yi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Yi=Yi.next=n;return a}var lb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},cb=h.unstable_scheduleCallback,ub=h.unstable_NormalPriority,ce={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ec(){return{controller:new lb,data:new Map,refCount:0}}function za(e){e.refCount--,e.refCount===0&&cb(ub,function(){e.controller.abort()})}var Ba=null,_c=0,Fs=0,Us=null;function hb(e,n){if(Ba===null){var a=Ba=[];_c=0,Fs=Cu(),Us={status:"pending",value:void 0,then:function(l){a.push(l)}}}return _c++,n.then(sf,sf),n}function sf(){if(--_c===0&&Ba!==null){Us!==null&&(Us.status="fulfilled");var e=Ba;Ba=null,Fs=0,Us=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function db(e,n){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<a.length;f++)(0,a[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var af=k.S;k.S=function(e,n){Gg=Le(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&hb(e,n),af!==null&&af(e,n)};var es=P(null);function xc(){var e=es.current;return e!==null?e:jt.pooledCache}function go(e,n){n===null?Q(es,es.current):Q(es,n.pool)}function rf(){var e=xc();return e===null?null:{parent:ce._currentValue,pool:e}}var Gs=Error(s(460)),Tc=Error(s(474)),po=Error(s(542)),mo={then:function(){}};function of(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lf(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Gi,Gi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,uf(e),e;default:if(typeof n.status=="string")n.then(Gi,Gi);else{if(e=jt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,uf(e),e}throw ns=n,Gs}}function is(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ns=a,Gs):a}}var ns=null;function cf(){if(ns===null)throw Error(s(459));var e=ns;return ns=null,e}function uf(e){if(e===Gs||e===po)throw Error(s(483))}var js=null,Ia=0;function yo(e){var n=Ia;return Ia+=1,js===null&&(js=[]),lf(js,e,n)}function Ha(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function bo(e,n){throw n.$$typeof===v?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function hf(e){function n(H,z){if(e){var F=H.deletions;F===null?(H.deletions=[z],H.flags|=16):F.push(z)}}function a(H,z){if(!e)return null;for(;z!==null;)n(H,z),z=z.sibling;return null}function l(H){for(var z=new Map;H!==null;)H.key!==null?z.set(H.key,H):z.set(H.index,H),H=H.sibling;return z}function f(H,z){return H=qi(H,z),H.index=0,H.sibling=null,H}function p(H,z,F){return H.index=F,e?(F=H.alternate,F!==null?(F=F.index,F<z?(H.flags|=67108866,z):F):(H.flags|=67108866,z)):(H.flags|=1048576,z)}function A(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function x(H,z,F,W){return z===null||z.tag!==6?(z=gc(F,H.mode,W),z.return=H,z):(z=f(z,F),z.return=H,z)}function O(H,z,F,W){var ct=F.type;return ct===E?X(H,z,F.props.children,W,F.key):z!==null&&(z.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===N&&is(ct)===z.type)?(z=f(z,F.props),Ha(z,F),z.return=H,z):(z=co(F.type,F.key,F.props,null,H.mode,W),Ha(z,F),z.return=H,z)}function U(H,z,F,W){return z===null||z.tag!==4||z.stateNode.containerInfo!==F.containerInfo||z.stateNode.implementation!==F.implementation?(z=pc(F,H.mode,W),z.return=H,z):(z=f(z,F.children||[]),z.return=H,z)}function X(H,z,F,W,ct){return z===null||z.tag!==7?(z=Qn(F,H.mode,W,ct),z.return=H,z):(z=f(z,F),z.return=H,z)}function K(H,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=gc(""+z,H.mode,F),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case w:return F=co(z.type,z.key,z.props,null,H.mode,F),Ha(F,z),F.return=H,F;case _:return z=pc(z,H.mode,F),z.return=H,z;case N:return z=is(z),K(H,z,F)}if(gt(z)||J(z))return z=Qn(z,H.mode,F,null),z.return=H,z;if(typeof z.then=="function")return K(H,yo(z),F);if(z.$$typeof===D)return K(H,fo(H,z),F);bo(H,z)}return null}function G(H,z,F,W){var ct=z!==null?z.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ct!==null?null:x(H,z,""+F,W);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===ct?O(H,z,F,W):null;case _:return F.key===ct?U(H,z,F,W):null;case N:return F=is(F),G(H,z,F,W)}if(gt(F)||J(F))return ct!==null?null:X(H,z,F,W,null);if(typeof F.then=="function")return G(H,z,yo(F),W);if(F.$$typeof===D)return G(H,z,fo(H,F),W);bo(H,F)}return null}function q(H,z,F,W,ct){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return H=H.get(F)||null,x(z,H,""+W,ct);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return H=H.get(W.key===null?F:W.key)||null,O(z,H,W,ct);case _:return H=H.get(W.key===null?F:W.key)||null,U(z,H,W,ct);case N:return W=is(W),q(H,z,F,W,ct)}if(gt(W)||J(W))return H=H.get(F)||null,X(z,H,W,ct,null);if(typeof W.then=="function")return q(H,z,F,yo(W),ct);if(W.$$typeof===D)return q(H,z,F,fo(z,W),ct);bo(z,W)}return null}function st(H,z,F,W){for(var ct=null,Nt=null,at=z,St=z=0,Ct=null;at!==null&&St<F.length;St++){at.index>St?(Ct=at,at=null):Ct=at.sibling;var Pt=G(H,at,F[St],W);if(Pt===null){at===null&&(at=Ct);break}e&&at&&Pt.alternate===null&&n(H,at),z=p(Pt,z,St),Nt===null?ct=Pt:Nt.sibling=Pt,Nt=Pt,at=Ct}if(St===F.length)return a(H,at),Mt&&Vi(H,St),ct;if(at===null){for(;St<F.length;St++)at=K(H,F[St],W),at!==null&&(z=p(at,z,St),Nt===null?ct=at:Nt.sibling=at,Nt=at);return Mt&&Vi(H,St),ct}for(at=l(at);St<F.length;St++)Ct=q(at,H,St,F[St],W),Ct!==null&&(e&&Ct.alternate!==null&&at.delete(Ct.key===null?St:Ct.key),z=p(Ct,z,St),Nt===null?ct=Ct:Nt.sibling=Ct,Nt=Ct);return e&&at.forEach(function(Fn){return n(H,Fn)}),Mt&&Vi(H,St),ct}function dt(H,z,F,W){if(F==null)throw Error(s(151));for(var ct=null,Nt=null,at=z,St=z=0,Ct=null,Pt=F.next();at!==null&&!Pt.done;St++,Pt=F.next()){at.index>St?(Ct=at,at=null):Ct=at.sibling;var Fn=G(H,at,Pt.value,W);if(Fn===null){at===null&&(at=Ct);break}e&&at&&Fn.alternate===null&&n(H,at),z=p(Fn,z,St),Nt===null?ct=Fn:Nt.sibling=Fn,Nt=Fn,at=Ct}if(Pt.done)return a(H,at),Mt&&Vi(H,St),ct;if(at===null){for(;!Pt.done;St++,Pt=F.next())Pt=K(H,Pt.value,W),Pt!==null&&(z=p(Pt,z,St),Nt===null?ct=Pt:Nt.sibling=Pt,Nt=Pt);return Mt&&Vi(H,St),ct}for(at=l(at);!Pt.done;St++,Pt=F.next())Pt=q(at,H,St,Pt.value,W),Pt!==null&&(e&&Pt.alternate!==null&&at.delete(Pt.key===null?St:Pt.key),z=p(Pt,z,St),Nt===null?ct=Pt:Nt.sibling=Pt,Nt=Pt);return e&&at.forEach(function(Ev){return n(H,Ev)}),Mt&&Vi(H,St),ct}function Ut(H,z,F,W){if(typeof F=="object"&&F!==null&&F.type===E&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:t:{for(var ct=F.key;z!==null;){if(z.key===ct){if(ct=F.type,ct===E){if(z.tag===7){a(H,z.sibling),W=f(z,F.props.children),W.return=H,H=W;break t}}else if(z.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===N&&is(ct)===z.type){a(H,z.sibling),W=f(z,F.props),Ha(W,F),W.return=H,H=W;break t}a(H,z);break}else n(H,z);z=z.sibling}F.type===E?(W=Qn(F.props.children,H.mode,W,F.key),W.return=H,H=W):(W=co(F.type,F.key,F.props,null,H.mode,W),Ha(W,F),W.return=H,H=W)}return A(H);case _:t:{for(ct=F.key;z!==null;){if(z.key===ct)if(z.tag===4&&z.stateNode.containerInfo===F.containerInfo&&z.stateNode.implementation===F.implementation){a(H,z.sibling),W=f(z,F.children||[]),W.return=H,H=W;break t}else{a(H,z);break}else n(H,z);z=z.sibling}W=pc(F,H.mode,W),W.return=H,H=W}return A(H);case N:return F=is(F),Ut(H,z,F,W)}if(gt(F))return st(H,z,F,W);if(J(F)){if(ct=J(F),typeof ct!="function")throw Error(s(150));return F=ct.call(F),dt(H,z,F,W)}if(typeof F.then=="function")return Ut(H,z,yo(F),W);if(F.$$typeof===D)return Ut(H,z,fo(H,F),W);bo(H,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,z!==null&&z.tag===6?(a(H,z.sibling),W=f(z,F),W.return=H,H=W):(a(H,z),W=gc(F,H.mode,W),W.return=H,H=W),A(H)):a(H,z)}return function(H,z,F,W){try{Ia=0;var ct=Ut(H,z,F,W);return js=null,ct}catch(at){if(at===Gs||at===po)throw at;var Nt=Ke(29,at,null,H.mode);return Nt.lanes=W,Nt.return=H,Nt}finally{}}}var ss=hf(!0),df=hf(!1),En=!1;function Cc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _n(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xn(e,n,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(kt&2)!==0){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=lo(e),$d(e,null,a),n}return oo(e,l,n,a),lo(e)}function Fa(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,id(e,a)}}function Mc(e,n){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=A:p=p.next=A,a=a.next}while(a!==null);p===null?f=p=n:p=p.next=n}else f=p=n;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var Dc=!1;function Ua(){if(Dc){var e=Us;if(e!==null)throw e}}function Ga(e,n,a,l){Dc=!1;var f=e.updateQueue;En=!1;var p=f.firstBaseUpdate,A=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var O=x,U=O.next;O.next=null,A===null?p=U:A.next=U,A=O;var X=e.alternate;X!==null&&(X=X.updateQueue,x=X.lastBaseUpdate,x!==A&&(x===null?X.firstBaseUpdate=U:x.next=U,X.lastBaseUpdate=O))}if(p!==null){var K=f.baseState;A=0,X=U=O=null,x=p;do{var G=x.lane&-536870913,q=G!==x.lane;if(q?(Tt&G)===G:(l&G)===G){G!==0&&G===Fs&&(Dc=!0),X!==null&&(X=X.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var st=e,dt=x;G=n;var Ut=a;switch(dt.tag){case 1:if(st=dt.payload,typeof st=="function"){K=st.call(Ut,K,G);break t}K=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=dt.payload,G=typeof st=="function"?st.call(Ut,K,G):st,G==null)break t;K=y({},K,G);break t;case 2:En=!0}}G=x.callback,G!==null&&(e.flags|=64,q&&(e.flags|=8192),q=f.callbacks,q===null?f.callbacks=[G]:q.push(G))}else q={lane:G,tag:x.tag,payload:x.payload,callback:x.callback,next:null},X===null?(U=X=q,O=K):X=X.next=q,A|=G;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;q=x,x=q.next,q.next=null,f.lastBaseUpdate=q,f.shared.pending=null}}while(!0);X===null&&(O=K),f.baseState=O,f.firstBaseUpdate=U,f.lastBaseUpdate=X,p===null&&(f.shared.lanes=0),Dn|=A,e.lanes=A,e.memoizedState=K}}function ff(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function gf(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ff(a[e],n)}var qs=P(null),vo=P(0);function pf(e,n){e=nn,Q(vo,e),Q(qs,n),nn=e|n.baseLanes}function Lc(){Q(vo,nn),Q(qs,qs.current)}function Oc(){nn=vo.current,V(qs),V(vo)}var Qe=P(null),di=null;function Tn(e){var n=e.alternate;Q(ne,ne.current&1),Q(Qe,e),di===null&&(n===null||qs.current!==null||n.memoizedState!==null)&&(di=e)}function Nc(e){Q(ne,ne.current),Q(Qe,e),di===null&&(di=e)}function mf(e){e.tag===22?(Q(ne,ne.current),Q(Qe,e),di===null&&(di=e)):Cn()}function Cn(){Q(ne,ne.current),Q(Qe,Qe.current)}function Ze(e){V(Qe),di===e&&(di=null),V(ne)}var ne=P(0);function Ao(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Hu(a)||Fu(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var $i=0,vt=null,Ht=null,ue=null,So=!1,Vs=!1,as=!1,wo=0,ja=0,Ys=null,fb=0;function ee(){throw Error(s(321))}function Pc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!We(e[a],n[a]))return!1;return!0}function kc(e,n,a,l,f,p){return $i=p,vt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,k.H=e===null||e.memoizedState===null?Jf:Kc,as=!1,p=a(l,f),as=!1,Vs&&(p=bf(n,a,l,f)),yf(e),p}function yf(e){k.H=Ya;var n=Ht!==null&&Ht.next!==null;if($i=0,ue=Ht=vt=null,So=!1,ja=0,Ys=null,n)throw Error(s(300));e===null||he||(e=e.dependencies,e!==null&&ho(e)&&(he=!0))}function bf(e,n,a,l){vt=e;var f=0;do{if(Vs&&(Ys=null),ja=0,Vs=!1,25<=f)throw Error(s(301));if(f+=1,ue=Ht=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}k.H=tg,p=n(a,l)}while(Vs);return p}function gb(){var e=k.H,n=e.useState()[0];return n=typeof n.then=="function"?qa(n):n,e=e.useState()[0],(Ht!==null?Ht.memoizedState:null)!==e&&(vt.flags|=1024),n}function zc(){var e=wo!==0;return wo=0,e}function Bc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function Ic(e){if(So){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}So=!1}$i=0,ue=Ht=vt=null,Vs=!1,ja=wo=0,Ys=null}function Oe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ue===null?vt.memoizedState=ue=e:ue=ue.next=e,ue}function se(){if(Ht===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=Ht.next;var n=ue===null?vt.memoizedState:ue.next;if(n!==null)ue=n,Ht=e;else{if(e===null)throw vt.alternate===null?Error(s(467)):Error(s(310));Ht=e,e={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},ue===null?vt.memoizedState=ue=e:ue=ue.next=e}return ue}function Eo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qa(e){var n=ja;return ja+=1,Ys===null&&(Ys=[]),e=lf(Ys,e,n),n=vt,(ue===null?n.memoizedState:ue.next)===null&&(n=n.alternate,k.H=n===null||n.memoizedState===null?Jf:Kc),e}function _o(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qa(e);if(e.$$typeof===D)return Ee(e)}throw Error(s(438,String(e)))}function Hc(e){var n=null,a=vt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=vt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Eo(),vt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),l=0;l<e;l++)a[l]=Y;return n.index++,a}function Wi(e,n){return typeof n=="function"?n(e):n}function xo(e){var n=se();return Fc(n,Ht,e)}function Fc(e,n,a){var l=e.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=e.baseQueue,p=l.pending;if(p!==null){if(f!==null){var A=f.next;f.next=p.next,p.next=A}n.baseQueue=f=p,l.pending=null}if(p=e.baseState,f===null)e.memoizedState=p;else{n=f.next;var x=A=null,O=null,U=n,X=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(Tt&K)===K:($i&K)===K){var G=U.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Fs&&(X=!0);else if(($i&G)===G){U=U.next,G===Fs&&(X=!0);continue}else K={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},O===null?(x=O=K,A=p):O=O.next=K,vt.lanes|=G,Dn|=G;K=U.action,as&&a(p,K),p=U.hasEagerState?U.eagerState:a(p,K)}else G={lane:K,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},O===null?(x=O=G,A=p):O=O.next=G,vt.lanes|=K,Dn|=K;U=U.next}while(U!==null&&U!==n);if(O===null?A=p:O.next=x,!We(p,e.memoizedState)&&(he=!0,X&&(a=Us,a!==null)))throw a;e.memoizedState=p,e.baseState=A,e.baseQueue=O,l.lastRenderedState=p}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Uc(e){var n=se(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,p=n.memoizedState;if(f!==null){a.pending=null;var A=f=f.next;do p=e(p,A.action),A=A.next;while(A!==f);We(p,n.memoizedState)||(he=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),a.lastRenderedState=p}return[p,l]}function vf(e,n,a){var l=vt,f=se(),p=Mt;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=n();var A=!We((Ht||f).memoizedState,a);if(A&&(f.memoizedState=a,he=!0),f=f.queue,qc(wf.bind(null,l,f,e),[e]),f.getSnapshot!==n||A||ue!==null&&ue.memoizedState.tag&1){if(l.flags|=2048,Xs(9,{destroy:void 0},Sf.bind(null,l,f,a,n),null),jt===null)throw Error(s(349));p||($i&127)!==0||Af(l,n,a)}return a}function Af(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=vt.updateQueue,n===null?(n=Eo(),vt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Sf(e,n,a,l){n.value=a,n.getSnapshot=l,Ef(n)&&_f(e)}function wf(e,n,a){return a(function(){Ef(n)&&_f(e)})}function Ef(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!We(e,a)}catch{return!0}}function _f(e){var n=Kn(e,2);n!==null&&Ge(n,e,2)}function Gc(e){var n=Oe();if(typeof e=="function"){var a=e;if(e=a(),as){mn(!0);try{a()}finally{mn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:e},n}function xf(e,n,a,l){return e.baseState=a,Fc(e,Ht,typeof l=="function"?l:Wi)}function pb(e,n,a,l,f){if(Ro(e))throw Error(s(485));if(e=n.action,e!==null){var p={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){p.listeners.push(A)}};k.T!==null?a(!0):p.isTransition=!1,l(p),a=n.pending,a===null?(p.next=n.pending=p,Tf(n,p)):(p.next=a.next,n.pending=a.next=p)}}function Tf(e,n){var a=n.action,l=n.payload,f=e.state;if(n.isTransition){var p=k.T,A={};k.T=A;try{var x=a(f,l),O=k.S;O!==null&&O(A,x),Cf(e,n,x)}catch(U){jc(e,n,U)}finally{p!==null&&A.types!==null&&(p.types=A.types),k.T=p}}else try{p=a(f,l),Cf(e,n,p)}catch(U){jc(e,n,U)}}function Cf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Rf(e,n,l)},function(l){return jc(e,n,l)}):Rf(e,n,a)}function Rf(e,n,a){n.status="fulfilled",n.value=a,Mf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Tf(e,a)))}function jc(e,n,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Mf(n),n=n.next;while(n!==l)}e.action=null}function Mf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Df(e,n){return n}function Lf(e,n){if(Mt){var a=jt.formState;if(a!==null){t:{var l=vt;if(Mt){if(Yt){e:{for(var f=Yt,p=hi;f.nodeType!==8;){if(!p){f=null;break e}if(f=fi(f.nextSibling),f===null){f=null;break e}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Yt=fi(f.nextSibling),l=f.data==="F!";break t}}Sn(l)}l=!1}l&&(n=a[0])}}return a=Oe(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Df,lastRenderedState:n},a.queue=l,a=Kf.bind(null,vt,l),l.dispatch=a,l=Gc(!1),p=Wc.bind(null,vt,!1,l.queue),l=Oe(),f={state:n,dispatch:null,action:e,pending:null},l.queue=f,a=pb.bind(null,vt,f,p,a),f.dispatch=a,l.memoizedState=e,[n,a,!1]}function Of(e){var n=se();return Nf(n,Ht,e)}function Nf(e,n,a){if(n=Fc(e,n,Df)[0],e=xo(Wi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=qa(n)}catch(A){throw A===Gs?po:A}else l=n;n=se();var f=n.queue,p=f.dispatch;return a!==n.memoizedState&&(vt.flags|=2048,Xs(9,{destroy:void 0},mb.bind(null,f,a),null)),[l,p,e]}function mb(e,n){e.action=n}function Pf(e){var n=se(),a=Ht;if(a!==null)return Nf(n,a,e);se(),n=n.memoizedState,a=se();var l=a.queue.dispatch;return a.memoizedState=e,[n,l,!1]}function Xs(e,n,a,l){return e={tag:e,create:a,deps:l,inst:n,next:null},n=vt.updateQueue,n===null&&(n=Eo(),vt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,n.lastEffect=e),e}function kf(){return se().memoizedState}function To(e,n,a,l){var f=Oe();vt.flags|=e,f.memoizedState=Xs(1|n,{destroy:void 0},a,l===void 0?null:l)}function Co(e,n,a,l){var f=se();l=l===void 0?null:l;var p=f.memoizedState.inst;Ht!==null&&l!==null&&Pc(l,Ht.memoizedState.deps)?f.memoizedState=Xs(n,p,a,l):(vt.flags|=e,f.memoizedState=Xs(1|n,p,a,l))}function zf(e,n){To(8390656,8,e,n)}function qc(e,n){Co(2048,8,e,n)}function yb(e){vt.flags|=4;var n=vt.updateQueue;if(n===null)n=Eo(),vt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Bf(e){var n=se().memoizedState;return yb({ref:n,nextImpl:e}),function(){if((kt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function If(e,n){return Co(4,2,e,n)}function Hf(e,n){return Co(4,4,e,n)}function Ff(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Uf(e,n,a){a=a!=null?a.concat([e]):null,Co(4,4,Ff.bind(null,n,e),a)}function Vc(){}function Gf(e,n){var a=se();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Pc(n,l[1])?l[0]:(a.memoizedState=[e,n],e)}function jf(e,n){var a=se();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Pc(n,l[1]))return l[0];if(l=e(),as){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[l,n],l}function Yc(e,n,a){return a===void 0||($i&1073741824)!==0&&(Tt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=qg(),vt.lanes|=e,Dn|=e,a)}function qf(e,n,a,l){return We(a,n)?a:qs.current!==null?(e=Yc(e,a,l),We(e,n)||(he=!0),e):($i&42)===0||($i&1073741824)!==0&&(Tt&261930)===0?(he=!0,e.memoizedState=a):(e=qg(),vt.lanes|=e,Dn|=e,n)}function Vf(e,n,a,l,f){var p=j.p;j.p=p!==0&&8>p?p:8;var A=k.T,x={};k.T=x,Wc(e,!1,n,a);try{var O=f(),U=k.S;if(U!==null&&U(x,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=db(O,l);Va(e,n,X,ei(e))}else Va(e,n,l,ei(e))}catch(K){Va(e,n,{then:function(){},status:"rejected",reason:K},ei())}finally{j.p=p,A!==null&&x.types!==null&&(A.types=x.types),k.T=A}}function bb(){}function Xc(e,n,a,l){if(e.tag!==5)throw Error(s(476));var f=Yf(e).queue;Vf(e,f,n,et,a===null?bb:function(){return Xf(e),a(l)})}function Yf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:et},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Xf(e){var n=Yf(e);n.next===null&&(n=e.alternate.memoizedState),Va(e,n.next.queue,{},ei())}function $c(){return Ee(lr)}function $f(){return se().memoizedState}function Wf(){return se().memoizedState}function vb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=ei();e=_n(a);var l=xn(n,e,a);l!==null&&(Ge(l,n,a),Fa(l,n,a)),n={cache:Ec()},e.payload=n;return}n=n.return}}function Ab(e,n,a){var l=ei();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ro(e)?Qf(n,a):(a=dc(e,n,a,l),a!==null&&(Ge(a,e,l),Zf(a,n,l)))}function Kf(e,n,a){var l=ei();Va(e,n,a,l)}function Va(e,n,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ro(e))Qf(n,f);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var A=n.lastRenderedState,x=p(A,a);if(f.hasEagerState=!0,f.eagerState=x,We(x,A))return oo(e,n,f,0),jt===null&&ro(),!1}catch{}finally{}if(a=dc(e,n,f,l),a!==null)return Ge(a,e,l),Zf(a,n,l),!0}return!1}function Wc(e,n,a,l){if(l={lane:2,revertLane:Cu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ro(e)){if(n)throw Error(s(479))}else n=dc(e,a,l,2),n!==null&&Ge(n,e,2)}function Ro(e){var n=e.alternate;return e===vt||n!==null&&n===vt}function Qf(e,n){Vs=So=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function Zf(e,n,a){if((a&4194048)!==0){var l=n.lanes;l&=e.pendingLanes,a|=l,n.lanes=a,id(e,a)}}var Ya={readContext:Ee,use:_o,useCallback:ee,useContext:ee,useEffect:ee,useImperativeHandle:ee,useLayoutEffect:ee,useInsertionEffect:ee,useMemo:ee,useReducer:ee,useRef:ee,useState:ee,useDebugValue:ee,useDeferredValue:ee,useTransition:ee,useSyncExternalStore:ee,useId:ee,useHostTransitionStatus:ee,useFormState:ee,useActionState:ee,useOptimistic:ee,useMemoCache:ee,useCacheRefresh:ee};Ya.useEffectEvent=ee;var Jf={readContext:Ee,use:_o,useCallback:function(e,n){return Oe().memoizedState=[e,n===void 0?null:n],e},useContext:Ee,useEffect:zf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,To(4194308,4,Ff.bind(null,n,e),a)},useLayoutEffect:function(e,n){return To(4194308,4,e,n)},useInsertionEffect:function(e,n){To(4,2,e,n)},useMemo:function(e,n){var a=Oe();n=n===void 0?null:n;var l=e();if(as){mn(!0);try{e()}finally{mn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(e,n,a){var l=Oe();if(a!==void 0){var f=a(n);if(as){mn(!0);try{a(n)}finally{mn(!1)}}}else f=n;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Ab.bind(null,vt,e),[l.memoizedState,e]},useRef:function(e){var n=Oe();return e={current:e},n.memoizedState=e},useState:function(e){e=Gc(e);var n=e.queue,a=Kf.bind(null,vt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Vc,useDeferredValue:function(e,n){var a=Oe();return Yc(a,e,n)},useTransition:function(){var e=Gc(!1);return e=Vf.bind(null,vt,e.queue,!0,!1),Oe().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var l=vt,f=Oe();if(Mt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),jt===null)throw Error(s(349));(Tt&127)!==0||Af(l,n,a)}f.memoizedState=a;var p={value:a,getSnapshot:n};return f.queue=p,zf(wf.bind(null,l,p,e),[e]),l.flags|=2048,Xs(9,{destroy:void 0},Sf.bind(null,l,p,a,n),null),a},useId:function(){var e=Oe(),n=jt.identifierPrefix;if(Mt){var a=Ri,l=Ci;a=(l&~(1<<32-$e(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=wo++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=fb++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:$c,useFormState:Lf,useActionState:Lf,useOptimistic:function(e){var n=Oe();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Wc.bind(null,vt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Hc,useCacheRefresh:function(){return Oe().memoizedState=vb.bind(null,vt)},useEffectEvent:function(e){var n=Oe(),a={impl:e};return n.memoizedState=a,function(){if((kt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Kc={readContext:Ee,use:_o,useCallback:Gf,useContext:Ee,useEffect:qc,useImperativeHandle:Uf,useInsertionEffect:If,useLayoutEffect:Hf,useMemo:jf,useReducer:xo,useRef:kf,useState:function(){return xo(Wi)},useDebugValue:Vc,useDeferredValue:function(e,n){var a=se();return qf(a,Ht.memoizedState,e,n)},useTransition:function(){var e=xo(Wi)[0],n=se().memoizedState;return[typeof e=="boolean"?e:qa(e),n]},useSyncExternalStore:vf,useId:$f,useHostTransitionStatus:$c,useFormState:Of,useActionState:Of,useOptimistic:function(e,n){var a=se();return xf(a,Ht,e,n)},useMemoCache:Hc,useCacheRefresh:Wf};Kc.useEffectEvent=Bf;var tg={readContext:Ee,use:_o,useCallback:Gf,useContext:Ee,useEffect:qc,useImperativeHandle:Uf,useInsertionEffect:If,useLayoutEffect:Hf,useMemo:jf,useReducer:Uc,useRef:kf,useState:function(){return Uc(Wi)},useDebugValue:Vc,useDeferredValue:function(e,n){var a=se();return Ht===null?Yc(a,e,n):qf(a,Ht.memoizedState,e,n)},useTransition:function(){var e=Uc(Wi)[0],n=se().memoizedState;return[typeof e=="boolean"?e:qa(e),n]},useSyncExternalStore:vf,useId:$f,useHostTransitionStatus:$c,useFormState:Pf,useActionState:Pf,useOptimistic:function(e,n){var a=se();return Ht!==null?xf(a,Ht,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Hc,useCacheRefresh:Wf};tg.useEffectEvent=Bf;function Qc(e,n,a,l){n=e.memoizedState,a=a(l,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Zc={enqueueSetState:function(e,n,a){e=e._reactInternals;var l=ei(),f=_n(l);f.payload=n,a!=null&&(f.callback=a),n=xn(e,f,l),n!==null&&(Ge(n,e,l),Fa(n,e,l))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var l=ei(),f=_n(l);f.tag=1,f.payload=n,a!=null&&(f.callback=a),n=xn(e,f,l),n!==null&&(Ge(n,e,l),Fa(n,e,l))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=ei(),l=_n(a);l.tag=2,n!=null&&(l.callback=n),n=xn(e,l,a),n!==null&&(Ge(n,e,a),Fa(n,e,a))}};function eg(e,n,a,l,f,p,A){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,p,A):n.prototype&&n.prototype.isPureReactComponent?!Oa(a,l)||!Oa(f,p):!0}function ig(e,n,a,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==e&&Zc.enqueueReplaceState(n,n.state,null)}function rs(e,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function ng(e){ao(e)}function sg(e){console.error(e)}function ag(e){ao(e)}function Mo(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function rg(e,n,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Jc(e,n,a){return a=_n(a),a.tag=3,a.payload={element:null},a.callback=function(){Mo(e,n)},a}function og(e){return e=_n(e),e.tag=3,e}function lg(e,n,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;e.payload=function(){return f(p)},e.callback=function(){rg(n,a,l)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(e.callback=function(){rg(n,a,l),typeof f!="function"&&(Ln===null?Ln=new Set([this]):Ln.add(this));var x=l.stack;this.componentDidCatch(l.value,{componentStack:x!==null?x:""})})}function Sb(e,n,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Hs(n,a,f,!0),a=Qe.current,a!==null){switch(a.tag){case 31:case 13:return di===null?Uo():a.alternate===null&&ie===0&&(ie=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===mo?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),_u(e,l,f)),!1;case 22:return a.flags|=65536,l===mo?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),_u(e,l,f)),!1}throw Error(s(435,a.tag))}return _u(e,l,f),Uo(),!1}if(Mt)return n=Qe.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==bc&&(e=Error(s(422),{cause:l}),ka(li(e,a)))):(l!==bc&&(n=Error(s(423),{cause:l}),ka(li(n,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=li(l,a),f=Jc(e.stateNode,l,f),Mc(e,f),ie!==4&&(ie=2)),!1;var p=Error(s(520),{cause:l});if(p=li(p,a),tr===null?tr=[p]:tr.push(p),ie!==4&&(ie=2),n===null)return!0;l=li(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Jc(a.stateNode,l,e),Mc(a,e),!1;case 1:if(n=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ln===null||!Ln.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=og(f),lg(f,e,a,l),Mc(a,f),!1}a=a.return}while(a!==null);return!1}var tu=Error(s(461)),he=!1;function _e(e,n,a,l){n.child=e===null?df(n,null,a,l):ss(n,e.child,a,l)}function cg(e,n,a,l,f){a=a.render;var p=n.ref;if("ref"in l){var A={};for(var x in l)x!=="ref"&&(A[x]=l[x])}else A=l;return ts(n),l=kc(e,n,a,A,p,f),x=zc(),e!==null&&!he?(Bc(e,n,f),Ki(e,n,f)):(Mt&&x&&mc(n),n.flags|=1,_e(e,n,l,f),n.child)}function ug(e,n,a,l,f){if(e===null){var p=a.type;return typeof p=="function"&&!fc(p)&&p.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=p,hg(e,n,p,l,f)):(e=co(a.type,null,l,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(p=e.child,!lu(e,f)){var A=p.memoizedProps;if(a=a.compare,a=a!==null?a:Oa,a(A,l)&&e.ref===n.ref)return Ki(e,n,f)}return n.flags|=1,e=qi(p,l),e.ref=n.ref,e.return=n,n.child=e}function hg(e,n,a,l,f){if(e!==null){var p=e.memoizedProps;if(Oa(p,l)&&e.ref===n.ref)if(he=!1,n.pendingProps=l=p,lu(e,f))(e.flags&131072)!==0&&(he=!0);else return n.lanes=e.lanes,Ki(e,n,f)}return eu(e,n,a,l,f)}function dg(e,n,a,l){var f=l.children,p=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,e!==null){for(l=n.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,n.child=null;return fg(e,n,p,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&go(n,p!==null?p.cachePool:null),p!==null?pf(n,p):Lc(),mf(n);else return l=n.lanes=536870912,fg(e,n,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(go(n,p.cachePool),pf(n,p),Cn(),n.memoizedState=null):(e!==null&&go(n,null),Lc(),Cn());return _e(e,n,f,a),n.child}function Xa(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function fg(e,n,a,l,f){var p=xc();return p=p===null?null:{parent:ce._currentValue,pool:p},n.memoizedState={baseLanes:a,cachePool:p},e!==null&&go(n,null),Lc(),mf(n),e!==null&&Hs(e,n,l,!0),n.childLanes=f,null}function Do(e,n){return n=Oo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function gg(e,n,a){return ss(n,e.child,null,a),e=Do(n,n.pendingProps),e.flags|=2,Ze(n),n.memoizedState=null,e}function wb(e,n,a){var l=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Mt){if(l.mode==="hidden")return e=Do(n,l),n.lanes=536870912,Xa(null,e);if(Nc(n),(e=Yt)?(e=Tp(e,hi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:vn!==null?{id:Ci,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=Kd(e),a.return=n,n.child=a,we=n,Yt=null)):e=null,e===null)throw Sn(n);return n.lanes=536870912,null}return Do(n,l)}var p=e.memoizedState;if(p!==null){var A=p.dehydrated;if(Nc(n),f)if(n.flags&256)n.flags&=-257,n=gg(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(he||Hs(e,n,a,!1),f=(a&e.childLanes)!==0,he||f){if(l=jt,l!==null&&(A=nd(l,a),A!==0&&A!==p.retryLane))throw p.retryLane=A,Kn(e,A),Ge(l,e,A),tu;Uo(),n=gg(e,n,a)}else e=p.treeContext,Yt=fi(A.nextSibling),we=n,Mt=!0,An=null,hi=!1,e!==null&&Jd(n,e),n=Do(n,l),n.flags|=4096;return n}return e=qi(e.child,{mode:l.mode,children:l.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Lo(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function eu(e,n,a,l,f){return ts(n),a=kc(e,n,a,l,void 0,f),l=zc(),e!==null&&!he?(Bc(e,n,f),Ki(e,n,f)):(Mt&&l&&mc(n),n.flags|=1,_e(e,n,a,f),n.child)}function pg(e,n,a,l,f,p){return ts(n),n.updateQueue=null,a=bf(n,l,a,f),yf(e),l=zc(),e!==null&&!he?(Bc(e,n,p),Ki(e,n,p)):(Mt&&l&&mc(n),n.flags|=1,_e(e,n,a,p),n.child)}function mg(e,n,a,l,f){if(ts(n),n.stateNode===null){var p=ks,A=a.contextType;typeof A=="object"&&A!==null&&(p=Ee(A)),p=new a(l,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Zc,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=l,p.state=n.memoizedState,p.refs={},Cc(n),A=a.contextType,p.context=typeof A=="object"&&A!==null?Ee(A):ks,p.state=n.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Qc(n,a,A,l),p.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(A=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),A!==p.state&&Zc.enqueueReplaceState(p,p.state,null),Ga(n,l,p,f),Ua(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(e===null){p=n.stateNode;var x=n.memoizedProps,O=rs(a,x);p.props=O;var U=p.context,X=a.contextType;A=ks,typeof X=="object"&&X!==null&&(A=Ee(X));var K=a.getDerivedStateFromProps;X=typeof K=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=n.pendingProps!==x,X||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||U!==A)&&ig(n,p,l,A),En=!1;var G=n.memoizedState;p.state=G,Ga(n,l,p,f),Ua(),U=n.memoizedState,x||G!==U||En?(typeof K=="function"&&(Qc(n,a,K,l),U=n.memoizedState),(O=En||eg(n,a,O,l,G,U,A))?(X||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=U),p.props=l,p.state=U,p.context=A,l=O):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{p=n.stateNode,Rc(e,n),A=n.memoizedProps,X=rs(a,A),p.props=X,K=n.pendingProps,G=p.context,U=a.contextType,O=ks,typeof U=="object"&&U!==null&&(O=Ee(U)),x=a.getDerivedStateFromProps,(U=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A!==K||G!==O)&&ig(n,p,l,O),En=!1,G=n.memoizedState,p.state=G,Ga(n,l,p,f),Ua();var q=n.memoizedState;A!==K||G!==q||En||e!==null&&e.dependencies!==null&&ho(e.dependencies)?(typeof x=="function"&&(Qc(n,a,x,l),q=n.memoizedState),(X=En||eg(n,a,X,l,G,q,O)||e!==null&&e.dependencies!==null&&ho(e.dependencies))?(U||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,q,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,q,O)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||A===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=q),p.props=l,p.state=q,p.context=O,l=X):(typeof p.componentDidUpdate!="function"||A===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||A===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),l=!1)}return p=l,Lo(e,n),l=(n.flags&128)!==0,p||l?(p=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,e!==null&&l?(n.child=ss(n,e.child,null,f),n.child=ss(n,null,a,f)):_e(e,n,a,f),n.memoizedState=p.state,e=n.child):e=Ki(e,n,f),e}function yg(e,n,a,l){return Zn(),n.flags|=256,_e(e,n,a,l),n.child}var iu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nu(e){return{baseLanes:e,cachePool:rf()}}function su(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=ti),e}function bg(e,n,a){var l=n.pendingProps,f=!1,p=(n.flags&128)!==0,A;if((A=p)||(A=e!==null&&e.memoizedState===null?!1:(ne.current&2)!==0),A&&(f=!0,n.flags&=-129),A=(n.flags&32)!==0,n.flags&=-33,e===null){if(Mt){if(f?Tn(n):Cn(),(e=Yt)?(e=Tp(e,hi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:vn!==null?{id:Ci,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=Kd(e),a.return=n,n.child=a,we=n,Yt=null)):e=null,e===null)throw Sn(n);return Fu(e)?n.lanes=32:n.lanes=536870912,null}var x=l.children;return l=l.fallback,f?(Cn(),f=n.mode,x=Oo({mode:"hidden",children:x},f),l=Qn(l,f,a,null),x.return=n,l.return=n,x.sibling=l,n.child=x,l=n.child,l.memoizedState=nu(a),l.childLanes=su(e,A,a),n.memoizedState=iu,Xa(null,l)):(Tn(n),au(n,x))}var O=e.memoizedState;if(O!==null&&(x=O.dehydrated,x!==null)){if(p)n.flags&256?(Tn(n),n.flags&=-257,n=ru(e,n,a)):n.memoizedState!==null?(Cn(),n.child=e.child,n.flags|=128,n=null):(Cn(),x=l.fallback,f=n.mode,l=Oo({mode:"visible",children:l.children},f),x=Qn(x,f,a,null),x.flags|=2,l.return=n,x.return=n,l.sibling=x,n.child=l,ss(n,e.child,null,a),l=n.child,l.memoizedState=nu(a),l.childLanes=su(e,A,a),n.memoizedState=iu,n=Xa(null,l));else if(Tn(n),Fu(x)){if(A=x.nextSibling&&x.nextSibling.dataset,A)var U=A.dgst;A=U,l=Error(s(419)),l.stack="",l.digest=A,ka({value:l,source:null,stack:null}),n=ru(e,n,a)}else if(he||Hs(e,n,a,!1),A=(a&e.childLanes)!==0,he||A){if(A=jt,A!==null&&(l=nd(A,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Kn(e,l),Ge(A,e,l),tu;Hu(x)||Uo(),n=ru(e,n,a)}else Hu(x)?(n.flags|=192,n.child=e.child,n=null):(e=O.treeContext,Yt=fi(x.nextSibling),we=n,Mt=!0,An=null,hi=!1,e!==null&&Jd(n,e),n=au(n,l.children),n.flags|=4096);return n}return f?(Cn(),x=l.fallback,f=n.mode,O=e.child,U=O.sibling,l=qi(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,U!==null?x=qi(U,x):(x=Qn(x,f,a,null),x.flags|=2),x.return=n,l.return=n,l.sibling=x,n.child=l,Xa(null,l),l=n.child,x=e.child.memoizedState,x===null?x=nu(a):(f=x.cachePool,f!==null?(O=ce._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=rf(),x={baseLanes:x.baseLanes|a,cachePool:f}),l.memoizedState=x,l.childLanes=su(e,A,a),n.memoizedState=iu,Xa(e.child,l)):(Tn(n),a=e.child,e=a.sibling,a=qi(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,e!==null&&(A=n.deletions,A===null?(n.deletions=[e],n.flags|=16):A.push(e)),n.child=a,n.memoizedState=null,a)}function au(e,n){return n=Oo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Oo(e,n){return e=Ke(22,e,null,n),e.lanes=0,e}function ru(e,n,a){return ss(n,e.child,null,a),e=au(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function vg(e,n,a){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),Sc(e.return,n,a)}function ou(e,n,a,l,f,p){var A=e.memoizedState;A===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:p}:(A.isBackwards=n,A.rendering=null,A.renderingStartTime=0,A.last=l,A.tail=a,A.tailMode=f,A.treeForkCount=p)}function Ag(e,n,a){var l=n.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var A=ne.current,x=(A&2)!==0;if(x?(A=A&1|2,n.flags|=128):A&=1,Q(ne,A),_e(e,n,l,a),l=Mt?Pa:0,!x&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vg(e,a,n);else if(e.tag===19)vg(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=n.child,f=null;a!==null;)e=a.alternate,e!==null&&Ao(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=n.child,n.child=null):(f=a.sibling,a.sibling=null),ou(n,!1,f,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&Ao(e)===null){n.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}ou(n,!0,a,null,p,l);break;case"together":ou(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Ki(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Dn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Hs(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=qi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=qi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function lu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ho(e)))}function Eb(e,n,a){switch(n.tag){case 3:Vt(n,n.stateNode.containerInfo),wn(n,ce,e.memoizedState.cache),Zn();break;case 27:case 5:zt(n);break;case 4:Vt(n,n.stateNode.containerInfo);break;case 10:wn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Nc(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Tn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?bg(e,n,a):(Tn(n),e=Ki(e,n,a),e!==null?e.sibling:null);Tn(n);break;case 19:var f=(e.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Hs(e,n,a,!1),l=(a&n.childLanes)!==0),f){if(l)return Ag(e,n,a);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Q(ne,ne.current),l)break;return null;case 22:return n.lanes=0,dg(e,n,a,n.pendingProps);case 24:wn(n,ce,e.memoizedState.cache)}return Ki(e,n,a)}function Sg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)he=!0;else{if(!lu(e,a)&&(n.flags&128)===0)return he=!1,Eb(e,n,a);he=(e.flags&131072)!==0}else he=!1,Mt&&(n.flags&1048576)!==0&&Zd(n,Pa,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(e=is(n.elementType),n.type=e,typeof e=="function")fc(e)?(l=rs(e,l),n.tag=1,n=mg(null,n,e,l,a)):(n.tag=0,n=eu(null,n,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===b){n.tag=11,n=cg(null,n,e,l,a);break t}else if(f===M){n.tag=14,n=ug(null,n,e,l,a);break t}}throw n=tt(e)||e,Error(s(306,n,""))}}return n;case 0:return eu(e,n,n.type,n.pendingProps,a);case 1:return l=n.type,f=rs(l,n.pendingProps),mg(e,n,l,f,a);case 3:t:{if(Vt(n,n.stateNode.containerInfo),e===null)throw Error(s(387));l=n.pendingProps;var p=n.memoizedState;f=p.element,Rc(e,n),Ga(n,l,null,a);var A=n.memoizedState;if(l=A.cache,wn(n,ce,l),l!==p.cache&&wc(n,[ce],a,!0),Ua(),l=A.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:A.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=yg(e,n,l,a);break t}else if(l!==f){f=li(Error(s(424)),n),ka(f),n=yg(e,n,l,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Yt=fi(e.firstChild),we=n,Mt=!0,An=null,hi=!0,a=df(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Zn(),l===f){n=Ki(e,n,a);break t}_e(e,n,l,a)}n=n.child}return n;case 26:return Lo(e,n),e===null?(a=Op(n.type,null,n.pendingProps,null))?n.memoizedState=a:Mt||(a=n.type,e=n.pendingProps,l=$o(ut.current).createElement(a),l[Se]=n,l[ze]=e,xe(l,a,e),ye(l),n.stateNode=l):n.memoizedState=Op(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return zt(n),e===null&&Mt&&(l=n.stateNode=Mp(n.type,n.pendingProps,ut.current),we=n,hi=!0,f=Yt,kn(n.type)?(Uu=f,Yt=fi(l.firstChild)):Yt=f),_e(e,n,n.pendingProps.children,a),Lo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Mt&&((f=l=Yt)&&(l=Jb(l,n.type,n.pendingProps,hi),l!==null?(n.stateNode=l,we=n,Yt=fi(l.firstChild),hi=!1,f=!0):f=!1),f||Sn(n)),zt(n),f=n.type,p=n.pendingProps,A=e!==null?e.memoizedProps:null,l=p.children,zu(f,p)?l=null:A!==null&&zu(f,A)&&(n.flags|=32),n.memoizedState!==null&&(f=kc(e,n,gb,null,null,a),lr._currentValue=f),Lo(e,n),_e(e,n,l,a),n.child;case 6:return e===null&&Mt&&((e=a=Yt)&&(a=tv(a,n.pendingProps,hi),a!==null?(n.stateNode=a,we=n,Yt=null,e=!0):e=!1),e||Sn(n)),null;case 13:return bg(e,n,a);case 4:return Vt(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=ss(n,null,l,a):_e(e,n,l,a),n.child;case 11:return cg(e,n,n.type,n.pendingProps,a);case 7:return _e(e,n,n.pendingProps,a),n.child;case 8:return _e(e,n,n.pendingProps.children,a),n.child;case 12:return _e(e,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,wn(n,n.type,l.value),_e(e,n,l.children,a),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,ts(n),f=Ee(f),l=l(f),n.flags|=1,_e(e,n,l,a),n.child;case 14:return ug(e,n,n.type,n.pendingProps,a);case 15:return hg(e,n,n.type,n.pendingProps,a);case 19:return Ag(e,n,a);case 31:return wb(e,n,a);case 22:return dg(e,n,a,n.pendingProps);case 24:return ts(n),l=Ee(ce),e===null?(f=xc(),f===null&&(f=jt,p=Ec(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),n.memoizedState={parent:l,cache:f},Cc(n),wn(n,ce,f)):((e.lanes&a)!==0&&(Rc(e,n),Ga(n,null,null,a),Ua()),f=e.memoizedState,p=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),wn(n,ce,l)):(l=p.cache,wn(n,ce,l),l!==f.cache&&wc(n,[ce],a,!0))),_e(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Qi(e){e.flags|=4}function cu(e,n,a,l,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if($g())e.flags|=8192;else throw ns=mo,Tc}else e.flags&=-16777217}function wg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Bp(n))if($g())e.flags|=8192;else throw ns=mo,Tc}function No(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?td():536870912,e.lanes|=n,Qs|=n)}function $a(e,n){if(!Mt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Xt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(n)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,n}function _b(e,n,a){var l=n.pendingProps;switch(yc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(n),null;case 1:return Xt(n),null;case 3:return a=n.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Xi(ce),Lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Is(n)?Qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,vc())),Xt(n),null;case 26:var f=n.type,p=n.memoizedState;return e===null?(Qi(n),p!==null?(Xt(n),wg(n,p)):(Xt(n),cu(n,f,null,l,a))):p?p!==e.memoizedState?(Qi(n),Xt(n),wg(n,p)):(Xt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==l&&Qi(n),Xt(n),cu(n,f,e,l,a)),null;case 27:if(ke(n),a=ut.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Qi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Xt(n),null}e=Z.current,Is(n)?tf(n):(e=Mp(f,l,a),n.stateNode=e,Qi(n))}return Xt(n),null;case 5:if(ke(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==l&&Qi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Xt(n),null}if(p=Z.current,Is(n))tf(n);else{var A=$o(ut.current);switch(p){case 1:p=A.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=A.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=A.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=A.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=A.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?A.createElement("select",{is:l.is}):A.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?A.createElement(f,{is:l.is}):A.createElement(f)}}p[Se]=n,p[ze]=l;t:for(A=n.child;A!==null;){if(A.tag===5||A.tag===6)p.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===n)break t;for(;A.sibling===null;){if(A.return===null||A.return===n)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}n.stateNode=p;t:switch(xe(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Qi(n)}}return Xt(n),cu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==l&&Qi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(e=ut.current,Is(n)){if(e=n.stateNode,a=n.memoizedProps,l=null,f=we,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Se]=n,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||bp(e.nodeValue,a)),e||Sn(n,!0)}else e=$o(e).createTextNode(l),e[Se]=n,n.stateNode=e}return Xt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(l=Is(n),a!==null){if(e===null){if(!l)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Se]=n}else Zn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xt(n),e=!1}else a=vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ze(n),n):(Ze(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Xt(n),null;case 13:if(l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Is(n),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Se]=n}else Zn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Xt(n),f=!1}else f=vc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Ze(n),n):(Ze(n),null)}return Ze(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),No(n,n.updateQueue),Xt(n),null);case 4:return Lt(),e===null&&Lu(n.stateNode.containerInfo),Xt(n),null;case 10:return Xi(n.type),Xt(n),null;case 19:if(V(ne),l=n.memoizedState,l===null)return Xt(n),null;if(f=(n.flags&128)!==0,p=l.rendering,p===null)if(f)$a(l,!1);else{if(ie!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(p=Ao(e),p!==null){for(n.flags|=128,$a(l,!1),e=p.updateQueue,n.updateQueue=e,No(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Wd(a,e),a=a.sibling;return Q(ne,ne.current&1|2),Mt&&Vi(n,l.treeForkCount),n.child}e=e.sibling}l.tail!==null&&Le()>Io&&(n.flags|=128,f=!0,$a(l,!1),n.lanes=4194304)}else{if(!f)if(e=Ao(p),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,No(n,e),$a(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Mt)return Xt(n),null}else 2*Le()-l.renderingStartTime>Io&&a!==536870912&&(n.flags|=128,f=!0,$a(l,!1),n.lanes=4194304);l.isBackwards?(p.sibling=n.child,n.child=p):(e=l.last,e!==null?e.sibling=p:n.child=p,l.last=p)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Le(),e.sibling=null,a=ne.current,Q(ne,f?a&1|2:a&1),Mt&&Vi(n,l.treeForkCount),e):(Xt(n),null);case 22:case 23:return Ze(n),Oc(),l=n.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Xt(n),n.subtreeFlags&6&&(n.flags|=8192)):Xt(n),a=n.updateQueue,a!==null&&No(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),e!==null&&V(es),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Xi(ce),Xt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function xb(e,n){switch(yc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Xi(ce),Lt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return ke(n),null;case 31:if(n.memoizedState!==null){if(Ze(n),n.alternate===null)throw Error(s(340));Zn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ze(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Zn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return V(ne),null;case 4:return Lt(),null;case 10:return Xi(n.type),null;case 22:case 23:return Ze(n),Oc(),e!==null&&V(es),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Xi(ce),null;case 25:return null;default:return null}}function Eg(e,n){switch(yc(n),n.tag){case 3:Xi(ce),Lt();break;case 26:case 27:case 5:ke(n);break;case 4:Lt();break;case 31:n.memoizedState!==null&&Ze(n);break;case 13:Ze(n);break;case 19:V(ne);break;case 10:Xi(n.type);break;case 22:case 23:Ze(n),Oc(),e!==null&&V(es);break;case 24:Xi(ce)}}function Wa(e,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var p=a.create,A=a.inst;l=p(),A.destroy=l}a=a.next}while(a!==f)}}catch(x){It(n,n.return,x)}}function Rn(e,n,a){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&e)===e){var A=l.inst,x=A.destroy;if(x!==void 0){A.destroy=void 0,f=n;var O=a,U=x;try{U()}catch(X){It(f,O,X)}}}l=l.next}while(l!==p)}}catch(X){It(n,n.return,X)}}function _g(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{gf(n,a)}catch(l){It(e,e.return,l)}}}function xg(e,n,a){a.props=rs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){It(e,n,l)}}function Ka(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){It(e,n,f)}}function Mi(e,n){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){It(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){It(e,n,f)}else a.current=null}function Tg(e){var n=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){It(e,e.return,f)}}function uu(e,n,a){try{var l=e.stateNode;Xb(l,e.type,a,n),l[ze]=n}catch(f){It(e,e.return,f)}}function Cg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&kn(e.type)||e.tag===4}function hu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Cg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&kn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function du(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Gi));else if(l!==4&&(l===27&&kn(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(du(e,n,a),e=e.sibling;e!==null;)du(e,n,a),e=e.sibling}function Po(e,n,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(l!==4&&(l===27&&kn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Po(e,n,a),e=e.sibling;e!==null;)Po(e,n,a),e=e.sibling}function Rg(e){var n=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);xe(n,l,a),n[Se]=e,n[ze]=a}catch(p){It(e,e.return,p)}}var Zi=!1,de=!1,fu=!1,Mg=typeof WeakSet=="function"?WeakSet:Set,be=null;function Tb(e,n){if(e=e.containerInfo,Pu=el,e=Fd(e),rc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break t}var A=0,x=-1,O=-1,U=0,X=0,K=e,G=null;e:for(;;){for(var q;K!==a||f!==0&&K.nodeType!==3||(x=A+f),K!==p||l!==0&&K.nodeType!==3||(O=A+l),K.nodeType===3&&(A+=K.nodeValue.length),(q=K.firstChild)!==null;)G=K,K=q;for(;;){if(K===e)break e;if(G===a&&++U===f&&(x=A),G===p&&++X===l&&(O=A),(q=K.nextSibling)!==null)break;K=G,G=K.parentNode}K=q}a=x===-1||O===-1?null:{start:x,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(ku={focusedElem:e,selectionRange:a},el=!1,be=n;be!==null;)if(n=be,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,be=e;else for(;be!==null;){switch(n=be,p=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&p!==null){e=void 0,a=n,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var st=rs(a.type,f);e=l.getSnapshotBeforeUpdate(st,p),l.__reactInternalSnapshotBeforeUpdate=e}catch(dt){It(a,a.return,dt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)Iu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Iu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,be=e;break}be=n.return}}function Dg(e,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:tn(e,a),l&4&&Wa(5,a);break;case 1:if(tn(e,a),l&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(A){It(a,a.return,A)}else{var f=rs(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(A){It(a,a.return,A)}}l&64&&_g(a),l&512&&Ka(a,a.return);break;case 3:if(tn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{gf(e,n)}catch(A){It(a,a.return,A)}}break;case 27:n===null&&l&4&&Rg(a);case 26:case 5:tn(e,a),n===null&&l&4&&Tg(a),l&512&&Ka(a,a.return);break;case 12:tn(e,a);break;case 31:tn(e,a),l&4&&Ng(e,a);break;case 13:tn(e,a),l&4&&Pg(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=kb.bind(null,a),ev(e,a))));break;case 22:if(l=a.memoizedState!==null||Zi,!l){n=n!==null&&n.memoizedState!==null||de,f=Zi;var p=de;Zi=l,(de=n)&&!p?en(e,a,(a.subtreeFlags&8772)!==0):tn(e,a),Zi=f,de=p}break;case 30:break;default:tn(e,a)}}function Lg(e){var n=e.alternate;n!==null&&(e.alternate=null,Lg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&jl(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var $t=null,Ie=!1;function Ji(e,n,a){for(a=a.child;a!==null;)Og(e,n,a),a=a.sibling}function Og(e,n,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Aa,a)}catch{}switch(a.tag){case 26:de||Mi(a,n),Ji(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:de||Mi(a,n);var l=$t,f=Ie;kn(a.type)&&($t=a.stateNode,Ie=!1),Ji(e,n,a),ar(a.stateNode),$t=l,Ie=f;break;case 5:de||Mi(a,n);case 6:if(l=$t,f=Ie,$t=null,Ji(e,n,a),$t=l,Ie=f,$t!==null)if(Ie)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(a.stateNode)}catch(p){It(a,n,p)}else try{$t.removeChild(a.stateNode)}catch(p){It(a,n,p)}break;case 18:$t!==null&&(Ie?(e=$t,_p(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),aa(e)):_p($t,a.stateNode));break;case 4:l=$t,f=Ie,$t=a.stateNode.containerInfo,Ie=!0,Ji(e,n,a),$t=l,Ie=f;break;case 0:case 11:case 14:case 15:Rn(2,a,n),de||Rn(4,a,n),Ji(e,n,a);break;case 1:de||(Mi(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&xg(a,n,l)),Ji(e,n,a);break;case 21:Ji(e,n,a);break;case 22:de=(l=de)||a.memoizedState!==null,Ji(e,n,a),de=l;break;default:Ji(e,n,a)}}function Ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{aa(e)}catch(a){It(n,n.return,a)}}}function Pg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{aa(e)}catch(a){It(n,n.return,a)}}function Cb(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Mg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Mg),n;default:throw Error(s(435,e.tag))}}function ko(e,n){var a=Cb(e);n.forEach(function(l){if(!a.has(l)){a.add(l);var f=zb.bind(null,e,l);l.then(f,f)}})}function He(e,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=e,A=n,x=A;t:for(;x!==null;){switch(x.tag){case 27:if(kn(x.type)){$t=x.stateNode,Ie=!1;break t}break;case 5:$t=x.stateNode,Ie=!1;break t;case 3:case 4:$t=x.stateNode.containerInfo,Ie=!0;break t}x=x.return}if($t===null)throw Error(s(160));Og(p,A,f),$t=null,Ie=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)kg(n,e),n=n.sibling}var Si=null;function kg(e,n){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:He(n,e),Fe(e),l&4&&(Rn(3,e,e.return),Wa(3,e),Rn(5,e,e.return));break;case 1:He(n,e),Fe(e),l&512&&(de||a===null||Mi(a,a.return)),l&64&&Zi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Si;if(He(n,e),Fe(e),l&512&&(de||a===null||Mi(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ea]||p[Se]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),xe(p,l,a),p[Se]=e,ye(p),l=p;break t;case"link":var A=kp("link","href",f).get(l+(a.href||""));if(A){for(var x=0;x<A.length;x++)if(p=A[x],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(x,1);break e}}p=f.createElement(l),xe(p,l,a),f.head.appendChild(p);break;case"meta":if(A=kp("meta","content",f).get(l+(a.content||""))){for(x=0;x<A.length;x++)if(p=A[x],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(x,1);break e}}p=f.createElement(l),xe(p,l,a),f.head.appendChild(p);break;default:throw Error(s(468,l))}p[Se]=e,ye(p),l=p}e.stateNode=l}else zp(f,e.type,e.stateNode);else e.stateNode=Pp(f,l,e.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?zp(f,e.type,e.stateNode):Pp(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&uu(e,e.memoizedProps,a.memoizedProps)}break;case 27:He(n,e),Fe(e),l&512&&(de||a===null||Mi(a,a.return)),a!==null&&l&4&&uu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(He(n,e),Fe(e),l&512&&(de||a===null||Mi(a,a.return)),e.flags&32){f=e.stateNode;try{Rs(f,"")}catch(st){It(e,e.return,st)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,uu(e,f,a!==null?a.memoizedProps:f)),l&1024&&(fu=!0);break;case 6:if(He(n,e),Fe(e),l&4){if(e.stateNode===null)throw Error(s(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(st){It(e,e.return,st)}}break;case 3:if(Qo=null,f=Si,Si=Wo(n.containerInfo),He(n,e),Si=f,Fe(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{aa(n.containerInfo)}catch(st){It(e,e.return,st)}fu&&(fu=!1,zg(e));break;case 4:l=Si,Si=Wo(e.stateNode.containerInfo),He(n,e),Fe(e),Si=l;break;case 12:He(n,e),Fe(e);break;case 31:He(n,e),Fe(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ko(e,l)));break;case 13:He(n,e),Fe(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Bo=Le()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ko(e,l)));break;case 22:f=e.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,U=Zi,X=de;if(Zi=U||f,de=X||O,He(n,e),de=X,Zi=U,Fe(e),l&8192)t:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(a===null||O||Zi||de||os(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){O=a=n;try{if(p=O.stateNode,f)A=p.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{x=O.stateNode;var K=O.memoizedProps.style,G=K!=null&&K.hasOwnProperty("display")?K.display:null;x.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(st){It(O,O.return,st)}}}else if(n.tag===6){if(a===null){O=n;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(st){It(O,O.return,st)}}}else if(n.tag===18){if(a===null){O=n;try{var q=O.stateNode;f?xp(q,!0):xp(O.stateNode,!1)}catch(st){It(O,O.return,st)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ko(e,a))));break;case 19:He(n,e),Fe(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ko(e,l)));break;case 30:break;case 21:break;default:He(n,e),Fe(e)}}function Fe(e){var n=e.flags;if(n&2){try{for(var a,l=e.return;l!==null;){if(Cg(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=hu(e);Po(e,p,f);break;case 5:var A=a.stateNode;a.flags&32&&(Rs(A,""),a.flags&=-33);var x=hu(e);Po(e,x,A);break;case 3:case 4:var O=a.stateNode.containerInfo,U=hu(e);du(e,U,O);break;default:throw Error(s(161))}}catch(X){It(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function zg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;zg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function tn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Dg(e,n.alternate,n),n=n.sibling}function os(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Rn(4,n,n.return),os(n);break;case 1:Mi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&xg(n,n.return,a),os(n);break;case 27:ar(n.stateNode);case 26:case 5:Mi(n,n.return),os(n);break;case 22:n.memoizedState===null&&os(n);break;case 30:os(n);break;default:os(n)}e=e.sibling}}function en(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=e,p=n,A=p.flags;switch(p.tag){case 0:case 11:case 15:en(f,p,a),Wa(4,p);break;case 1:if(en(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(U){It(l,l.return,U)}if(l=p,f=l.updateQueue,f!==null){var x=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)ff(O[f],x)}catch(U){It(l,l.return,U)}}a&&A&64&&_g(p),Ka(p,p.return);break;case 27:Rg(p);case 26:case 5:en(f,p,a),a&&l===null&&A&4&&Tg(p),Ka(p,p.return);break;case 12:en(f,p,a);break;case 31:en(f,p,a),a&&A&4&&Ng(f,p);break;case 13:en(f,p,a),a&&A&4&&Pg(f,p);break;case 22:p.memoizedState===null&&en(f,p,a),Ka(p,p.return);break;case 30:break;default:en(f,p,a)}n=n.sibling}}function gu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&za(a))}function pu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&za(e))}function wi(e,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Bg(e,n,a,l),n=n.sibling}function Bg(e,n,a,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:wi(e,n,a,l),f&2048&&Wa(9,n);break;case 1:wi(e,n,a,l);break;case 3:wi(e,n,a,l),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&za(e)));break;case 12:if(f&2048){wi(e,n,a,l),e=n.stateNode;try{var p=n.memoizedProps,A=p.id,x=p.onPostCommit;typeof x=="function"&&x(A,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){It(n,n.return,O)}}else wi(e,n,a,l);break;case 31:wi(e,n,a,l);break;case 13:wi(e,n,a,l);break;case 23:break;case 22:p=n.stateNode,A=n.alternate,n.memoizedState!==null?p._visibility&2?wi(e,n,a,l):Qa(e,n):p._visibility&2?wi(e,n,a,l):(p._visibility|=2,$s(e,n,a,l,(n.subtreeFlags&10256)!==0||!1)),f&2048&&gu(A,n);break;case 24:wi(e,n,a,l),f&2048&&pu(n.alternate,n);break;default:wi(e,n,a,l)}}function $s(e,n,a,l,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=e,A=n,x=a,O=l,U=A.flags;switch(A.tag){case 0:case 11:case 15:$s(p,A,x,O,f),Wa(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?$s(p,A,x,O,f):Qa(p,A):(X._visibility|=2,$s(p,A,x,O,f)),f&&U&2048&&gu(A.alternate,A);break;case 24:$s(p,A,x,O,f),f&&U&2048&&pu(A.alternate,A);break;default:$s(p,A,x,O,f)}n=n.sibling}}function Qa(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,l=n,f=l.flags;switch(l.tag){case 22:Qa(a,l),f&2048&&gu(l.alternate,l);break;case 24:Qa(a,l),f&2048&&pu(l.alternate,l);break;default:Qa(a,l)}n=n.sibling}}var Za=8192;function Ws(e,n,a){if(e.subtreeFlags&Za)for(e=e.child;e!==null;)Ig(e,n,a),e=e.sibling}function Ig(e,n,a){switch(e.tag){case 26:Ws(e,n,a),e.flags&Za&&e.memoizedState!==null&&fv(a,Si,e.memoizedState,e.memoizedProps);break;case 5:Ws(e,n,a);break;case 3:case 4:var l=Si;Si=Wo(e.stateNode.containerInfo),Ws(e,n,a),Si=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Za,Za=16777216,Ws(e,n,a),Za=l):Ws(e,n,a));break;default:Ws(e,n,a)}}function Hg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ja(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];be=l,Ug(l,e)}Hg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Fg(e),e=e.sibling}function Fg(e){switch(e.tag){case 0:case 11:case 15:Ja(e),e.flags&2048&&Rn(9,e,e.return);break;case 3:Ja(e);break;case 12:Ja(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,zo(e)):Ja(e);break;default:Ja(e)}}function zo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];be=l,Ug(l,e)}Hg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Rn(8,n,n.return),zo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,zo(n));break;default:zo(n)}e=e.sibling}}function Ug(e,n){for(;be!==null;){var a=be;switch(a.tag){case 0:case 11:case 15:Rn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:za(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,be=l;else t:for(a=e;be!==null;){l=be;var f=l.sibling,p=l.return;if(Lg(l),l===a){be=null;break t}if(f!==null){f.return=p,be=f;break t}be=p}}}var Rb={getCacheForType:function(e){var n=Ee(ce),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Ee(ce).controller.signal}},Mb=typeof WeakMap=="function"?WeakMap:Map,kt=0,jt=null,Et=null,Tt=0,Bt=0,Je=null,Mn=!1,Ks=!1,mu=!1,nn=0,ie=0,Dn=0,ls=0,yu=0,ti=0,Qs=0,tr=null,Ue=null,bu=!1,Bo=0,Gg=0,Io=1/0,Ho=null,Ln=null,pe=0,On=null,Zs=null,sn=0,vu=0,Au=null,jg=null,er=0,Su=null;function ei(){return(kt&2)!==0&&Tt!==0?Tt&-Tt:k.T!==null?Cu():sd()}function qg(){if(ti===0)if((Tt&536870912)===0||Mt){var e=Yr;Yr<<=1,(Yr&3932160)===0&&(Yr=262144),ti=e}else ti=536870912;return e=Qe.current,e!==null&&(e.flags|=32),ti}function Ge(e,n,a){(e===jt&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)&&(Js(e,0),Nn(e,Tt,ti,!1)),wa(e,a),((kt&2)===0||e!==jt)&&(e===jt&&((kt&2)===0&&(ls|=a),ie===4&&Nn(e,Tt,ti,!1)),Di(e))}function Vg(e,n,a){if((kt&6)!==0)throw Error(s(327));var l=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Sa(e,n),f=l?Ob(e,n):Eu(e,n,!0),p=l;do{if(f===0){Ks&&!l&&Nn(e,n,0,!1);break}else{if(a=e.current.alternate,p&&!Db(a)){f=Eu(e,n,!1),p=!1;continue}if(f===2){if(p=n,e.errorRecoveryDisabledLanes&p)var A=0;else A=e.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){n=A;t:{var x=e;f=tr;var O=x.current.memoizedState.isDehydrated;if(O&&(Js(x,A).flags|=256),A=Eu(x,A,!1),A!==2){if(mu&&!O){x.errorRecoveryDisabledLanes|=p,ls|=p,f=4;break t}p=Ue,Ue=f,p!==null&&(Ue===null?Ue=p:Ue.push.apply(Ue,p))}f=A}if(p=!1,f!==2)continue}}if(f===1){Js(e,0),Nn(e,n,0,!0);break}t:{switch(l=e,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Nn(l,n,ti,!Mn);break t;case 2:Ue=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=Bo+300-Le(),10<f)){if(Nn(l,n,ti,!Mn),$r(l,0,!0)!==0)break t;sn=n,l.timeoutHandle=wp(Yg.bind(null,l,a,Ue,Ho,bu,n,ti,ls,Qs,Mn,p,"Throttled",-0,0),f);break t}Yg(l,a,Ue,Ho,bu,n,ti,ls,Qs,Mn,p,null,-0,0)}}break}while(!0);Di(e)}function Yg(e,n,a,l,f,p,A,x,O,U,X,K,G,q){if(e.timeoutHandle=-1,K=n.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gi},Ig(n,p,K);var st=(p&62914560)===p?Bo-Le():(p&4194048)===p?Gg-Le():0;if(st=gv(K,st),st!==null){sn=p,e.cancelPendingCommit=st(tp.bind(null,e,n,p,a,l,f,A,x,O,X,K,null,G,q)),Nn(e,p,A,!U);return}}tp(e,n,p,a,l,f,A,x,O)}function Db(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!We(p(),f))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Nn(e,n,a,l){n&=~yu,n&=~ls,e.suspendedLanes|=n,e.pingedLanes&=~n,l&&(e.warmLanes|=n),l=e.expirationTimes;for(var f=n;0<f;){var p=31-$e(f),A=1<<p;l[p]=-1,f&=~A}a!==0&&ed(e,a,n)}function Fo(){return(kt&6)===0?(ir(0),!1):!0}function wu(){if(Et!==null){if(Bt===0)var e=Et.return;else e=Et,Yi=Jn=null,Ic(e),js=null,Ia=0,e=Et;for(;e!==null;)Eg(e.alternate,e),e=e.return;Et=null}}function Js(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Kb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),sn=0,wu(),jt=e,Et=a=qi(e.current,null),Tt=n,Bt=0,Je=null,Mn=!1,Ks=Sa(e,n),mu=!1,Qs=ti=yu=ls=Dn=ie=0,Ue=tr=null,bu=!1,(n&8)!==0&&(n|=n&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=n;0<l;){var f=31-$e(l),p=1<<f;n|=e[f],l&=~p}return nn=n,ro(),a}function Xg(e,n){vt=null,k.H=Ya,n===Gs||n===po?(n=cf(),Bt=3):n===Tc?(n=cf(),Bt=4):Bt=n===tu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Je=n,Et===null&&(ie=1,Mo(e,li(n,e.current)))}function $g(){var e=Qe.current;return e===null?!0:(Tt&4194048)===Tt?di===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?e===di:!1}function Wg(){var e=k.H;return k.H=Ya,e===null?Ya:e}function Kg(){var e=k.A;return k.A=Rb,e}function Uo(){ie=4,Mn||(Tt&4194048)!==Tt&&Qe.current!==null||(Ks=!0),(Dn&134217727)===0&&(ls&134217727)===0||jt===null||Nn(jt,Tt,ti,!1)}function Eu(e,n,a){var l=kt;kt|=2;var f=Wg(),p=Kg();(jt!==e||Tt!==n)&&(Ho=null,Js(e,n)),n=!1;var A=ie;t:do try{if(Bt!==0&&Et!==null){var x=Et,O=Je;switch(Bt){case 8:wu(),A=6;break t;case 3:case 2:case 9:case 6:Qe.current===null&&(n=!0);var U=Bt;if(Bt=0,Je=null,ta(e,x,O,U),a&&Ks){A=0;break t}break;default:U=Bt,Bt=0,Je=null,ta(e,x,O,U)}}Lb(),A=ie;break}catch(X){Xg(e,X)}while(!0);return n&&e.shellSuspendCounter++,Yi=Jn=null,kt=l,k.H=f,k.A=p,Et===null&&(jt=null,Tt=0,ro()),A}function Lb(){for(;Et!==null;)Qg(Et)}function Ob(e,n){var a=kt;kt|=2;var l=Wg(),f=Kg();jt!==e||Tt!==n?(Ho=null,Io=Le()+500,Js(e,n)):Ks=Sa(e,n);t:do try{if(Bt!==0&&Et!==null){n=Et;var p=Je;e:switch(Bt){case 1:Bt=0,Je=null,ta(e,n,p,1);break;case 2:case 9:if(of(p)){Bt=0,Je=null,Zg(n);break}n=function(){Bt!==2&&Bt!==9||jt!==e||(Bt=7),Di(e)},p.then(n,n);break t;case 3:Bt=7;break t;case 4:Bt=5;break t;case 7:of(p)?(Bt=0,Je=null,Zg(n)):(Bt=0,Je=null,ta(e,n,p,7));break;case 5:var A=null;switch(Et.tag){case 26:A=Et.memoizedState;case 5:case 27:var x=Et;if(A?Bp(A):x.stateNode.complete){Bt=0,Je=null;var O=x.sibling;if(O!==null)Et=O;else{var U=x.return;U!==null?(Et=U,Go(U)):Et=null}break e}}Bt=0,Je=null,ta(e,n,p,5);break;case 6:Bt=0,Je=null,ta(e,n,p,6);break;case 8:wu(),ie=6;break t;default:throw Error(s(462))}}Nb();break}catch(X){Xg(e,X)}while(!0);return Yi=Jn=null,k.H=l,k.A=f,kt=a,Et!==null?0:(jt=null,Tt=0,ro(),ie)}function Nb(){for(;Et!==null&&!zl();)Qg(Et)}function Qg(e){var n=Sg(e.alternate,e,nn);e.memoizedProps=e.pendingProps,n===null?Go(e):Et=n}function Zg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=pg(a,n,n.pendingProps,n.type,void 0,Tt);break;case 11:n=pg(a,n,n.pendingProps,n.type.render,n.ref,Tt);break;case 5:Ic(n);default:Eg(a,n),n=Et=Wd(n,nn),n=Sg(a,n,nn)}e.memoizedProps=e.pendingProps,n===null?Go(e):Et=n}function ta(e,n,a,l){Yi=Jn=null,Ic(n),js=null,Ia=0;var f=n.return;try{if(Sb(e,f,n,a,Tt)){ie=1,Mo(e,li(a,e.current)),Et=null;return}}catch(p){if(f!==null)throw Et=f,p;ie=1,Mo(e,li(a,e.current)),Et=null;return}n.flags&32768?(Mt||l===1?e=!0:Ks||(Tt&536870912)!==0?e=!1:(Mn=e=!0,(l===2||l===9||l===3||l===6)&&(l=Qe.current,l!==null&&l.tag===13&&(l.flags|=16384))),Jg(n,e)):Go(n)}function Go(e){var n=e;do{if((n.flags&32768)!==0){Jg(n,Mn);return}e=n.return;var a=_b(n.alternate,n,nn);if(a!==null){Et=a;return}if(n=n.sibling,n!==null){Et=n;return}Et=n=e}while(n!==null);ie===0&&(ie=5)}function Jg(e,n){do{var a=xb(e.alternate,e);if(a!==null){a.flags&=32767,Et=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Et=e;return}Et=e=a}while(e!==null);ie=6,Et=null}function tp(e,n,a,l,f,p,A,x,O){e.cancelPendingCommit=null;do jo();while(pe!==0);if((kt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(p=n.lanes|n.childLanes,p|=hc,d0(e,a,p,A,x,O),e===jt&&(Et=jt=null,Tt=0),Zs=n,On=e,sn=a,vu=p,Au=f,jg=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Bb(vi,function(){return ap(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=k.T,k.T=null,f=j.p,j.p=2,A=kt,kt|=4;try{Tb(e,n,a)}finally{kt=A,j.p=f,k.T=l}}pe=1,ep(),ip(),np()}}function ep(){if(pe===1){pe=0;var e=On,n=Zs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=k.T,k.T=null;var l=j.p;j.p=2;var f=kt;kt|=4;try{kg(n,e);var p=ku,A=Fd(e.containerInfo),x=p.focusedElem,O=p.selectionRange;if(A!==x&&x&&x.ownerDocument&&Hd(x.ownerDocument.documentElement,x)){if(O!==null&&rc(x)){var U=O.start,X=O.end;if(X===void 0&&(X=U),"selectionStart"in x)x.selectionStart=U,x.selectionEnd=Math.min(X,x.value.length);else{var K=x.ownerDocument||document,G=K&&K.defaultView||window;if(G.getSelection){var q=G.getSelection(),st=x.textContent.length,dt=Math.min(O.start,st),Ut=O.end===void 0?dt:Math.min(O.end,st);!q.extend&&dt>Ut&&(A=Ut,Ut=dt,dt=A);var H=Id(x,dt),z=Id(x,Ut);if(H&&z&&(q.rangeCount!==1||q.anchorNode!==H.node||q.anchorOffset!==H.offset||q.focusNode!==z.node||q.focusOffset!==z.offset)){var F=K.createRange();F.setStart(H.node,H.offset),q.removeAllRanges(),dt>Ut?(q.addRange(F),q.extend(z.node,z.offset)):(F.setEnd(z.node,z.offset),q.addRange(F))}}}}for(K=[],q=x;q=q.parentNode;)q.nodeType===1&&K.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<K.length;x++){var W=K[x];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}el=!!Pu,ku=Pu=null}finally{kt=f,j.p=l,k.T=a}}e.current=n,pe=2}}function ip(){if(pe===2){pe=0;var e=On,n=Zs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=k.T,k.T=null;var l=j.p;j.p=2;var f=kt;kt|=4;try{Dg(e,n.alternate,n)}finally{kt=f,j.p=l,k.T=a}}pe=3}}function np(){if(pe===4||pe===3){pe=0,Bl();var e=On,n=Zs,a=sn,l=jg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?pe=5:(pe=0,Zs=On=null,sp(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Ln=null),Ul(a),n=n.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Aa,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=k.T,f=j.p,j.p=2,k.T=null;try{for(var p=e.onRecoverableError,A=0;A<l.length;A++){var x=l[A];p(x.value,{componentStack:x.stack})}}finally{k.T=n,j.p=f}}(sn&3)!==0&&jo(),Di(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Su?er++:(er=0,Su=e):er=0,ir(0)}}function sp(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,za(n)))}function jo(){return ep(),ip(),np(),ap()}function ap(){if(pe!==5)return!1;var e=On,n=vu;vu=0;var a=Ul(sn),l=k.T,f=j.p;try{j.p=32>a?32:a,k.T=null,a=Au,Au=null;var p=On,A=sn;if(pe=0,Zs=On=null,sn=0,(kt&6)!==0)throw Error(s(331));var x=kt;if(kt|=4,Fg(p.current),Bg(p,p.current,A,a),kt=x,ir(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Aa,p)}catch{}return!0}finally{j.p=f,k.T=l,sp(e,n)}}function rp(e,n,a){n=li(a,n),n=Jc(e.stateNode,n,2),e=xn(e,n,2),e!==null&&(wa(e,2),Di(e))}function It(e,n,a){if(e.tag===3)rp(e,e,a);else for(;n!==null;){if(n.tag===3){rp(n,e,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ln===null||!Ln.has(l))){e=li(a,e),a=og(2),l=xn(n,a,2),l!==null&&(lg(a,l,n,e),wa(l,2),Di(l));break}}n=n.return}}function _u(e,n,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Mb;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(a)||(mu=!0,f.add(a),e=Pb.bind(null,e,n,a),n.then(e,e))}function Pb(e,n,a){var l=e.pingCache;l!==null&&l.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,jt===e&&(Tt&a)===a&&(ie===4||ie===3&&(Tt&62914560)===Tt&&300>Le()-Bo?(kt&2)===0&&Js(e,0):yu|=a,Qs===Tt&&(Qs=0)),Di(e)}function op(e,n){n===0&&(n=td()),e=Kn(e,n),e!==null&&(wa(e,n),Di(e))}function kb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),op(e,a)}function zb(e,n){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),op(e,a)}function Bb(e,n){return va(e,n)}var qo=null,ea=null,xu=!1,Vo=!1,Tu=!1,Pn=0;function Di(e){e!==ea&&e.next===null&&(ea===null?qo=ea=e:ea=ea.next=e),Vo=!0,xu||(xu=!0,Hb())}function ir(e,n){if(!Tu&&Vo){Tu=!0;do for(var a=!1,l=qo;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var A=l.suspendedLanes,x=l.pingedLanes;p=(1<<31-$e(42|e)+1)-1,p&=f&~(A&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,hp(l,p))}else p=Tt,p=$r(l,l===jt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Sa(l,p)||(a=!0,hp(l,p));l=l.next}while(a);Tu=!1}}function Ib(){lp()}function lp(){Vo=xu=!1;var e=0;Pn!==0&&Wb()&&(e=Pn);for(var n=Le(),a=null,l=qo;l!==null;){var f=l.next,p=cp(l,n);p===0?(l.next=null,a===null?qo=f:a.next=f,f===null&&(ea=a)):(a=l,(e!==0||(p&3)!==0)&&(Vo=!0)),l=f}pe!==0&&pe!==5||ir(e),Pn!==0&&(Pn=0)}function cp(e,n){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var A=31-$e(p),x=1<<A,O=f[A];O===-1?((x&a)===0||(x&l)!==0)&&(f[A]=h0(x,n)):O<=n&&(e.expiredLanes|=x),p&=~x}if(n=jt,a=Tt,a=$r(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===n&&(Bt===2||Bt===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&pn(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Sa(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(l!==null&&pn(l),Ul(a)){case 2:case 8:a=bi;break;case 32:a=vi;break;case 268435456:a=Ss;break;default:a=vi}return l=up.bind(null,e),a=va(a,l),e.callbackPriority=n,e.callbackNode=a,n}return l!==null&&l!==null&&pn(l),e.callbackPriority=2,e.callbackNode=null,2}function up(e,n){if(pe!==0&&pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(jo()&&e.callbackNode!==a)return null;var l=Tt;return l=$r(e,e===jt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Vg(e,l,n),cp(e,Le()),e.callbackNode!=null&&e.callbackNode===a?up.bind(null,e):null)}function hp(e,n){if(jo())return null;Vg(e,n,!0)}function Hb(){Qb(function(){(kt&6)!==0?va(qr,Ib):lp()})}function Cu(){if(Pn===0){var e=Fs;e===0&&(e=Vr,Vr<<=1,(Vr&261888)===0&&(Vr=256)),Pn=e}return Pn}function dp(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zr(""+e)}function fp(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Fb(e,n,a,l,f){if(n==="submit"&&a&&a.stateNode===f){var p=dp((f[ze]||null).action),A=l.submitter;A&&(n=(n=A[ze]||null)?dp(n.formAction):A.getAttribute("formAction"),n!==null&&(p=n,A=null));var x=new io("action","action",null,l,f);e.push({event:x,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Pn!==0){var O=A?fp(f,A):new FormData(f);Xc(a,{pending:!0,data:O,method:f.method,action:p},null,O)}}else typeof p=="function"&&(x.preventDefault(),O=A?fp(f,A):new FormData(f),Xc(a,{pending:!0,data:O,method:f.method,action:p},p,O))},currentTarget:f}]})}}for(var Ru=0;Ru<uc.length;Ru++){var Mu=uc[Ru],Ub=Mu.toLowerCase(),Gb=Mu[0].toUpperCase()+Mu.slice(1);Ai(Ub,"on"+Gb)}Ai(jd,"onAnimationEnd"),Ai(qd,"onAnimationIteration"),Ai(Vd,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(sb,"onTransitionRun"),Ai(ab,"onTransitionStart"),Ai(rb,"onTransitionCancel"),Ai(Yd,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nr));function gp(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var p=void 0;if(n)for(var A=l.length-1;0<=A;A--){var x=l[A],O=x.instance,U=x.currentTarget;if(x=x.listener,O!==p&&f.isPropagationStopped())break t;p=x,f.currentTarget=U;try{p(f)}catch(X){ao(X)}f.currentTarget=null,p=O}else for(A=0;A<l.length;A++){if(x=l[A],O=x.instance,U=x.currentTarget,x=x.listener,O!==p&&f.isPropagationStopped())break t;p=x,f.currentTarget=U;try{p(f)}catch(X){ao(X)}f.currentTarget=null,p=O}}}}function _t(e,n){var a=n[Gl];a===void 0&&(a=n[Gl]=new Set);var l=e+"__bubble";a.has(l)||(pp(n,e,2,!1),a.add(l))}function Du(e,n,a){var l=0;n&&(l|=4),pp(a,e,l,n)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Lu(e){if(!e[Yo]){e[Yo]=!0,od.forEach(function(a){a!=="selectionchange"&&(jb.has(a)||Du(a,!1,e),Du(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Yo]||(n[Yo]=!0,Du("selectionchange",!1,n))}}function pp(e,n,a,l){switch(qp(n)){case 2:var f=yv;break;case 8:f=bv;break;default:f=Yu}a=f.bind(null,n,a,e),f=void 0,!Ql||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(n,a,{capture:!0,passive:f}):e.addEventListener(n,a,!0):f!==void 0?e.addEventListener(n,a,{passive:f}):e.addEventListener(n,a,!1)}function Ou(e,n,a,l,f){var p=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var A=l.tag;if(A===3||A===4){var x=l.stateNode.containerInfo;if(x===f)break;if(A===4)for(A=l.return;A!==null;){var O=A.tag;if((O===3||O===4)&&A.stateNode.containerInfo===f)return;A=A.return}for(;x!==null;){if(A=Es(x),A===null)return;if(O=A.tag,O===5||O===6||O===26||O===27){l=p=A;continue t}x=x.parentNode}}l=l.return}vd(function(){var U=p,X=Wl(a),K=[];t:{var G=Xd.get(e);if(G!==void 0){var q=io,st=e;switch(e){case"keypress":if(to(a)===0)break t;case"keydown":case"keyup":q=z0;break;case"focusin":st="focus",q=ec;break;case"focusout":st="blur",q=ec;break;case"beforeblur":case"afterblur":q=ec;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=_0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=H0;break;case jd:case qd:case Vd:q=C0;break;case Yd:q=U0;break;case"scroll":case"scrollend":q=w0;break;case"wheel":q=j0;break;case"copy":case"cut":case"paste":q=M0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=_d;break;case"toggle":case"beforetoggle":q=V0}var dt=(n&4)!==0,Ut=!dt&&(e==="scroll"||e==="scrollend"),H=dt?G!==null?G+"Capture":null:G;dt=[];for(var z=U,F;z!==null;){var W=z;if(F=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||F===null||H===null||(W=xa(z,H),W!=null&&dt.push(sr(z,W,F))),Ut)break;z=z.return}0<dt.length&&(G=new q(G,st,null,a,X),K.push({event:G,listeners:dt}))}}if((n&7)===0){t:{if(G=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",G&&a!==$l&&(st=a.relatedTarget||a.fromElement)&&(Es(st)||st[ws]))break t;if((q||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,q?(st=a.relatedTarget||a.toElement,q=U,st=st?Es(st):null,st!==null&&(Ut=o(st),dt=st.tag,st!==Ut||dt!==5&&dt!==27&&dt!==6)&&(st=null)):(q=null,st=U),q!==st)){if(dt=wd,W="onMouseLeave",H="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(dt=_d,W="onPointerLeave",H="onPointerEnter",z="pointer"),Ut=q==null?G:_a(q),F=st==null?G:_a(st),G=new dt(W,z+"leave",q,a,X),G.target=Ut,G.relatedTarget=F,W=null,Es(X)===U&&(dt=new dt(H,z+"enter",st,a,X),dt.target=F,dt.relatedTarget=Ut,W=dt),Ut=W,q&&st)e:{for(dt=qb,H=q,z=st,F=0,W=H;W;W=dt(W))F++;W=0;for(var ct=z;ct;ct=dt(ct))W++;for(;0<F-W;)H=dt(H),F--;for(;0<W-F;)z=dt(z),W--;for(;F--;){if(H===z||z!==null&&H===z.alternate){dt=H;break e}H=dt(H),z=dt(z)}dt=null}else dt=null;q!==null&&mp(K,G,q,dt,!1),st!==null&&Ut!==null&&mp(K,Ut,st,dt,!0)}}t:{if(G=U?_a(U):window,q=G.nodeName&&G.nodeName.toLowerCase(),q==="select"||q==="input"&&G.type==="file")var Nt=Od;else if(Dd(G))if(Nd)Nt=eb;else{Nt=J0;var at=Z0}else q=G.nodeName,!q||q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?U&&Xl(U.elementType)&&(Nt=Od):Nt=tb;if(Nt&&(Nt=Nt(e,U))){Ld(K,Nt,a,X);break t}at&&at(e,G,U),e==="focusout"&&U&&G.type==="number"&&U.memoizedProps.value!=null&&Yl(G,"number",G.value)}switch(at=U?_a(U):window,e){case"focusin":(Dd(at)||at.contentEditable==="true")&&(Os=at,oc=U,Na=null);break;case"focusout":Na=oc=Os=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Ud(K,a,X);break;case"selectionchange":if(nb)break;case"keydown":case"keyup":Ud(K,a,X)}var St;if(nc)t:{switch(e){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else Ls?Rd(e,a)&&(Ct="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ct="onCompositionStart");Ct&&(xd&&a.locale!=="ko"&&(Ls||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Ls&&(St=Ad()):(bn=X,Zl="value"in bn?bn.value:bn.textContent,Ls=!0)),at=Xo(U,Ct),0<at.length&&(Ct=new Ed(Ct,e,null,a,X),K.push({event:Ct,listeners:at}),St?Ct.data=St:(St=Md(a),St!==null&&(Ct.data=St)))),(St=X0?$0(e,a):W0(e,a))&&(Ct=Xo(U,"onBeforeInput"),0<Ct.length&&(at=new Ed("onBeforeInput","beforeinput",null,a,X),K.push({event:at,listeners:Ct}),at.data=St)),Fb(K,e,U,a,X)}gp(K,n)})}function sr(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Xo(e,n){for(var a=n+"Capture",l=[];e!==null;){var f=e,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=xa(e,a),f!=null&&l.unshift(sr(e,f,p)),f=xa(e,n),f!=null&&l.push(sr(e,f,p))),e.tag===3)return l;e=e.return}return[]}function qb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function mp(e,n,a,l,f){for(var p=n._reactName,A=[];a!==null&&a!==l;){var x=a,O=x.alternate,U=x.stateNode;if(x=x.tag,O!==null&&O===l)break;x!==5&&x!==26&&x!==27||U===null||(O=U,f?(U=xa(a,p),U!=null&&A.unshift(sr(a,U,O))):f||(U=xa(a,p),U!=null&&A.push(sr(a,U,O)))),a=a.return}A.length!==0&&e.push({event:n,listeners:A})}var Vb=/\r\n?/g,Yb=/\u0000|\uFFFD/g;function yp(e){return(typeof e=="string"?e:""+e).replace(Vb,`
`).replace(Yb,"")}function bp(e,n){return n=yp(n),yp(e)===n}function Ft(e,n,a,l,f,p){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Rs(e,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Rs(e,""+l);break;case"className":Kr(e,"class",l);break;case"tabIndex":Kr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(e,a,l);break;case"style":yd(e,l,p);break;case"data":if(n!=="object"){Kr(e,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Zr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(n!=="input"&&Ft(e,n,"name",f.name,f,null),Ft(e,n,"formEncType",f.formEncType,f,null),Ft(e,n,"formMethod",f.formMethod,f,null),Ft(e,n,"formTarget",f.formTarget,f,null)):(Ft(e,n,"encType",f.encType,f,null),Ft(e,n,"method",f.method,f,null),Ft(e,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Zr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Gi);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Zr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":_t("beforetoggle",e),_t("toggle",e),Wr(e,"popover",l);break;case"xlinkActuate":Ui(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ui(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ui(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ui(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ui(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ui(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ui(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ui(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ui(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Wr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=A0.get(a)||a,Wr(e,a,l))}}function Nu(e,n,a,l,f,p){switch(a){case"style":yd(e,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Rs(e,l):(typeof l=="number"||typeof l=="bigint")&&Rs(e,""+l);break;case"onScroll":l!=null&&_t("scroll",e);break;case"onScrollEnd":l!=null&&_t("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ld.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),n=a.slice(2,f?a.length-7:void 0),p=e[ze]||null,p=p!=null?p[a]:null,typeof p=="function"&&e.removeEventListener(n,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Wr(e,a,l)}}}function xe(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",e),_t("load",e);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var A=a[p];if(A!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ft(e,n,p,A,a,null)}}f&&Ft(e,n,"srcSet",a.srcSet,a,null),l&&Ft(e,n,"src",a.src,a,null);return;case"input":_t("invalid",e);var x=p=A=f=null,O=null,U=null;for(l in a)if(a.hasOwnProperty(l)){var X=a[l];if(X!=null)switch(l){case"name":f=X;break;case"type":A=X;break;case"checked":O=X;break;case"defaultChecked":U=X;break;case"value":p=X;break;case"defaultValue":x=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:Ft(e,n,l,X,a,null)}}fd(e,p,x,O,U,A,f,!1);return;case"select":_t("invalid",e),l=A=p=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":p=x;break;case"defaultValue":A=x;break;case"multiple":l=x;default:Ft(e,n,f,x,a,null)}n=p,a=A,e.multiple=!!l,n!=null?Cs(e,!!l,n,!1):a!=null&&Cs(e,!!l,a,!0);return;case"textarea":_t("invalid",e),p=f=l=null;for(A in a)if(a.hasOwnProperty(A)&&(x=a[A],x!=null))switch(A){case"value":l=x;break;case"defaultValue":f=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:Ft(e,n,A,x,a,null)}pd(e,l,f,p);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ft(e,n,O,l,a,null)}return;case"dialog":_t("beforetoggle",e),_t("toggle",e),_t("cancel",e),_t("close",e);break;case"iframe":case"object":_t("load",e);break;case"video":case"audio":for(l=0;l<nr.length;l++)_t(nr[l],e);break;case"image":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"embed":case"source":case"link":_t("error",e),_t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Ft(e,n,U,l,a,null)}return;default:if(Xl(n)){for(X in a)a.hasOwnProperty(X)&&(l=a[X],l!==void 0&&Nu(e,n,X,l,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(l=a[x],l!=null&&Ft(e,n,x,l,a,null))}function Xb(e,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,A=null,x=null,O=null,U=null,X=null;for(q in a){var K=a[q];if(a.hasOwnProperty(q)&&K!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":O=K;default:l.hasOwnProperty(q)||Ft(e,n,q,null,l,K)}}for(var G in l){var q=l[G];if(K=a[G],l.hasOwnProperty(G)&&(q!=null||K!=null))switch(G){case"type":p=q;break;case"name":f=q;break;case"checked":U=q;break;case"defaultChecked":X=q;break;case"value":A=q;break;case"defaultValue":x=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,n));break;default:q!==K&&Ft(e,n,G,q,l,K)}}Vl(e,A,x,O,U,X,p,f);return;case"select":q=A=x=G=null;for(p in a)if(O=a[p],a.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":q=O;default:l.hasOwnProperty(p)||Ft(e,n,p,null,l,O)}for(f in l)if(p=l[f],O=a[f],l.hasOwnProperty(f)&&(p!=null||O!=null))switch(f){case"value":G=p;break;case"defaultValue":x=p;break;case"multiple":A=p;default:p!==O&&Ft(e,n,f,p,l,O)}n=x,a=A,l=q,G!=null?Cs(e,!!a,G,!1):!!l!=!!a&&(n!=null?Cs(e,!!a,n,!0):Cs(e,!!a,a?[]:"",!1));return;case"textarea":q=G=null;for(x in a)if(f=a[x],a.hasOwnProperty(x)&&f!=null&&!l.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ft(e,n,x,null,l,f)}for(A in l)if(f=l[A],p=a[A],l.hasOwnProperty(A)&&(f!=null||p!=null))switch(A){case"value":G=f;break;case"defaultValue":q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&Ft(e,n,A,f,l,p)}gd(e,G,q);return;case"option":for(var st in a)if(G=a[st],a.hasOwnProperty(st)&&G!=null&&!l.hasOwnProperty(st))switch(st){case"selected":e.selected=!1;break;default:Ft(e,n,st,null,l,G)}for(O in l)if(G=l[O],q=a[O],l.hasOwnProperty(O)&&G!==q&&(G!=null||q!=null))switch(O){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Ft(e,n,O,G,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in a)G=a[dt],a.hasOwnProperty(dt)&&G!=null&&!l.hasOwnProperty(dt)&&Ft(e,n,dt,null,l,G);for(U in l)if(G=l[U],q=a[U],l.hasOwnProperty(U)&&G!==q&&(G!=null||q!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Ft(e,n,U,G,l,q)}return;default:if(Xl(n)){for(var Ut in a)G=a[Ut],a.hasOwnProperty(Ut)&&G!==void 0&&!l.hasOwnProperty(Ut)&&Nu(e,n,Ut,void 0,l,G);for(X in l)G=l[X],q=a[X],!l.hasOwnProperty(X)||G===q||G===void 0&&q===void 0||Nu(e,n,X,G,l,q);return}}for(var H in a)G=a[H],a.hasOwnProperty(H)&&G!=null&&!l.hasOwnProperty(H)&&Ft(e,n,H,null,l,G);for(K in l)G=l[K],q=a[K],!l.hasOwnProperty(K)||G===q||G==null&&q==null||Ft(e,n,K,G,l,q)}function vp(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $b(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],p=f.transferSize,A=f.initiatorType,x=f.duration;if(p&&x&&vp(A)){for(A=0,x=f.responseEnd,l+=1;l<a.length;l++){var O=a[l],U=O.startTime;if(U>x)break;var X=O.transferSize,K=O.initiatorType;X&&vp(K)&&(O=O.responseEnd,A+=X*(O<x?1:(x-U)/(O-U)))}if(--l,n+=8*(p+A)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Pu=null,ku=null;function $o(e){return e.nodeType===9?e:e.ownerDocument}function Ap(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sp(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function zu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Bu=null;function Wb(){var e=window.event;return e&&e.type==="popstate"?e===Bu?!1:(Bu=e,!0):(Bu=null,!1)}var wp=typeof setTimeout=="function"?setTimeout:void 0,Kb=typeof clearTimeout=="function"?clearTimeout:void 0,Ep=typeof Promise=="function"?Promise:void 0,Qb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ep<"u"?function(e){return Ep.resolve(null).then(e).catch(Zb)}:wp;function Zb(e){setTimeout(function(){throw e})}function kn(e){return e==="head"}function _p(e,n){var a=n,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),aa(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ar(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,ar(a);for(var p=a.firstChild;p;){var A=p.nextSibling,x=p.nodeName;p[Ea]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=A}}else a==="body"&&ar(e.ownerDocument.body);a=f}while(a);aa(n)}function xp(e,n){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function Iu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Iu(a),jl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Jb(e,n,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ea])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(p=e.getAttribute("rel"),p==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(p!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(p=e.getAttribute("src"),(p!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===p)return e}else return e;if(e=fi(e.nextSibling),e===null)break}return null}function tv(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=fi(e.nextSibling),e===null))return null;return e}function Tp(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=fi(e.nextSibling),e===null))return null;return e}function Hu(e){return e.data==="$?"||e.data==="$~"}function Fu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ev(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function fi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Uu=null;function Cp(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return fi(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function Rp(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Mp(e,n,a){switch(n=$o(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ar(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);jl(e)}var gi=new Map,Dp=new Set;function Wo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var an=j.d;j.d={f:iv,r:nv,D:sv,C:av,L:rv,m:ov,X:cv,S:lv,M:uv};function iv(){var e=an.f(),n=Fo();return e||n}function nv(e){var n=_s(e);n!==null&&n.tag===5&&n.type==="form"?Xf(n):an.r(e)}var ia=typeof document>"u"?null:document;function Lp(e,n,a){var l=ia;if(l&&typeof n=="string"&&n){var f=ri(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Dp.has(f)||(Dp.add(f),e={rel:e,crossOrigin:a,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),xe(n,"link",e),ye(n),l.head.appendChild(n)))}}function sv(e){an.D(e),Lp("dns-prefetch",e,null)}function av(e,n){an.C(e,n),Lp("preconnect",e,n)}function rv(e,n,a){an.L(e,n,a);var l=ia;if(l&&e&&n){var f='link[rel="preload"][as="'+ri(n)+'"]';n==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+ri(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+ri(a.imageSizes)+'"]')):f+='[href="'+ri(e)+'"]';var p=f;switch(n){case"style":p=na(e);break;case"script":p=sa(e)}gi.has(p)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),gi.set(p,e),l.querySelector(f)!==null||n==="style"&&l.querySelector(rr(p))||n==="script"&&l.querySelector(or(p))||(n=l.createElement("link"),xe(n,"link",e),ye(n),l.head.appendChild(n)))}}function ov(e,n){an.m(e,n);var a=ia;if(a&&e){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+ri(l)+'"][href="'+ri(e)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=sa(e)}if(!gi.has(p)&&(e=y({rel:"modulepreload",href:e},n),gi.set(p,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(or(p)))return}l=a.createElement("link"),xe(l,"link",e),ye(l),a.head.appendChild(l)}}}function lv(e,n,a){an.S(e,n,a);var l=ia;if(l&&e){var f=xs(l).hoistableStyles,p=na(e);n=n||"default";var A=f.get(p);if(!A){var x={loading:0,preload:null};if(A=l.querySelector(rr(p)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=gi.get(p))&&Gu(e,a);var O=A=l.createElement("link");ye(O),xe(O,"link",e),O._p=new Promise(function(U,X){O.onload=U,O.onerror=X}),O.addEventListener("load",function(){x.loading|=1}),O.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Ko(A,n,l)}A={type:"stylesheet",instance:A,count:1,state:x},f.set(p,A)}}}function cv(e,n){an.X(e,n);var a=ia;if(a&&e){var l=xs(a).hoistableScripts,f=sa(e),p=l.get(f);p||(p=a.querySelector(or(f)),p||(e=y({src:e,async:!0},n),(n=gi.get(f))&&ju(e,n),p=a.createElement("script"),ye(p),xe(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function uv(e,n){an.M(e,n);var a=ia;if(a&&e){var l=xs(a).hoistableScripts,f=sa(e),p=l.get(f);p||(p=a.querySelector(or(f)),p||(e=y({src:e,async:!0,type:"module"},n),(n=gi.get(f))&&ju(e,n),p=a.createElement("script"),ye(p),xe(p,"link",e),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Op(e,n,a,l){var f=(f=ut.current)?Wo(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=na(a.href),a=xs(f).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=na(a.href);var p=xs(f).hoistableStyles,A=p.get(e);if(A||(f=f.ownerDocument||f,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(e,A),(p=f.querySelector(rr(e)))&&!p._p&&(A.instance=p,A.state.loading=5),gi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},gi.set(e,a),p||hv(f,e,a,A.state))),n&&l===null)throw Error(s(528,""));return A}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=sa(a),a=xs(f).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function na(e){return'href="'+ri(e)+'"'}function rr(e){return'link[rel="stylesheet"]['+e+"]"}function Np(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function hv(e,n,a,l){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=e.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),xe(n,"link",a),ye(n),e.head.appendChild(n))}function sa(e){return'[src="'+ri(e)+'"]'}function or(e){return"script[async]"+e}function Pp(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=e.querySelector('style[data-href~="'+ri(a.href)+'"]');if(l)return n.instance=l,ye(l),l;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ye(l),xe(l,"style",f),Ko(l,a.precedence,e),n.instance=l;case"stylesheet":f=na(a.href);var p=e.querySelector(rr(f));if(p)return n.state.loading|=4,n.instance=p,ye(p),p;l=Np(a),(f=gi.get(f))&&Gu(l,f),p=(e.ownerDocument||e).createElement("link"),ye(p);var A=p;return A._p=new Promise(function(x,O){A.onload=x,A.onerror=O}),xe(p,"link",l),n.state.loading|=4,Ko(p,a.precedence,e),n.instance=p;case"script":return p=sa(a.src),(f=e.querySelector(or(p)))?(n.instance=f,ye(f),f):(l=a,(f=gi.get(p))&&(l=y({},a),ju(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),ye(f),xe(f,"link",l),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Ko(l,a.precedence,e));return n.instance}function Ko(e,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,A=0;A<l.length;A++){var x=l[A];if(x.dataset.precedence===n)p=x;else if(p!==f)break}p?p.parentNode.insertBefore(e,p.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Gu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ju(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Qo=null;function kp(e,n,a){if(Qo===null){var l=new Map,f=Qo=new Map;f.set(a,l)}else f=Qo,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var p=a[f];if(!(p[Ea]||p[Se]||e==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var A=p.getAttribute(n)||"";A=e+A;var x=l.get(A);x?x.push(p):l.set(A,[p])}}return l}function zp(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function dv(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Bp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function fv(e,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=na(l.href),p=n.querySelector(rr(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Zo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=p,ye(p);return}p=n.ownerDocument||n,l=Np(l),(f=gi.get(f))&&Gu(l,f),p=p.createElement("link"),ye(p);var A=p;A._p=new Promise(function(x,O){A.onload=x,A.onerror=O}),xe(p,"link",l),a.instance=p}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Zo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var qu=0;function gv(e,n){return e.stylesheets&&e.count===0&&tl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend){var p=e.unsuspend;e.unsuspend=null,p()}},6e4+n);0<e.imgBytes&&qu===0&&(qu=62500*$b());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tl(e,e.stylesheets),e.unsuspend)){var p=e.unsuspend;e.unsuspend=null,p()}},(e.imgBytes>qu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Zo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Jo=null;function tl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Jo=new Map,n.forEach(pv,e),Jo=null,Zo.call(e))}function pv(e,n){if(!(n.state.loading&4)){var a=Jo.get(e);if(a)var l=a.get(null);else{a=new Map,Jo.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var A=f[p];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),l=A)}l&&a.set(null,l)}f=n.instance,A=f.getAttribute("data-precedence"),p=a.get(A)||l,p===l&&a.set(null,f),a.set(A,f),this.count++,l=Zo.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var lr={$$typeof:D,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function mv(e,n,a,l,f,p,A,x,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.hiddenUpdates=Hl(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Ip(e,n,a,l,f,p,A,x,O,U,X,K){return e=new mv(e,n,a,A,O,U,X,K,x),n=1,p===!0&&(n|=24),p=Ke(3,null,null,n),e.current=p,p.stateNode=e,n=Ec(),n.refCount++,e.pooledCache=n,n.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:n},Cc(p),e}function Hp(e){return e?(e=ks,e):ks}function Fp(e,n,a,l,f,p){f=Hp(f),l.context===null?l.context=f:l.pendingContext=f,l=_n(n),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=xn(e,l,n),a!==null&&(Ge(a,e,n),Fa(a,e,n))}function Up(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Vu(e,n){Up(e,n),(e=e.alternate)&&Up(e,n)}function Gp(e){if(e.tag===13||e.tag===31){var n=Kn(e,67108864);n!==null&&Ge(n,e,67108864),Vu(e,67108864)}}function jp(e){if(e.tag===13||e.tag===31){var n=ei();n=Fl(n);var a=Kn(e,n);a!==null&&Ge(a,e,n),Vu(e,n)}}var el=!0;function yv(e,n,a,l){var f=k.T;k.T=null;var p=j.p;try{j.p=2,Yu(e,n,a,l)}finally{j.p=p,k.T=f}}function bv(e,n,a,l){var f=k.T;k.T=null;var p=j.p;try{j.p=8,Yu(e,n,a,l)}finally{j.p=p,k.T=f}}function Yu(e,n,a,l){if(el){var f=Xu(l);if(f===null)Ou(e,n,l,il,a),Vp(e,l);else if(Av(f,e,n,a,l))l.stopPropagation();else if(Vp(e,l),n&4&&-1<vv.indexOf(e)){for(;f!==null;){var p=_s(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var A=Vn(p.pendingLanes);if(A!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;A;){var O=1<<31-$e(A);x.entanglements[1]|=O,A&=~O}Di(p),(kt&6)===0&&(Io=Le()+500,ir(0))}}break;case 31:case 13:x=Kn(p,2),x!==null&&Ge(x,p,2),Fo(),Vu(p,2)}if(p=Xu(l),p===null&&Ou(e,n,l,il,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else Ou(e,n,l,null,a)}}function Xu(e){return e=Wl(e),$u(e)}var il=null;function $u(e){if(il=null,e=Es(e),e!==null){var n=o(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return il=e,null}function qp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Il()){case qr:return 2;case bi:return 8;case vi:case Ti:return 32;case Ss:return 268435456;default:return 32}default:return 32}}var Wu=!1,zn=null,Bn=null,In=null,cr=new Map,ur=new Map,Hn=[],vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vp(e,n){switch(e){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":cr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(n.pointerId)}}function hr(e,n,a,l,f,p){return e===null||e.nativeEvent!==p?(e={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},n!==null&&(n=_s(n),n!==null&&Gp(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function Av(e,n,a,l,f){switch(n){case"focusin":return zn=hr(zn,e,n,a,l,f),!0;case"dragenter":return Bn=hr(Bn,e,n,a,l,f),!0;case"mouseover":return In=hr(In,e,n,a,l,f),!0;case"pointerover":var p=f.pointerId;return cr.set(p,hr(cr.get(p)||null,e,n,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,ur.set(p,hr(ur.get(p)||null,e,n,a,l,f)),!0}return!1}function Yp(e){var n=Es(e.target);if(n!==null){var a=o(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,ad(e.priority,function(){jp(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,ad(e.priority,function(){jp(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Xu(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);$l=l,a.target.dispatchEvent(l),$l=null}else return n=_s(a),n!==null&&Gp(n),e.blockedOn=a,!1;n.shift()}return!0}function Xp(e,n,a){nl(e)&&a.delete(n)}function Sv(){Wu=!1,zn!==null&&nl(zn)&&(zn=null),Bn!==null&&nl(Bn)&&(Bn=null),In!==null&&nl(In)&&(In=null),cr.forEach(Xp),ur.forEach(Xp)}function sl(e,n){e.blockedOn===n&&(e.blockedOn=null,Wu||(Wu=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Sv)))}var al=null;function $p(e){al!==e&&(al=e,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){al===e&&(al=null);for(var n=0;n<e.length;n+=3){var a=e[n],l=e[n+1],f=e[n+2];if(typeof l!="function"){if($u(l||a)===null)continue;break}var p=_s(a);p!==null&&(e.splice(n,3),n-=3,Xc(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function aa(e){function n(O){return sl(O,e)}zn!==null&&sl(zn,e),Bn!==null&&sl(Bn,e),In!==null&&sl(In,e),cr.forEach(n),ur.forEach(n);for(var a=0;a<Hn.length;a++){var l=Hn[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Hn.length&&(a=Hn[0],a.blockedOn===null);)Yp(a),a.blockedOn===null&&Hn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],A=f[ze]||null;if(typeof p=="function")A||$p(a);else if(A){var x=null;if(p&&p.hasAttribute("formAction")){if(f=p,A=p[ze]||null)x=A.formAction;else if($u(f)!==null)continue}else x=A.action;typeof x=="function"?a[l+1]=x:(a.splice(l,3),l-=3),$p(a)}}}function Wp(){function e(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(A){return f=A})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Ku(e){this._internalRoot=e}rl.prototype.render=Ku.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=ei();Fp(a,l,e,n,null,null)},rl.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Fp(e.current,2,null,e,null,null),Fo(),n[ws]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var n=sd();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Hn.length&&n!==0&&n<Hn[a].priority;a++);Hn.splice(a,0,e),a===0&&Yp(e)}};var Kp=t.version;if(Kp!=="19.2.0")throw Error(s(527,Kp,"19.2.0"));j.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(n),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var wv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{Aa=ol.inject(wv),Xe=ol}catch{}}return fr.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,l="",f=ng,p=sg,A=ag;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(A=n.onRecoverableError)),n=Ip(e,1,!1,null,null,a,l,null,f,p,A,Wp),e[ws]=n.current,Lu(e),new Ku(n)},fr.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var l=!1,f="",p=ng,A=sg,x=ag,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),n=Ip(e,1,!0,n,a??null,l,f,O,p,A,x,Wp),n.context=Hp(null),a=n.current,l=ei(),l=Fl(l),f=_n(l),f.callback=null,xn(a,f,l),a=l,n.current.lanes=a,wa(n,a),Di(n),e[ws]=n.current,Lu(e),new rl(n)},fr.version="19.2.0",fr}var lm;function Ov(){if(lm)return th.exports;lm=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),th.exports=Lv(),th.exports}var Nv=Ov();const Ne=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ph=[.001,0,0,.001,0,0],sh=1.35,ii={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ii={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ym="pdfjs_internal_editor_",mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Xm={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},_r={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ae={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ra={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Or={ERRORS:0,WARNINGS:1,INFOS:5},Tr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ll={moveTo:0,lineTo:1,curveTo:2,closePath:3},$m={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _l=Or.WARNINGS;function Pv(h){Number.isInteger(h)&&(_l=h)}function kv(){return _l}function xl(h){_l>=Or.INFOS&&console.log(`Info: ${h}`)}function bt(h){_l>=Or.WARNINGS&&console.log(`Warning: ${h}`)}function Gt(h){throw new Error(h)}function ge(h,t){h||Gt(t)}function zv(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Rh(h,t=null,i=null){if(!h)return null;if(i&&typeof h=="string"&&(i.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),i.tryConvertEncoding))try{h=Uv(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return zv(s)?s:null}function Mh(h,t,i=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):i&&Rh(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function xt(h,t,i,s=!1){return Object.defineProperty(h,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const bs=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class cm extends bs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class ah extends bs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class Al extends bs{constructor(t){super(t,"InvalidPDFException")}}class Cr extends bs{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class Bv extends bs{constructor(t){super(t,"FormatError")}}class cn extends bs{constructor(t){super(t,"AbortException")}}function Wm(h){(typeof h!="object"||h?.length===void 0)&&Gt("Invalid argument for bytesToString");const t=h.length,i=8192;if(t<i)return String.fromCharCode.apply(null,h);const s=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),c=h.subarray(r,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Nr(h){typeof h!="string"&&Gt("Invalid argument for stringToBytes");const t=h.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=h.charCodeAt(s)&255;return i}function Iv(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function Hv(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function Fv(){try{return new Function(""),!0}catch{return!1}}class Ae{static get isLittleEndian(){return xt(this,"isLittleEndian",Hv())}static get isEvalSupported(){return xt(this,"isEvalSupported",Fv())}static get isOffscreenCanvasSupported(){return xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return xt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return xt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return xt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const rh=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class lt{static makeHexColor(t,i,s){return`#${rh[t]}${rh[i]}${rh[s]}`}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static applyTransform(t,i,s=0){const r=t[s],o=t[s+1];t[s]=r*i[0]+o*i[2]+i[4],t[s+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],o=i[1],c=i[2],u=i[3],d=i[4],g=i[5];for(let m=0;m<6;m+=2){const y=t[s+m],v=t[s+m+1];t[s+m]=y*r+v*c+d,t[s+m+1]=y*o+v*u+g}}static applyInverseTransform(t,i){const s=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,s){const r=i[0],o=i[1],c=i[2],u=i[3],d=i[4],g=i[5],m=t[0],y=t[1],v=t[2],w=t[3];let _=r*m+d,E=_,C=r*v+d,R=C,L=u*y+g,D=L,b=u*w+g,S=b;if(o!==0||c!==0){const T=o*m,M=o*v,N=c*y,B=c*w;_+=N,R+=N,C+=B,E+=B,L+=T,S+=T,b+=M,D+=M}s[0]=Math.min(s[0],_,C,E,R),s[1]=Math.min(s[1],L,b,D,S),s[2]=Math.max(s[2],_,C,E,R),s[3]=Math.max(s[3],L,b,D,S)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],o=t[2],c=t[3],u=s**2+r**2,d=s*o+r*c,g=o**2+c**2,m=(u+g)/2,y=Math.sqrt(m**2-(u*g-d**2));i[0]=Math.sqrt(m+y||1),i[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>c?null:[s,o,r,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],i,r)}static#t(t,i,s,r,o,c,u,d,g,m){if(g<=0||g>=1)return;const y=1-g,v=g*g,w=v*g,_=y*(y*(y*t+3*g*i)+3*v*s)+w*r,E=y*(y*(y*o+3*g*c)+3*v*u)+w*d;m[0]=Math.min(m[0],_),m[1]=Math.min(m[1],E),m[2]=Math.max(m[2],_),m[3]=Math.max(m[3],E)}static#e(t,i,s,r,o,c,u,d,g,m,y,v){if(Math.abs(g)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,i,s,r,o,c,u,d,-y/m,v);return}const w=m**2-4*y*g;if(w<0)return;const _=Math.sqrt(w),E=2*g;this.#t(t,i,s,r,o,c,u,d,(-m+_)/E,v),this.#t(t,i,s,r,o,c,u,d,(-m-_)/E,v)}static bezierBoundingBox(t,i,s,r,o,c,u,d,g){g[0]=Math.min(g[0],t,u),g[1]=Math.min(g[1],i,d),g[2]=Math.max(g[2],t,u),g[3]=Math.max(g[3],i,d),this.#e(t,s,o,u,i,r,c,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),g),this.#e(t,s,o,u,i,r,c,d,3*(-i+3*(r-c)+d),6*(i-2*r+c),3*(r-i),g)}}function Uv(h){return decodeURIComponent(escape(h))}let oh=null,um=null;function Km(h){return oh||(oh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,um=new Map([["ﬅ","ſt"]])),h.replaceAll(oh,(t,i,s)=>i?i.normalize("NFKC"):um.get(s))}function Dh(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),Wm(h)}const Lh="pdfjs_internal_id_";function Gv(h,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...o]=i;if(!h(s)&&!Number.isInteger(s)||!t(r))return!1;const c=o.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Me(h,t,i){return Math.min(Math.max(h,t),i)}function Qm(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(Wm(h))}function jv(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):Nr(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(i=>{i(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,i)=>t+i,0)});const rn="http://www.w3.org/2000/svg";class ps{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ma(h,t="text"){if(Ar(h,document.baseURI)){const i=await fetch(h);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",h,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Pr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=o,this.offsetY=c,s*=i;const d=(t[2]+t[0])/2,g=(t[3]+t[1])/2;let m,y,v,w;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,y=0,v=0,w=1;break;case 90:m=0,y=1,v=1,w=0;break;case 270:m=0,y=-1,v=-1,w=0;break;case 0:m=1,y=0,v=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,w=-w);let _,E,C,R;m===0?(_=Math.abs(g-t[1])*s+o,E=Math.abs(d-t[0])*s+c,C=(t[3]-t[1])*s,R=(t[2]-t[0])*s):(_=Math.abs(d-t[0])*s+o,E=Math.abs(g-t[1])*s+c,C=(t[2]-t[0])*s,R=(t[3]-t[1])*s),this.transform=[m*s,y*s,v*s,w*s,_-m*s*d-v*s*g,E-y*s*d-w*s*g],this.width=C,this.height=R}get rawDims(){const t=this.viewBox;return xt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Pr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const s=[t,i];return lt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];lt.applyTransform(i,this.transform);const s=[t[2],t[3]];return lt.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return lt.applyInverseTransform(s,this.transform),s}}class Tl extends bs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function kr(h){const t=h.length;let i=0;for(;i<t&&h[i].trim()==="";)i++;return h.substring(i,i+5).toLowerCase()==="data:"}function Cl(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function Zm(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function Jm(h,t="document.pdf"){if(typeof h!="string")return t;if(kr(h))return bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(o.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const g of u)if(o.test(g))return r(g);const d=Array.from(s.searchParams.keys()).reverse();for(const g of d)if(o.test(g))return r(g)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return r(d[0])}return t}class hm{started=Object.create(null);times=[];time(t){t in this.started&&bt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||bt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-r}ms
`);return t.join("")}}function Ar(h,t){const i=t?URL.parse(h,t):URL.parse(h);return i?.protocol==="http:"||i?.protocol==="https:"}function yi(h){h.preventDefault()}function oe(h){h.preventDefault(),h.stopPropagation()}function qv(h){console.log("Deprecated API usage: "+h)}class Oh{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const g=i[7]||"Z";let m=parseInt(i[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,g==="-"?(c+=m,u+=y):g==="+"&&(c-=m,u-=y),new Date(Date.UTC(s,r,o,c,u,d))}}function ty(h,{scale:t=1,rotation:i=0}){const{width:s,height:r}=h.attributes.style,o=[0,0,parseInt(s),parseInt(r)];return new Pr({viewBox:o,userUnit:1,scale:t,rotation:i})}function Nh(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(bt(`Not a valid color format: "${h}"`),[0,0,0])}function Vv(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of h.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;h.set(i,Nh(s))}t.remove()}function Zt(h){const{a:t,b:i,c:s,d:r,e:o,f:c}=h.getTransform();return[t,i,s,r,o,c]}function Ni(h){const{a:t,b:i,c:s,d:r,e:o,f:c}=h.getTransform().invertSelf();return[t,i,s,r,o,c]}function jn(h,t,i=!1,s=!0){if(t instanceof Pr){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=h,u=Ae.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,g=`var(--total-scale-factor) * ${o}px`,m=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${g}, var(--scale-round-y))`:`calc(${g})`;!i||t.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}s&&h.setAttribute("data-main-rotation",t.rotation)}class xi{constructor(){const{pixelRatio:t}=xi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,o=-1){let c=1/0,u=1/0,d=1/0;s=xi.capPixels(s,o),s>0&&(c=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,d=r/i);const g=Math.min(c,u,d);return this.sx>g||this.sy>g?(this.sx=g,this.sy=g,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const Sl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class xr{#t=null;#e=null;#i;#n=null;#a=null;#s=null;static#o=null;constructor(t){this.#i=t,xr.#o||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#i._uiManager._signal;t.addEventListener("contextmenu",yi,{signal:i}),t.addEventListener("pointerdown",xr.#r,{signal:i});const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const r=this.#i.toolbarPosition;if(r){const{style:o}=t,c=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#r(t){t.stopPropagation()}#h(t){this.#i._focusEventsAllowed=!1,oe(t)}#l(t){this.#i._focusEventsAllowed=!0,oe(t)}#d(t){const i=this.#i._uiManager._signal;t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#l.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",yi,{signal:i})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#i,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",xr.#o[t]),this.#d(s),s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#n.append(s)}get#u(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#d(i),this.#n.append(i,this.#u),this.#a=t}addColorPicker(t){this.#e=t;const i=t.renderButton();this.#d(i),this.#n.append(i,this.#u)}async addEditSignatureButton(t){const i=this.#s=await t.renderEditButton(this.#i);this.#d(i),this.#n.append(i,this.#u)}async addButton(t,i){switch(t){case"colorPicker":this.addColorPicker(i);break;case"altText":await this.addAltText(i);break;case"editSignature":await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){this.#s&&(this.#s.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class Yv{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",yi,{signal:this.#i._signal});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#s(),t}#a(t,i){let s=0,r=0;for(const o of t){const c=o.y+o.height;if(c<s)continue;const u=o.x+(i?o.width:0);if(c>s){r=u,s=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,o]=this.#a(i,s),{style:c}=this.#e||=this.#n();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const i=document.createElement("span");t.append(i),i.className="visuallyHidden",i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#i._signal;t.addEventListener("contextmenu",yi,{signal:s}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:s}),this.#t.append(t)}}function ey(h,t,i){for(const s of i)t.addEventListener(s,h[s].bind(h))}class Xv{#t=0;get id(){return`${Ym}${this.#t++}`}}class Ph{#t=Dh();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return xt(this,"_isSVGFittingCanvas",o)}async#n(t,i){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await ma(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=Ph._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((g,m)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,g()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=m});c.readAsDataURL(r),await d}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){bt(r),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:o}=t;return this.#n(`${i}_${s}_${r}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,i){const s=await i;return this.#n(t,s)}async getFromId(t){this.#i||=new Map;const i=this.#i.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const i=this.#i.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#i||=new Map;const i=this.#i.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class $v{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:i,post:s,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:i,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(c&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const g=this.#n+1;g===this.#i?this.#t.splice(0,1):(this.#n=g,g<this.#t.length&&this.#t.splice(g)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#n];t(),i?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#n];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let i=this.#n;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#n-i),this.#n=i;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class zr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=Ae.platform;for(const[s,r,o={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...c,i)(),o||oe(i))}}class kh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Vv(t),xt(this,"_colors",t)}convert(t){const i=Nh(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((o,c)=>o===i[c]))return kh._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?lt.makeHexColor(...i):t}}class un{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#a=null;#s=null;#o=null;#r=new $v;#h=null;#l=null;#d=0;#u=new Set;#f=null;#g=null;#p=new Set;_editorUndoBar=null;#c=!1;#m=!1;#y=!1;#b=null;#A=null;#S=null;#w=null;#x=!1;#C=null;#M=new Xv;#E=!1;#R=!1;#T=null;#L=null;#O=null;#N=null;#F=null;#_=mt.NONE;#v=new Set;#B=null;#I=null;#j=null;#q=null;#V={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#P=null;#k=null;#G=null;#W=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=un.prototype,i=c=>c.#k.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return xt(this,"_keyboardManager",new zr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#k.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#k.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,s,r,o,c,u,d,g,m,y,v,w,_,E){const C=this._signal=this.#t.signal;this.#k=t,this.#G=i,this.#W=s,this.#a=r,this.#I=o,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:C}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),c._on("setpreference",this.onSetPreference.bind(this),{signal:C}),c._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:C}),this.#st(),this.#lt(),this.#Q(),this.#s=u.annotationStorage,this.#b=u.filterFactory,this.#j=d,this.#w=g||null,this.#c=m,this.#m=y,this.#y=v,this.#F=w||null,this.viewParameters={realScale:ps.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=E!==!1}destroy(){this.#z?.resolve(),this.#z=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#n.values())t.destroy();this.#n.clear(),this.#i.clear(),this.#p.clear(),this.#N?.clear(),this.#e=null,this.#v.clear(),this.#r.destroy(),this.#a?.destroy(),this.#I?.destroy(),this.#C?.hide(),this.#C=null,this.#O?.destroy(),this.#O=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#F}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return xt(this,"hcmFilter",this.#j?this.#b.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return xt(this,"direction",getComputedStyle(this.#k).direction)}get highlightColors(){return xt(this,"highlightColors",this.#w?new Map(this.#w.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=t}setMainHighlightColorPicker(t){this.#O=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=i;break}}onPageChanging({pageNumber:t}){this.#d=t-1}focusMainContainer(){this.#k.focus()}findParent(t,i){for(const s of this.#n.values()){const{x:r,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=o&&i<=o+u)return s}return null}disableUserSelect(t=!1){this.#G.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ps.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#X({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#K(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#n.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:c}=i,u=i.toString(),g=this.#X(i).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;i.empty();const y=this.#K(g),v=this.#_===mt.NONE,w=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:c,text:u}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(mt.HIGHLIGHT,w);return}w()}#it(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#X(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#C||=new Yv(this),this.#C.show(s,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#W;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#nt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#B&&(this.#C?.hide(),this.#B=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#B)return;const r=this.#X(t).closest(".textLayer");if(!r){this.#B&&(this.#C?.hide(),this.#B=null,this.#D({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#B=i,this.#D({hasSelectedText:!0}),!(this.#_!==mt.HIGHLIGHT&&this.#_!==mt.NONE)&&(this.#_===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#_===mt.HIGHLIGHT?this.#K(r):null;o?.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=g=>{g.type==="pointerup"&&g.button!==0||(c.abort(),o?.toggleDrawing(!0),g.type==="pointerup"&&this.#$("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}}#$(t=""){this.#_===mt.HIGHLIGHT?this.highlightSelection(t):this.#c&&this.#it()}#st(){document.addEventListener("selectionchange",this.#nt.bind(this),{signal:this._signal})}#at(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#rt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#$("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#v)if(i.div.contains(t)){this.#L=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,i]=this.#L;this.#L=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#Q(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ot(){this.#T?.abort(),this.#T=null}#Z(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#J(){this.#h?.abort(),this.#h=null}#lt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#Q(),this.#Z()}removeEditListeners(){this.#ot(),this.#J()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#g)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#g)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#v){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const c of this.#g)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){bt(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of s){const g=await r.deserialize(d);if(!g)return;o.push(g)}const c=()=>{for(const d of o)this.#tt(d);this.#et(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){bt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==mt.NONE&&!this.isEditorHandlingKeyboard&&un._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#$("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(t){Object.entries(t).some(([s,r])=>this.#V[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#V,t)}),this.#_===mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Rt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#at(),this.#Z(),this.#D({isEditing:this.#_!==mt.NONE,isEmpty:this.#Y(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#rt(),this.#J(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#g){this.#g=t;for(const i of this.#g)this.#H(i.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#n.get(this.#d)}getLayer(t){return this.#n.get(t)}get currentPageIndex(){return this.#d}addLayer(t){this.#n.set(t.pageIndex,t),this.#E?t.enable():t.disable()}removeLayer(t){this.#n.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1){if(this.#_!==t&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#l?.commitOrRemove(),this.#_=t,t===mt.NONE){this.setEditingState(!1),this.#ut(),this._editorUndoBar?.hide(),this.#z.resolve();return}t===mt.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#ct(),this.unselectAll();for(const o of this.#n.values())o.updateMode(t);if(!i){s&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const o of this.#i.values())o.annotationElementId===i||o.id===i?(this.setSelected(o),r&&o.enterInEditMode()):o.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#g){switch(t){case Rt.CREATE:this.currentLayer.addNewEditor(i);return;case Rt.HIGHLIGHT_DEFAULT_COLOR:this.#O?.updateColor(i);break;case Rt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,i),this.showAllEditors("highlight",i);break}for(const s of this.#v)s.updateParams(t,i);for(const s of this.#g)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#q?.get(Rt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#H([[Rt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#R!==t){this.#R=t;for(const i of this.#n.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ct(){if(!this.#E){this.#E=!0;const t=[];for(const i of this.#n.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#ut(){if(this.unselectAll(),this.#E){this.#E=!1;for(const t of this.#n.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const i=[];for(const s of this.#i.values())s.pageIndex===t&&i.push(s);return i}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#N?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#u.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#u.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#u.has(t)}removeDeletedAnnotationElement(t){this.#u.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#tt(t){const i=this.#n.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#ht(){let t=null;for(t of this.#v);return t}updateUI(t){this.#ht===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#v.has(t)){this.#v.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#v.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#l?.commitOrRemove();for(const i of this.#v)i!==t&&i.unselect();this.#v.clear(),this.#v.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#v.has(t)}get firstSelectedEditor(){return this.#v.values().next().value}unselect(t){t.unselect(),this.#v.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#v.size!==0}get isEnterHandled(){return this.#v.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#D({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Y()}),this._editorUndoBar?.hide()}redo(){this.#r.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#Y()})}addCommands(t){this.#r.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Y()})}cleanUndoStack(t){this.#r.cleanType(t)}#Y(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#v],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#tt(o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#et(t){for(const i of this.#v)i.unselect();this.#v.clear();for(const i of t)i.isEmpty()||(this.#v.add(i),i.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#v)t.commit();this.#et(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#_!==mt.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const t of this.#v)t.unselect();this.#v.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=t,this.#U[1]+=i;const[r,o]=this.#U,c=[...this.#v],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of c)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const t of this.#v)this.#f.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const t=this.#f;this.#f=null;let i=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,i||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(r,o,c,u)=>{if(this.#i.has(r.id)){const d=this.#n.get(u);d?r._setParentAndPosition(d,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)s(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)s(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#f)for(const s of this.#f.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#v.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#_}get imageManager(){return xt(this,"imageManager",new Ph)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let g=0,m=i.rangeCount;g<m;g++)if(!t.contains(i.getRangeAt(g).commonAncestorContainer))return null;const{x:s,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(g,m,y,v)=>({x:(m-r)/c,y:1-(g+y-s)/o,width:v/c,height:y/o});break;case"180":u=(g,m,y,v)=>({x:1-(g+y-s)/o,y:1-(m+v-r)/c,width:y/o,height:v/c});break;case"270":u=(g,m,y,v)=>({x:1-(m+v-r)/c,y:(g-s)/o,width:v/c,height:y/o});break;default:u=(g,m,y,v)=>({x:(g-s)/o,y:(m-r)/c,width:y/o,height:v/c});break}const d=[];for(let g=0,m=i.rangeCount;g<m;g++){const y=i.getRangeAt(g);if(!y.collapsed)for(const{x:v,y:w,width:_,height:E}of y.getClientRects())_===0||E===0||d.push(u(v,w,_,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#_===mt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#N?.get(t);r&&(r.setCanvas(i,s),this.#N.delete(t))}addMissingCanvas(t,i){(this.#N||=new Map).set(t,i)}}class zi{#t=null;#e=!1;#i=null;#n=null;#a=null;#s=null;#o=!1;#r=null;#h=null;#l=null;#d=null;#u=!1;static#f=null;static _l10n=null;constructor(t){this.#h=t,this.#u=t._uiManager.useNewAltTextFlow,zi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){zi._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#n=document.createElement("span");t.append(i),this.#u?(t.classList.add("new"),t.setAttribute("data-l10n-id",zi.#f.missing),i.setAttribute("data-l10n-id",zi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#h._uiManager._signal;t.addEventListener("contextmenu",yi,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const r=o=>{o.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#u&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#o=!0,r(o))},{signal:s}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#u?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#u?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await zi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#u||this.#t){this.#r?.remove(),this.#r=null;return}if(!this.#r){const i=this.#r=document.createElement("div");i.className="noAltTextBadge",this.#h.div.append(i)}this.#r.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:o=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#r?.remove(),this.#r=null}async#p(){const t=this.#i;if(!t)return;if(this.#u){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",zi.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",zi.#f[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#h.id}`;const r=100,o=this.#h._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#a.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#h.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Br{#t;#e=!1;#i=null;#n;#a;#s;#o;#r=null;#h;#l=null;#d;#u=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#i=s,this.#n=i,this.#a=r,this.#s=o,this.#o=c,this.#d=new AbortController,this.#h=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#h})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/xi.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#r)return;const r=this.#r=new AbortController,o=AbortSignal.any([this.#h,r.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},d=g=>{g.pointerType==="touch"&&(this.#r?.abort(),this.#r=null)};c.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(oe(g),d(g))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!this.#u){this.#u=new AbortController;const r=AbortSignal.any([this.#h,this.#u.signal]),o=this.#t,c={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),c);const u=this.#p.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",oe,c),o.addEventListener("pointermove",oe,c),o.addEventListener("pointercancel",oe,c),o.addEventListener("pointerup",oe,c),this.#a?.()}if(oe(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;oe(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:o}=i,{screenX:c,screenY:u}=s,d=this.#l,{touch0X:g,touch0Y:m,touch1X:y,touch1Y:v}=d,w=y-g,_=v-m,E=c-r,C=u-o,R=Math.hypot(E,C)||1,L=Math.hypot(w,_)||1;if(!this.#e&&Math.abs(L-R)<=Br.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=c,d.touch1Y=u,!this.#e){this.#e=!0;return}const D=[(r+c)/2,(o+u)/2];this.#s?.(D,L,R)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#o?.()),this.#l&&(oe(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#r?.abort(),this.#r=null}}class ht{#t=null;#e=null;#i=null;#n=!1;#a=null;#s="";#o=!1;#r=null;#h=null;#l=null;#d=null;#u="";#f=!1;#g=null;#p=!1;#c=!1;#m=!1;#y=null;#b=0;#A=0;#S=null;#w=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#C=ht._zIndex++;static _borderLineWidth=-1;static _colorManager=new kh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ht.prototype._resizeWithKeyboard,i=un.TRANSLATE_SMALL,s=un.TRANSLATE_BIG;return xt(this,"_resizerKeyboardManager",new zr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ht.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new Wv({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(ht._l10n??=t,ht._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ht._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ht._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Gt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(t){this.#x=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#G(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[o,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/o,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#M([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#M(this.parentDimensions,t,i)}translateInPage(t,i){this.#g||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#g||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,g]=this.getBaseTranslation();c+=d,u+=g;const{style:m}=s;m.left=`${(100*c).toFixed(2)}%`,m.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#g&&(this.#g[0]!==this.x||this.#g[1]!==this.y)}get _hasBeenResized(){return!!this.#g&&(this.#g[2]!==this.width||this.#g[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=ht,r=s/t,o=s/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:o,y:c,width:u,height:d}=this;if(u*=s,d*=r,o*=s,c*=r,this._mustFixPosition)switch(t){case 0:o=Me(o,0,s-u),c=Me(c,0,r-d);break;case 90:o=Me(o,0,s-d),c=Me(c,u,r);break;case 180:o=Me(o,u,s),c=Me(c,d,r);break;case 270:o=Me(o,d,s),c=Me(c,0,r-u);break}this.x=o/=s,this.y=c/=r;const[g,m]=this.getBaseTranslation();o+=g,c+=m,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#E(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return ht.#E(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return ht.#E(t,i,360-this.parentRotation)}#R(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(t,i){const[s,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/s).toFixed(2)}%`,this.#o||(o.height=`${(100*i/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:i,width:s}=t,r=s.endsWith("%"),o=!this.#o&&i.endsWith("%");if(r&&o)return;const[c,u]=this.parentDimensions;r||(t.width=`${(100*parseFloat(s)/c).toFixed(2)}%`),!this.#o&&!o&&(t.height=`${(100*parseFloat(i)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#r.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#L.bind(this,s),{signal:i}),r.addEventListener("contextmenu",yi,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#r)}#L(t,i){i.preventDefault();const{isMac:s}=Ae.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#h=[i.screenX,i.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#F.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",oe,{passive:!1,signal:c}),window.addEventListener("contextmenu",yi,{signal:c}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const g=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#N()};window.addEventListener("pointerup",g,{signal:c}),window.addEventListener("blur",g,{signal:c})}#O(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i;const[o,c]=this.parentDimensions;this.setDims(o*s,c*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#N(){if(!this.#l)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#l;this.#l=null;const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===i&&u===s&&d===r||this.addCommands({cmd:this.#O.bind(this,o,c,u,d),undo:this.#O.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#F(t,i){const[s,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,g=ht.MIN_SIZE/s,m=ht.MIN_SIZE/r,y=this.#R(this.rotation),v=(k,j)=>[y[0]*k+y[2]*j,y[1]*k+y[3]*j],w=this.#R(360-this.rotation),_=(k,j)=>[w[0]*k+w[2]*j,w[1]*k+w[3]*j];let E,C,R=!1,L=!1;switch(t){case"topLeft":R=!0,E=(k,j)=>[0,0],C=(k,j)=>[k,j];break;case"topMiddle":E=(k,j)=>[k/2,0],C=(k,j)=>[k/2,j];break;case"topRight":R=!0,E=(k,j)=>[k,0],C=(k,j)=>[0,j];break;case"middleRight":L=!0,E=(k,j)=>[k,j/2],C=(k,j)=>[0,j/2];break;case"bottomRight":R=!0,E=(k,j)=>[k,j],C=(k,j)=>[0,0];break;case"bottomMiddle":E=(k,j)=>[k/2,j],C=(k,j)=>[k/2,0];break;case"bottomLeft":R=!0,E=(k,j)=>[0,j],C=(k,j)=>[k,0];break;case"middleLeft":L=!0,E=(k,j)=>[0,j/2],C=(k,j)=>[k,j/2];break}const D=E(u,d),b=C(u,d);let S=v(...b);const T=ht._round(o+S[0]),M=ht._round(c+S[1]);let N=1,B=1,Y,$;if(i.fromKeyboard)({deltaX:Y,deltaY:$}=i);else{const{screenX:k,screenY:j}=i,[et,pt]=this.#h;[Y,$]=this.screenToPageTranslation(k-et,j-pt),this.#h[0]=k,this.#h[1]=j}if([Y,$]=_(Y/s,$/r),R){const k=Math.hypot(u,d);N=B=Math.max(Math.min(Math.hypot(b[0]-D[0]-Y,b[1]-D[1]-$)/k,1/u,1/d),g/u,m/d)}else L?N=Me(Math.abs(b[0]-D[0]-Y),g,1)/u:B=Me(Math.abs(b[1]-D[1]-$),m,1)/d;const J=ht._round(u*N),nt=ht._round(d*B);S=v(...C(J,nt));const tt=T-S[0],gt=M-S[1];this.#g||=[this.x,this.y,this.width,this.height],this.width=J,this.height=nt,this.x=tt,this.y=gt,this.setDims(s*J,r*nt),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new xr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(zi.initialize(ht._l10n),this.#i=new zi(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#n?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#q();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),ey(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#w||=new Br({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#_.bind(this),onPinching:this.#v.bind(this),onPinchEnd:this.#B.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#_(){this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#v(t,i,s){let o=.7*(s/i)+1-.7;if(o===1)return;const c=this.#R(this.rotation),u=(T,M)=>[c[0]*T+c[2]*M,c[1]*T+c[3]*M],[d,g]=this.parentDimensions,m=this.x,y=this.y,v=this.width,w=this.height,_=ht.MIN_SIZE/d,E=ht.MIN_SIZE/g;o=Math.max(Math.min(o,1/v,1/w),_/v,E/w);const C=ht._round(v*o),R=ht._round(w*o);if(C===v&&R===w)return;this.#g||=[m,y,v,w];const L=u(v/2,w/2),D=ht._round(m+L[0]),b=ht._round(y+L[1]),S=u(C/2,R/2);this.x=D-S[0],this.y=b-S[1],this.width=C,this.height=R,this.setDims(d*C,g*R),this.fixAndSetPosition(),this._onResizing()}#B(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#N()}pointerdown(t){const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#j(t);return}this.#I(t)}#I(t){const{isMac:i}=Ae.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#j(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:o},u=g=>{r.abort(),this.#a=null,this.#f=!1,this._uiManager.endDragSession()||this.#I(g),s&&this._onStopDragging()};i&&(this.#b=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#s=t.pointerType,window.addEventListener("pointermove",g=>{s||(s=!0,this._onStartDragging());const{clientX:m,clientY:y,pointerId:v}=g;if(v!==this.#a){oe(g);return}const[w,_]=this.screenToPageTranslation(m-this.#b,y-this.#A);this.#b=m,this.#A=y,this._uiManager.dragSelectedEditors(w,_)},c),window.addEventListener("touchmove",oe,c),window.addEventListener("pointerdown",g=>{g.pointerType===this.#s&&(this.#w||g.isPrimary)&&u(g),oe(g)},c));const d=g=>{if(!this.#a||this.#a===g.pointerId){u(g);return}oe(g)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,g=t/r,m=i/r,y=this.x*o,v=this.y*c,w=this.width*o,_=this.height*c;switch(s){case 0:return[y+g+u,c-v-m-_+d,y+g+w+u,c-v-m+d];case 90:return[y+m+u,c-v+g+d,y+m+_+u,c-v+g+w+d];case 180:return[y-g-w+u,c-v+m+d,y-g+u,c-v+m+_+d];case 270:return[y-m-_+u,c-v-g-w+d,y-m+u,c-v-g+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,o,c]=t,u=o-s,d=c-r;switch(this.rotation){case 0:return[s,i-c,u,d];case 90:return[s,i-r,d,u];case 180:return[o,i-r,u,d];case 270:return[o,i-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return i<c&&r>0&&t<o&&s>0}#q(){if(this.#d||!this.div)return;this.#d=new AbortController;const t=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#q()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){Gt("An editor must be serializable")}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,c]=r.pageDimensions,[u,d,g,m]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=d/c,r.width=g/o,r.height=m/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#G(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#w?.destroy(),this.#w=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#r.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#r.children;if(!this.#e){this.#e=Array.from(i);const c=this.#V.bind(this),u=this.#U.bind(this),d=this._uiManager._signal;for(const g of this.#e){const m=g.getAttribute("data-resizer-name");g.setAttribute("role","spinbutton"),g.addEventListener("keydown",c,{signal:d}),g.addEventListener("blur",u,{signal:d}),g.addEventListener("focus",this.#P.bind(this,m),{signal:d}),g.setAttribute("data-l10n-id",ht._l10nResizer[m])}}const s=this.#e[0];let r=0;for(const c of i){if(c===s)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#r.append(this.#r.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#r.firstChild.before(this.#r.lastChild);let c=0;for(const u of i){const g=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ht._l10nResizer[g])}}this.#k(0),this.#m=!0,this.#r.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){ht._resizerKeyboardManager.exec(this,t)}#U(t){this.#m&&t.relatedTarget?.parentNode!==this.#r&&this.#G()}#P(t){this.#u=this.#m?t:""}#k(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#m&&this.#F(this.#u,{deltaX:t,deltaY:i,fromKeyboard:!0})}#G(){this.#m=!1,this.#k(-1),this.#N()}_stopResizingWithKeyboard(){this.#G(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0))}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,i){this.#o=!0;const s=t/i,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},ht._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(t){let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class Wv extends ht{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const dm=3285377520,pi=4294901760,Pi=65535;class iy{constructor(t){this.h1=t?t&4294967295:dm,this.h2=t?t&4294967295:dm}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let E=0,C=t.length;E<C;E++){const R=t.charCodeAt(E);R<=255?i[s++]=R:(i[s++]=R>>>8,i[s++]=R&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,o=s-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,d=0,g=this.h1,m=this.h2;const y=3432918353,v=461845907,w=y&Pi,_=v&Pi;for(let E=0;E<r;E++)E&1?(u=c[E],u=u*y&pi|u*w&Pi,u=u<<15|u>>>17,u=u*v&pi|u*_&Pi,g^=u,g=g<<13|g>>>19,g=g*5+3864292196):(d=c[E],d=d*y&pi|d*w&Pi,d=d<<15|d>>>17,d=d*v&pi|d*_&Pi,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&pi|u*w&Pi,u=u<<15|u>>>17,u=u*v&pi|u*_&Pi,r&1?g^=u:m^=u}this.h1=g,this.h2=m}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&pi|t*36045&Pi,i=i*4283543511&pi|((i<<16|t>>>16)*2950163797&pi)>>>16,t^=i>>>1,t=t*444984403&pi|t*60499&Pi,i=i*3301882366&pi|((i<<16|t>>>16)*3120437893&pi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const mh=Object.freeze({map:null,hash:"",transfer:void 0});class zh{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of this.#i.values())if(i instanceof ht)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[o,c]of Object.entries(i))s[o]!==c&&(r=!0,s[o]=c);else r=!0,this.#i.set(t,i);r&&this.#n(),i instanceof ht&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(t){return this.#i.has(t)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ny(this)}get serializable(){if(this.#i.size===0)return mh;const t=new Map,i=new iy,s=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof ht?u.serialize(!1,r):u;d&&(t.set(c,d),i.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:mh}get editorStats(){let t=null;const i=new Map;for(const s of this.#i.values()){if(!(s instanceof ht))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:o}=r;i.has(o)||i.set(o,Object.getPrototypeOf(s).constructor),t||=Object.create(null);const c=t[o]||=new Map;for(const[u,d]of Object.entries(r)){if(u==="type")continue;let g=c.get(u);g||(g=new Map,c.set(u,g));const m=g.get(d)??0;g.set(d,m+1)}}for(const[s,r]of i)t[s]=r.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const i of this.#i.values())!(i instanceof ht)||!i.annotationElementId||!i.serialize()||t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class ny extends zh{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:s,transfer:r}}get print(){Gt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return xt(this,"modifiedIds",{ids:new Set,hash:""})}}class Kv{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(ge(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:c}=t,u=new FontFace(r,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{bt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Gt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw bt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return xt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return xt(this,"isSyncFontLoadingSupported",Ne||Ae.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(ge(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return xt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(b,S){return b.charCodeAt(S)<<24|b.charCodeAt(S+1)<<16|b.charCodeAt(S+2)<<8|b.charCodeAt(S+3)&255}function r(b,S,T,M){const N=b.substring(0,S),B=b.substring(S+T);return N+M+B}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let g=0;function m(b,S){if(++g>30){bt("Load test font never loaded."),S();return}if(d.font="30px "+b,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(m.bind(null,b,S))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,y.length,y);const _=16,E=1482184792;let C=s(v,_);for(o=0,c=y.length-3;o<c;o+=4)C=C-E+s(y,o)|0;o<y.length&&(C=C-E+s(y+"XXX",o)|0),v=r(v,_,4,Iv(C));const R=`url(data:font/opentype;base64,${btoa(v)});`,L=`@font-face {font-family:"${y}";src:${R}}`;this.insertRule(L);const D=this._document.createElement("div");D.style.visibility="hidden",D.style.width=D.style.height="10px",D.style.position="absolute",D.style.top=D.style.left="0px";for(const b of[t.loadedName,y]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=b,D.append(S)}this._document.body.append(D),m(y,()=>{D.remove(),i.complete()})}}class Qv{constructor(t,i=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Qm(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(c){bt(`getPathGenerator - ignoring character: "${c}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=o}}function Zv(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Ne)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Jv(h){if(Ne&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return Nr(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function cl(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const yh=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,tA=h=>typeof h=="object"&&typeof h?.name=="string",sy=Gv.bind(null,yh,tA);class eA{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){bt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const ul={DATA:1,ERROR:2},fe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function fm(){}function qe(h){if(h instanceof cn||h instanceof Al||h instanceof cm||h instanceof Cr||h instanceof ah)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Gt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new cn(h.message);case"InvalidPDFException":return new Al(h.message);case"PasswordException":return new cm(h.message,h.code);case"ResponseException":return new Cr(h.message,h.status,h.missing);case"UnknownErrorException":return new ah(h.message,h.details)}return new ah(h.message,h.toString())}class Sr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===ul.DATA)r.resolve(t.data);else if(t.callback===ul.ERROR)r.reject(qe(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(c){o.postMessage({sourceName:s,targetName:r,callback:ul.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:r,callback:ul.ERROR,callbackId:t.callbackId,reason:qe(c)})});return}if(t.streamId){this.#i(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,i,s,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:g=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:g,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:i,desiredSize:g.desiredSize},r),m.promise},pull:g=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:c,targetName:u,stream:fe.PULL,streamId:o,desiredSize:g.desiredSize}),m.promise},cancel:g=>{ge(g instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:fe.CANCEL,streamId:o,reason:qe(g)}),m.promise}},s)}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(g,m=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:r,stream:fe.ENQUEUE,streamId:i,chunk:g},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:fe.CLOSE,streamId:i}),delete c.streamSinks[i])},error(g){ge(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:r,stream:fe.ERROR,streamId:i,reason:qe(g)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:fe.START_COMPLETE,streamId:i,success:!0})},function(g){o.postMessage({sourceName:s,targetName:r,stream:fe.START_COMPLETE,streamId:i,reason:qe(g)})})}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case fe.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(qe(t.reason));break;case fe.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(qe(t.reason));break;case fe.PULL:if(!u){o.postMessage({sourceName:s,targetName:r,stream:fe.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||fm).then(function(){o.postMessage({sourceName:s,targetName:r,stream:fe.PULL_COMPLETE,streamId:i,success:!0})},function(g){o.postMessage({sourceName:s,targetName:r,stream:fe.PULL_COMPLETE,streamId:i,reason:qe(g)})});break;case fe.ENQUEUE:if(ge(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case fe.CLOSE:if(ge(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,i);break;case fe.ERROR:ge(c,"error should have stream controller"),c.controller.error(qe(t.reason)),this.#a(c,i);break;case fe.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(qe(t.reason)),this.#a(c,i);break;case fe.CANCEL:if(!u)break;const d=qe(t.reason);Promise.try(u.onCancel||fm,d).then(function(){o.postMessage({sourceName:s,targetName:r,stream:fe.CANCEL_COMPLETE,streamId:i,success:!0})},function(g){o.postMessage({sourceName:s,targetName:r,stream:fe.CANCEL_COMPLETE,streamId:i,reason:qe(g)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#a(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class ay{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Gt("Abstract method `_createCanvas` called.")}}class iA extends ay{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class ry{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class gm extends ry{async _fetch(t){const i=await ma(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Nr(i)}}class oy{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,o){return"none"}destroy(t=!1){}}class nA extends oy{#t;#e;#i;#n;#a;#s;#o=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#n=t,this.#a=i}get#r(){return this.#e||=new Map}get#h(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#a.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#a.createElementNS(rn,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#a.createElementNS(rn,"defs"),t.append(s),s.append(this.#i),this.#a.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],g=new Array(256);for(let y=0;y<256;y++)g[y]=d[y]/255;const m=g.join(",");return[m,m,m]}const[i,s,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,c[d]=s[d]/255,u[d]=r[d]/255;return[o.join(","),c.join(","),u.join(",")]}#u(t){if(this.#t===void 0){this.#t="";const i=this.#a.URL;i!==this.#a.baseURI&&(kr(i)?bt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Mh(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#r.get(t);if(i)return i;const[s,r,o]=this.#d(t),c=t.length===1?s:`${s}${r}${o}`;if(i=this.#r.get(c),i)return this.#r.set(t,i),i;const u=`g_${this.#n}_transfer_map_${this.#o++}`,d=this.#u(u);this.#r.set(t,d),this.#r.set(c,d);const g=this.#p(u);return this.#m(s,r,o,g),d}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let o=this.#h.get(r);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#h.set(r,o)),!t||!i))return o.url;const c=this.#b(t);t=lt.makeHexColor(...c);const u=this.#b(i);if(i=lt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let w=0;w<=255;w++){const _=w/255;d[w]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const g=d.join(","),m=`g_${this.#n}_hcm_filter`,y=o.filter=this.#p(m);this.#m(g,g,g,y),this.#g(y);const v=(w,_)=>{const E=c[w]/255,C=u[w]/255,R=new Array(_+1);for(let L=0;L<=_;L++)R[L]=E+L/_*(C-E);return R.join(",")};return this.#m(v(0,5),v(1,5),v(2,5),y),o.url=this.#u(m),o.url}addAlphaFilter(t){let i=this.#r.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#r.get(r),i)return this.#r.set(t,i),i;const o=`g_${this.#n}_alpha_map_${this.#o++}`,c=this.#u(o);this.#r.set(t,c),this.#r.set(r,c);const u=this.#p(o);return this.#y(s,u),c}addLuminosityFilter(t){let i=this.#r.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#r.get(r),i)return this.#r.set(t,i),i;const o=`g_${this.#n}_luminosity_map_${this.#o++}`,c=this.#u(o);this.#r.set(t,c),this.#r.set(r,c);const u=this.#p(o);return this.#f(u),t&&this.#y(s,u),c}addHighlightHCMFilter(t,i,s,r,o){const c=`${i}-${s}-${r}-${o}`;let u=this.#h.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#h.set(t,u)),!i||!s))return u.url;const[d,g]=[i,s].map(this.#b.bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[v,w]=[r,o].map(this.#b.bind(this));y<m&&([m,y,v,w]=[y,m,w,v]),this.#l.style.color="";const _=(R,L,D)=>{const b=new Array(256),S=(y-m)/D,T=R/255,M=(L-R)/(255*D);let N=0;for(let B=0;B<=D;B++){const Y=Math.round(m+B*S),$=T+B*M;for(let J=N;J<=Y;J++)b[J]=$;N=Y+1}for(let B=N;B<256;B++)b[B]=b[N-1];return b.join(",")},E=`g_${this.#n}_hcm_${t}_filter`,C=u.filter=this.#p(E);return this.#g(C),this.#m(_(v[0],w[0],5),_(v[1],w[1],5),_(v[2],w[2],5),C),u.url=this.#u(E),u.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#o=0)}#f(t){const i=this.#a.createElementNS(rn,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#g(t){const i=this.#a.createElementNS(rn,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#p(t){const i=this.#a.createElementNS(rn,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#c(t,i,s){const r=this.#a.createElementNS(rn,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#m(t,i,s,r){const o=this.#a.createElementNS(rn,"feComponentTransfer");r.append(o),this.#c(o,"feFuncR",t),this.#c(o,"feFuncG",i),this.#c(o,"feFuncB",s)}#y(t,i){const s=this.#a.createElementNS(rn,"feComponentTransfer");i.append(s),this.#c(s,"feFuncA",t)}#b(t){return this.#l.style.color=t,Nh(getComputedStyle(this.#l).getPropertyValue("color"))}}class ly{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class pm extends ly{async _fetch(t){const i=await ma(t,"arraybuffer");return new Uint8Array(i)}}class cy{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Gt("Abstract method `_fetch` called.")}}class mm extends cy{async _fetch(t){const i=await ma(t,"arraybuffer");return new Uint8Array(i)}}Ne&&bt("Please use the `legacy` build in Node.js environments.");async function Bh(h){const i=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(i)}class sA extends oy{}class aA extends ay{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class rA extends ry{async _fetch(t){return Bh(t)}}class oA extends ly{async _fetch(t){return Bh(t)}}class lA extends cy{async _fetch(t){return Bh(t)}}const Te={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bh(h,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),h.clip(r)}class Ih{isModifyingCurrentTransform(){return!1}getPattern(){Gt("Abstract method `getPattern` called.")}}class cA extends Ih{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)i.addColorStop(s[0],s[1]);return i}getPattern(t,i,s,r){let o;if(r===Te.STROKE||r===Te.FILL){const c=i.current.getClippedPathBoundingBox(r,Zt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,g=i.cachedCanvases.getCanvas("pattern",u,d),m=g.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),s=lt.transform(s,[1,0,0,1,c[0],c[1]]),m.transform(...i.baseTransform),this.matrix&&m.transform(...this.matrix),bh(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(g.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else bh(t,this._bbox),o=this._createGradient(t);return o}}function lh(h,t,i,s,r,o,c,u){const d=t.coords,g=t.colors,m=h.data,y=h.width*4;let v;d[i+1]>d[s+1]&&(v=i,i=s,s=v,v=o,o=c,c=v),d[s+1]>d[r+1]&&(v=s,s=r,r=v,v=c,c=u,u=v),d[i+1]>d[s+1]&&(v=i,i=s,s=v,v=o,o=c,c=v);const w=(d[i]+t.offsetX)*t.scaleX,_=(d[i+1]+t.offsetY)*t.scaleY,E=(d[s]+t.offsetX)*t.scaleX,C=(d[s+1]+t.offsetY)*t.scaleY,R=(d[r]+t.offsetX)*t.scaleX,L=(d[r+1]+t.offsetY)*t.scaleY;if(_>=L)return;const D=g[o],b=g[o+1],S=g[o+2],T=g[c],M=g[c+1],N=g[c+2],B=g[u],Y=g[u+1],$=g[u+2],J=Math.round(_),nt=Math.round(L);let tt,gt,k,j,et,pt,At,P;for(let V=J;V<=nt;V++){if(V<C){const rt=V<_?0:(_-V)/(_-C);tt=w-(w-E)*rt,gt=D-(D-T)*rt,k=b-(b-M)*rt,j=S-(S-N)*rt}else{let rt;V>L?rt=1:C===L?rt=0:rt=(C-V)/(C-L),tt=E-(E-R)*rt,gt=T-(T-B)*rt,k=M-(M-Y)*rt,j=N-(N-$)*rt}let Q;V<_?Q=0:V>L?Q=1:Q=(_-V)/(_-L),et=w-(w-R)*Q,pt=D-(D-B)*Q,At=b-(b-Y)*Q,P=S-(S-$)*Q;const Z=Math.round(Math.min(tt,et)),ot=Math.round(Math.max(tt,et));let ut=y*V+Z*4;for(let rt=Z;rt<=ot;rt++)Q=(tt-rt)/(tt-et),Q<0?Q=0:Q>1&&(Q=1),m[ut++]=gt-(gt-pt)*Q|0,m[ut++]=k-(k-At)*Q|0,m[ut++]=j-(j-P)*Q|0,m[ut++]=255}}function uA(h,t,i){const s=t.coords,r=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,g=u-1;for(o=0;o<d;o++){let m=o*u;for(let y=0;y<g;y++,m++)lh(h,i,s[m],s[m+1],s[m+u],r[m],r[m+1],r[m+u]),lh(h,i,s[m+u+1],s[m+1],s[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(o=0,c=s.length;o<c;o+=3)lh(h,i,s[o],s[o+1],s[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class hA extends Ih{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),g=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(g*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),w=g/y,_=m/v,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/w,scaleY:1/_},C=y+4,R=v+4,L=s.getCanvas("mesh",C,R),D=L.context,b=D.createImageData(y,v);if(i){const T=b.data;for(let M=0,N=T.length;M<N;M+=4)T[M]=i[0],T[M+1]=i[1],T[M+2]=i[2],T[M+3]=255}for(const T of this._figures)uA(b,T,E);return D.putImageData(b,2,2),{canvas:L.canvas,offsetX:u-2*w,offsetY:d-2*_,scaleX:w,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){bh(t,this._bbox);const o=new Float32Array(2);if(r===Te.SHADING)lt.singularValueDecompose2dScale(Zt(t),o);else if(this.matrix){lt.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;lt.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else lt.singularValueDecompose2dScale(i.baseTransform,o);const c=this._createMeshCanvas(o,r===Te.SHADING?null:this._background,i.cachedCanvases);return r!==Te.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class dA extends Ih{getPattern(){return"hotpink"}}function fA(h){switch(h[0]){case"RadialAxial":return new cA(h);case"Mesh":return new hA(h);case"Dummy":return new dA}throw new Error(`Unknown IR type: ${h[0]}`)}const ym={COLORED:1,UNCOLORED:2};class Hh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:i,operatorList:s,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:g}=this;d=Math.abs(d),g=Math.abs(g),xl("TilingType: "+o);const m=i[0],y=i[1],v=i[2],w=i[3],_=v-m,E=w-y,C=new Float32Array(2);lt.singularValueDecompose2dScale(this.matrix,C);const[R,L]=C;lt.singularValueDecompose2dScale(this.baseTransform,C);const D=R*C[0],b=L*C[1];let S=_,T=E,M=!1,N=!1;const B=Math.ceil(d*D),Y=Math.ceil(g*b),$=Math.ceil(_*D),J=Math.ceil(E*b);B>=$?S=d:M=!0,Y>=J?T=g:N=!0;const nt=this.getSizeAndScale(S,this.ctx.canvas.width,D),tt=this.getSizeAndScale(T,this.ctx.canvas.height,b),gt=t.cachedCanvases.getCanvas("pattern",nt.size,tt.size),k=gt.context,j=u.createCanvasGraphics(k);if(j.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(j,r,c),k.translate(-nt.scale*m,-tt.scale*y),j.transform(nt.scale,0,0,tt.scale,0,0),k.save(),this.clipBbox(j,m,y,v,w),j.baseTransform=Zt(j.ctx),j.executeOperatorList(s),j.endDrawing(),k.restore(),M||N){const et=gt.canvas;M&&(S=d),N&&(T=g);const pt=this.getSizeAndScale(S,this.ctx.canvas.width,D),At=this.getSizeAndScale(T,this.ctx.canvas.height,b),P=pt.size,V=At.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",P,V),Z=Q.context,ot=M?Math.floor(_/d):0,ut=N?Math.floor(E/g):0;for(let rt=0;rt<=ot;rt++)for(let Vt=0;Vt<=ut;Vt++)Z.drawImage(et,P*rt,V*Vt,P,V,0,0,P,V);return{canvas:Q.canvas,scaleX:pt.scale,scaleY:At.scale,offsetX:m,offsetY:y}}return{canvas:gt.canvas,scaleX:nt.scale,scaleY:tt.scale,offsetX:m,offsetY:y}}getSizeAndScale(t,i,s){const r=Math.max(Hh.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=r?o=r:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,r,o){const c=r-i,u=o-s;t.ctx.rect(i,s,c,u),lt.axialAlignedBoundingBox([i,s,r,o],Zt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,o=t.current;switch(i){case ym.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=c,r.strokeStyle=o.strokeColor=u;break;case ym.UNCOLORED:r.fillStyle=r.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new Bv(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r){let o=s;r!==Te.SHADING&&(o=lt.transform(o,i.baseTransform),this.matrix&&(o=lt.transform(o,this.matrix)));const c=this.createPatternCanvas(i);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}}function gA({src:h,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Ae.isLittleEndian?4278190080:255,[d,g]=c?[o,u]:[u,o],m=s>>3,y=s&7,v=h.length;i=new Uint32Array(i.buffer);let w=0;for(let _=0;_<r;_++){for(const C=t+m;t<C;t++){const R=t<v?h[t]:255;i[w++]=R&128?g:d,i[w++]=R&64?g:d,i[w++]=R&32?g:d,i[w++]=R&16?g:d,i[w++]=R&8?g:d,i[w++]=R&4?g:d,i[w++]=R&2?g:d,i[w++]=R&1?g:d}if(y===0)continue;const E=t<v?h[t++]:255;for(let C=0;C<y;C++)i[w++]=E&1<<7-C?g:d}return{srcPos:t,destPos:w}}const bm=16,vm=100,pA=15,Am=10,Ve=16,ch=new DOMMatrix,si=new Float32Array(2),la=new Float32Array([1/0,1/0,-1/0,-1/0]);function mA(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},h.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},h.transform=function(i,s,r,o,c,u){t.transform(i,s,r,o,c,u),this.__originalTransform(i,s,r,o,c,u)},h.setTransform=function(i,s,r,o,c,u){t.setTransform(i,s,r,o,c,u),this.__originalSetTransform(i,s,r,o,c,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(i){t.rotate(i),this.__originalRotate(i)},h.clip=function(i){t.clip(i),this.__originalClip(i)},h.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},h.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},h.bezierCurveTo=function(i,s,r,o,c,u){t.bezierCurveTo(i,s,r,o,c,u),this.__originalBezierCurveTo(i,s,r,o,c,u)},h.rect=function(i,s,r,o){t.rect(i,s,r,o),this.__originalRect(i,s,r,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class yA{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function hl(h,t,i,s,r,o,c,u,d,g){const[m,y,v,w,_,E]=Zt(h);if(y===0&&v===0){const L=c*m+_,D=Math.round(L),b=u*w+E,S=Math.round(b),T=(c+d)*m+_,M=Math.abs(Math.round(T)-D)||1,N=(u+g)*w+E,B=Math.abs(Math.round(N)-S)||1;return h.setTransform(Math.sign(m),0,0,Math.sign(w),D,S),h.drawImage(t,i,s,r,o,0,0,M,B),h.setTransform(m,y,v,w,_,E),[M,B]}if(m===0&&w===0){const L=u*v+_,D=Math.round(L),b=c*y+E,S=Math.round(b),T=(u+g)*v+_,M=Math.abs(Math.round(T)-D)||1,N=(c+d)*y+E,B=Math.abs(Math.round(N)-S)||1;return h.setTransform(0,Math.sign(y),Math.sign(v),0,D,S),h.drawImage(t,i,s,r,o,0,0,B,M),h.setTransform(m,y,v,w,_,E),[B,M]}h.drawImage(t,i,s,r,o,c,u,d,g);const C=Math.hypot(m,y),R=Math.hypot(v,w);return[C*d,R*g]}class Sm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ph;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Re.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i){this.clipBox=new Float32Array([0,0,t,i]),this.minMax=la.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Te.FILL,i=null){const s=this.minMax.slice();if(t===Te.STROKE){i||Gt("Stroke bounding box must include transform."),lt.singularValueDecompose2dScale(i,si);const r=si[0]*this.lineWidth/2,o=si[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=lt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(la,0)}getClippedPathBoundingBox(t=Te.FILL,i=null){return lt.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function wm(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%Ve,o=(i-r)/Ve,c=r===0?o:o+1,u=h.createImageData(s,Ve);let d=0,g;const m=t.data,y=u.data;let v,w,_,E;if(t.kind===_r.GRAYSCALE_1BPP){const C=m.byteLength,R=new Uint32Array(y.buffer,0,y.byteLength>>2),L=R.length,D=s+7>>3,b=4294967295,S=Ae.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(_=v<o?Ve:r,g=0,w=0;w<_;w++){const T=C-d;let M=0;const N=T>D?s:T*8-7,B=N&-8;let Y=0,$=0;for(;M<B;M+=8)$=m[d++],R[g++]=$&128?b:S,R[g++]=$&64?b:S,R[g++]=$&32?b:S,R[g++]=$&16?b:S,R[g++]=$&8?b:S,R[g++]=$&4?b:S,R[g++]=$&2?b:S,R[g++]=$&1?b:S;for(;M<N;M++)Y===0&&($=m[d++],Y=128),R[g++]=$&Y?b:S,Y>>=1}for(;g<L;)R[g++]=0;h.putImageData(u,0,v*Ve)}}else if(t.kind===_r.RGBA_32BPP){for(w=0,E=s*Ve*4,v=0;v<o;v++)y.set(m.subarray(d,d+E)),d+=E,h.putImageData(u,0,w),w+=Ve;v<c&&(E=s*r*4,y.set(m.subarray(d,d+E)),h.putImageData(u,0,w))}else if(t.kind===_r.RGB_24BPP)for(_=Ve,E=s*_,v=0;v<c;v++){for(v>=o&&(_=r,E=s*_),g=0,w=E;w--;)y[g++]=m[d++],y[g++]=m[d++],y[g++]=m[d++],y[g++]=255;h.putImageData(u,0,v*Ve)}else throw new Error(`bad image kind: ${t.kind}`)}function Em(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%Ve,o=(i-r)/Ve,c=r===0?o:o+1,u=h.createImageData(s,Ve);let d=0;const g=t.data,m=u.data;for(let y=0;y<c;y++){const v=y<o?Ve:r;({srcPos:d}=gA({src:g,srcPos:d,dest:m,width:s,height:v,nonBlackColor:0})),h.putImageData(u,0,y*Ve)}}function gr(h,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function dl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function _m(h,t){if(t)return!0;lt.singularValueDecompose2dScale(h,si);const i=Math.fround(xi.pixelRatio*ps.PDF_TO_CSS_UNITS);return si[0]<=i&&si[1]<=i}const bA=["butt","round","square"],vA=["miter","round","bevel"],AA={},xm={};class ua{constructor(t,i,s,r,o,{optionalContentConfig:c,markedContentStack:u=null},d,g){this.ctx=t,this.current=new Sm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new yA(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=g,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,i=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):i}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Zt(this.compositeCtx))}this.ctx.save(),dl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Zt(this.ctx)}executeOperatorList(t,i,s,r){const o=t.argsArray,c=t.fnArray;let u=i||0;const d=o.length;if(d===u)return u;const g=d-u>Am&&typeof s=="function",m=g?Date.now()+pA:0;let y=0;const v=this.commonObjs,w=this.objs;let _;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,s),u;if(_=c[u],_!==Tr.dependency)this[_].apply(this,o[u]);else for(const E of o[u]){const C=E.startsWith("g_")?v:w;if(!C.has(E))return C.get(E,s),u}if(u++,u===d)return u;if(g&&++y>Am){if(Date.now()>m)return s(),u;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,d=r,g="prescale1",m,y;for(;o>2&&u>1||c>2&&d>1;){let v=u,w=d;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),m=this.cachedCanvases.getCanvas(g,v,w),y=m.context,y.clearRect(0,0,v,w),y.drawImage(t,0,0,u,d,0,0,v,w),t=m.canvas,u=v,d=w,g=g==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const i=this.ctx,{width:s,height:r}=t,o=this.current.fillColor,c=this.current.patternFill,u=Zt(i);let d,g,m,y;if((t.bitmap||t.data)&&t.count>1){const B=t.bitmap||t.data.buffer;g=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(B),d||(d=new Map,this._cachedBitmapsMap.set(B,d));const Y=d.get(g);if(Y&&!c){const $=Math.round(Math.min(u[0],u[2])+u[4]),J=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:Y,offsetX:$,offsetY:J}}m=Y}m||(y=this.cachedCanvases.getCanvas("maskCanvas",s,r),Em(y.context,t));let v=lt.transform(u,[1/s,0,0,-1/r,0,0]);v=lt.transform(v,[1,0,0,1,0,-r]);const w=la.slice();lt.axialAlignedBoundingBox([0,0,s,r],v,w);const[_,E,C,R]=w,L=Math.round(C-_)||1,D=Math.round(R-E)||1,b=this.cachedCanvases.getCanvas("fillCanvas",L,D),S=b.context,T=_,M=E;S.translate(-T,-M),S.transform(...v),m||(m=this._scaleImage(y.canvas,Ni(S)),m=m.img,d&&c&&d.set(g,m)),S.imageSmoothingEnabled=_m(Zt(S),t.interpolate),hl(S,m,0,0,m.width,m.height,0,0,s,r),S.globalCompositeOperation="source-in";const N=lt.transform(Ni(S),[1,0,0,1,-T,-M]);return S.fillStyle=c?o.getPattern(i,this,N,Te.FILL):o,S.fillRect(0,0,s,r),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(g,b.canvas)),{canvas:b.canvas,offsetX:Math.round(T),offsetY:Math.round(M)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=bA[t]}setLineJoin(t){this.ctx.lineJoin=vA[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,i){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=i)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[i,s]of t)switch(i){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,i);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),gr(this.suspendedCtx,o),mA(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),gr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const o=r[0],c=r[1],u=r[2]-o,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(i.context,s,u,d,i.subtype,i.backdrop,i.transferMap,o,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,o,c,u,d,g,m,y){let v=t.canvas,w=d-m,_=g-y;if(c)if(w<0||_<0||w+s>v.width||_+r>v.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,r),R=C.context;R.drawImage(v,-w,-_),R.globalCompositeOperation="destination-atop",R.fillStyle=c,R.fillRect(0,0,s,r),R.globalCompositeOperation="source-over",v=C.canvas,w=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(w,_,s,r),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(w,_,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(d,g,s,r),i.clip(E),i.globalCompositeOperation="destination-in",i.drawImage(v,w,_,s,r,d,g,s,r),i.restore()}save(){this.inSMaskMode&&gr(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&gr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,o,c){this.ctx.transform(t,i,s,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s){let[r]=i;if(!s){r||=i[0]=new Path2D,this[t](r);return}if(!(r instanceof Path2D)){const o=i[0]=new Path2D;for(let c=0,u=r.length;c<u;)switch(r[c++]){case ll.moveTo:o.moveTo(r[c++],r[c++]);break;case ll.lineTo:o.lineTo(r[c++],r[c++]);break;case ll.curveTo:o.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);break;case ll.closePath:o.closePath();break;default:bt(`Unrecognized drawing path operator: ${r[c-1]}`);break}r=o}lt.axialAlignedBoundingBox(s,Zt(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,i=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Ni(s),Te.STROKE),o){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);i&&this.consumePath(t,this.current.getClippedPathBoundingBox(Te.STROKE,Zt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,i=!0){const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const d=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,Ni(s),Te.FILL),d){const g=new Path2D;g.addPath(t,s.getTransform().invertSelf().multiplySelf(d)),t=g}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),c&&s.restore(),i&&this.consumePath(t,u)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=AA}eoClip(){this.pendingClip=xm}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,i=this.ctx;if(t===void 0)return;const s=new Path2D,r=i.getTransform().invertSelf();for(const{transform:o,x:c,y:u,fontSize:d,path:g}of t)s.addPath(g,new DOMMatrix(o).preMultiplySelf(r).translate(c,u).scale(d,-d));i.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,i){const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||ph,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&bt("Invalid font matrix for font "+t),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const o=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${o}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const d=s.italic?"italic":"normal";let g=i;i<bm?g=bm:i>vm&&(g=vm),this.current.fontSizeScale=i/g,this.ctx.font=`${d} ${u} ${g}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,i){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,i){this.setLeading(-i),this.moveText(t,i)}setTextMatrix(t){const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#i(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,o){const c=this.ctx,u=this.current,d=u.font,g=u.textRenderingMode,m=u.fontSize/u.fontSizeScale,y=g&Re.FILL_STROKE_MASK,v=!!(g&Re.ADD_TO_PATH_FLAG),w=u.patternFill&&!d.missingFile,_=u.patternStroke&&!d.missingFile;let E;if((d.disableFontFace||v||w||_)&&(E=d.getPathGenerator(this.commonObjs,t)),d.disableFontFace||w||_){c.save(),c.translate(i,s),c.scale(m,-m);let C;if((y===Re.FILL||y===Re.FILL_STROKE)&&(r?(C=c.getTransform(),c.setTransform(...r),c.fill(this.#i(E,C,r))):c.fill(E)),y===Re.STROKE||y===Re.FILL_STROKE)if(o){C||=c.getTransform(),c.setTransform(...o);const{a:R,b:L,c:D,d:b}=C,S=lt.inverseTransform(o),T=lt.transform([R,L,D,b,0,0],S);lt.singularValueDecompose2dScale(T,si),c.lineWidth*=Math.max(si[0],si[1])/m,c.stroke(this.#i(E,C,o))}else c.lineWidth/=m,c.stroke(E);c.restore()}else(y===Re.FILL||y===Re.FILL_STROKE)&&c.fillText(t,i,s),(y===Re.STROKE||y===Re.FILL_STROKE)&&c.strokeText(t,i,s);v&&(this.pendingTextPaths||=[]).push({transform:Zt(c),x:i,y:s,fontSize:m,path:E})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return xt(this,"isFontSubpixelAAEnabled",s)}showText(t){const i=this.current,s=i.font;if(s.isType3Font)return this.showType3Text(t);const r=i.fontSize;if(r===0)return;const o=this.ctx,c=i.fontSizeScale,u=i.charSpacing,d=i.wordSpacing,g=i.fontDirection,m=i.textHScale*g,y=t.length,v=s.vertical,w=v?1:-1,_=s.defaultVMetrics,E=r*i.fontMatrix[0],C=i.textRenderingMode===Re.FILL&&!s.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),g>0?o.scale(m,-1):o.scale(m,1);let R,L;if(i.patternFill){o.save();const M=i.fillColor.getPattern(o,this,Ni(o),Te.FILL);R=Zt(o),o.restore(),o.fillStyle=M}if(i.patternStroke){o.save();const M=i.strokeColor.getPattern(o,this,Ni(o),Te.STROKE);L=Zt(o),o.restore(),o.strokeStyle=M}let D=i.lineWidth;const b=i.textMatrixScale;if(b===0||D===0){const M=i.textRenderingMode&Re.FILL_STROKE_MASK;(M===Re.STROKE||M===Re.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=b;if(c!==1&&(o.scale(c,c),D/=c),o.lineWidth=D,s.isInvalidPDFjsFont){const M=[];let N=0;for(const B of t)M.push(B.unicode),N+=B.width;o.fillText(M.join(""),0,0),i.x+=N*E*m,o.restore(),this.compose();return}let S=0,T;for(T=0;T<y;++T){const M=t[T];if(typeof M=="number"){S+=w*M*r/1e3;continue}let N=!1;const B=(M.isSpace?d:0)+u,Y=M.fontChar,$=M.accent;let J,nt,tt=M.width;if(v){const k=M.vmetric||_,j=-(M.vmetric?k[1]:tt*.5)*E,et=k[2]*E;tt=k?-k[0]:tt,J=j/c,nt=(S+et)/c}else J=S/c,nt=0;if(s.remeasure&&tt>0){const k=o.measureText(Y).width*1e3/r*c;if(tt<k&&this.isFontSubpixelAAEnabled){const j=tt/k;N=!0,o.save(),o.scale(j,1),J/=j}else tt!==k&&(J+=(tt-k)/2e3*r/c)}if(this.contentVisible&&(M.isInFont||s.missingFile)){if(C&&!$)o.fillText(Y,J,nt);else if(this.paintChar(Y,J,nt,R,L),$){const k=J+r*$.offset.x/c,j=nt-r*$.offset.y/c;this.paintChar($.fontChar,k,j,R,L)}}const gt=v?tt*E-B*g:tt*E+B*g;S+=gt,N&&o.restore()}v?i.y-=S:i.x+=S*m,o.restore(),this.compose()}showType3Text(t){const i=this.ctx,s=this.current,r=s.font,o=s.fontSize,c=s.fontDirection,u=r.vertical?1:-1,d=s.charSpacing,g=s.wordSpacing,m=s.textHScale*c,y=s.fontMatrix||ph,v=t.length,w=s.textRenderingMode===Re.INVISIBLE;let _,E,C,R;if(!(w||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(m,c),_=0;_<v;++_){if(E=t[_],typeof E=="number"){R=u*E*o/1e3,this.ctx.translate(R,0),s.x+=R*m;continue}const L=(E.isSpace?g:0)+d,D=r.charProcOperatorList[E.operatorListId];D?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...y),this.executeOperatorList(D),this.restore()):bt(`Type3 character "${E.operatorListId}" is not available.`);const b=[E.width,0];lt.applyTransform(b,y),C=b[0]*o+L,i.translate(C,0),s.x+=C*m}i.restore()}}setCharWidth(t,i){}setCharWidthAndBounds(t,i,s,r,o,c){const u=new Path2D;u.rect(s,r,o-s,c-r),this.ctx.clip(u),this.endPath()}getColorN_Pattern(t){let i;if(t[0]==="TilingPattern"){const s=this.baseTransform||Zt(this.ctx),r={createCanvasGraphics:o=>new ua(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new Hh(t,this.ctx,r,s)}else i=this._getPattern(t[1],t[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=fA(this.getObject(t)),this.cachedPatterns.set(t,s)),i&&(s.matrix=i),s}shadingFill(t){if(!this.contentVisible)return;const i=this.ctx;this.save();const s=this._getPattern(t);i.fillStyle=s.getPattern(i,this,Ni(i),Te.SHADING);const r=Ni(i);if(r){const{width:o,height:c}=i.canvas,u=la.slice();lt.axialAlignedBoundingBox([0,0,o,c],r,u);const[d,g,m,y]=u;this.ctx.fillRect(d,g,m-d,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Gt("Should not call beginInlineImage")}beginImageData(){Gt("Should not call beginImageData")}paintFormXObjectBegin(t,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Zt(this.ctx),i)){lt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[s,r,o,c]=i,u=new Path2D;u.rect(s,r,o-s,c-r),this.ctx.clip(u),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||xl("TODO: Support non-isolated groups."),t.knockout&&bt("Knockout groups not supported.");const s=Zt(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=la.slice();lt.axialAlignedBoundingBox(t.bbox,Zt(i),r);const o=[0,0,i.canvas.width,i.canvas.height];r=lt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-c,1),g=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,g]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,d,g),v=y.context;v.translate(-c,-u),v.transform(...s);let w=new Path2D;const[_,E,C,R]=t.bbox;if(w.rect(_,E,C-_,R-E),t.matrix){const L=new Path2D;L.addPath(w,new DOMMatrix(t.matrix)),w=L}v.clip(w),t.smask?this.smaskStack.push({canvas:y.canvas,context:v,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(c,u),i.save()),gr(i,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Zt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=la.slice();lt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],r,o),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,i,s,r,o){if(this.#t(),dl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const c=i[2]-i[0],u=i[3]-i[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=c,i[3]=u,lt.singularValueDecompose2dScale(Zt(this.ctx),si);const{viewportScale:d}=this,g=Math.ceil(c*this.outputScaleX*d),m=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(g,m);const{canvas:y,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(si[0],0,0,-si[1],0,u*si[1]),dl(this.ctx)}else{dl(this.ctx),this.endPath();const d=new Path2D;d.rect(i[0],i[1],c,u),this.ctx.clip(d)}}this.current=new Sm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(t.data,t),t.count=i;const s=this.ctx,r=this._createMaskCanvas(t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s=0,r=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Zt(u);u.transform(i,s,r,o,0,0);const g=this._createMaskCanvas(t);u.setTransform(1,0,0,1,g.offsetX-d[4],g.offsetY-d[5]);for(let m=0,y=c.length;m<y;m+=2){const v=lt.transform(d,[i,s,r,o,c[m],c[m+1]]);u.drawImage(g.canvas,v[4],v[5])}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:g}=o,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),y=m.context;y.save();const v=this.getObject(c,o);Em(y,v),y.globalCompositeOperation="source-in",y.fillStyle=r?s.getPattern(y,this,Ni(i),Te.FILL):s,y.fillRect(0,0,u,d),y.restore(),i.save(),i.transform(...g),i.scale(1,-1),hl(i,m.canvas,0,0,u,d,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const i=this.getObject(t);if(!i){bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(t,i,s,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){bt("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let g=0,m=r.length;g<m;g+=2)d.push({transform:[i,0,0,s,r[g],r[g+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const i=t.width,s=t.height,r=this.ctx;this.save();const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/i,-1/s);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const g=this.cachedCanvases.getCanvas("inlineImage",i,s).context;wm(g,t),c=this.applyTransferMapsToCanvas(g)}const u=this._scaleImage(c,Ni(r));r.imageSmoothingEnabled=_m(Zt(r),t.interpolate),hl(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,i,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;wm(d,t),r=this.applyTransferMapsToCanvas(d)}for(const o of i)s.save(),s.transform(...o.transform),s.scale(1,-1),hl(s,r,o.x,o.y,o.w,o.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,i){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,i){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===xm?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Zt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:o}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const d=Math.abs(i),g=Math.abs(o);if(d===g)if(t===0)c=u=1/d;else{const m=d*t;c=u=m<1?1/m:1}else if(t===0)c=1/d,u=1/g;else{const m=d*t,y=g*t;c=m<1?1/m:1,u=y<1?1/y:1}}else{const d=Math.abs(i*o-s*r),g=Math.hypot(i,s),m=Math.hypot(r,o);if(t===0)c=m/d,u=g/d;else{const y=t*d;c=m>y?m/y:1,u=g>y?g/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(r||1)*o,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(o,c),ch.a=1/o,ch.d=1/c;const d=new Path2D;if(d.addPath(t,ch),u.length>0){const g=Math.max(o,c);s.setLineDash(u.map(m=>m/g)),s.lineDashOffset/=g}s.lineWidth=r||1,s.stroke(d),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in Tr)ua.prototype[h]!==void 0&&(ua.prototype[Tr[h]]=ua.prototype[h]);class Gn{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class SA{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const oa=Symbol("INTERNAL");class wA{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:o}){this.#t=!!(t&ii.DISPLAY),this.#e=!!(t&ii.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==oa&&Gt("Internal method `_setVisible` called."),this.#i=s,this.#n=i}}class EA{#t=null;#e=new Map;#i=null;#n=null;constructor(t,i=ii.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new wA(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(oa,!1);for(const s of t.on)this.#e.get(s)._setVisible(oa,!0);for(const s of t.off)this.#e.get(s)._setVisible(oa,!1);this.#i=this.getHash()}}#a(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return bt(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return xl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(bt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return bt(`Unknown optional content policy ${t.policy}.`),!0}return bt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){bt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(oa,!1,!0);r._setVisible(oa,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const o=this.#e.get(r);if(o)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new iy;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class _A{constructor(t,{disableRange:i=!1,disableStream:s=!1}){ge(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,g)=>{this._onReceiveData({begin:d,chunk:g})}),t.addProgressListener((d,g)=>{this._onProgress({loaded:d,total:g})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});ge(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){ge(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new xA(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new TA(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class xA{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=Cl(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class TA{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function CA(h){let t=!0,i=s("filename\\*","i").exec(h);if(i){i=i[1];let m=u(i);return m=unescape(m),m=d(m),m=g(m),o(m)}if(i=c(h),i){const m=g(i);return o(m)}if(i=s("filename","i").exec(h),i){i=i[1];let m=u(i);return m=g(m),o(m)}function s(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(m,{fatal:!0}),w=Nr(y);y=v.decode(w),t=!1}catch{}}return y}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function c(m){const y=[];let v;const w=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=w.exec(m))!==null;){let[,E,C,R]=v;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[C,R]}const _=[];for(let E=0;E<y.length&&E in y;++E){let[C,R]=y[E];R=u(R),C&&(R=unescape(R),E===0&&(R=d(R))),_.push(R)}return _.join("")}function u(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let v=0;v<y.length;++v){const w=y[v].indexOf('"');w!==-1&&(y[v]=y[v].slice(0,w),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function d(m){const y=m.indexOf("'");if(y===-1)return m;const v=m.slice(0,y),_=m.slice(y+1).replace(/^[^']*'/,"");return r(v,_)}function g(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,w,_){if(w==="q"||w==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,C){return String.fromCharCode(parseInt(C,16))}),r(v,_);try{_=atob(_)}catch{}return r(v,_)})}return""}function uy(h,t){const i=new Headers;if(!h||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function Rl(h){return URL.parse(h)?.origin??null}function hy({responseHeaders:h,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function dy(h){const t=h.get("Content-Disposition");if(t){let i=CA(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Cl(i))return i}return null}function Ir(h,t){return new Cr(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function fy(h){return h===200||h===206}function gy(h,t,i){return{method:"GET",headers:h,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function py(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(bt(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class RA{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=uy(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ge(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new MA(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new DA(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class MA{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,gy(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Rl(o.url),!fy(o.status))throw Ir(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=hy({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=dy(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new cn("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:py(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class DA{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${s-1}`);const c=r.url;fetch(c,gy(o,this._withCredentials,this._abortController)).then(u=>{const d=Rl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!fy(u.status))throw Ir(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:py(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const uh=200,hh=206;function LA(h){const t=h.response;return typeof t!="string"?t:Nr(t).buffer}class OA{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=uy(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,c]of this.headers)i.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=hh):r.expectedStatus=uh,i.responseType="arraybuffer",ge(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const o=r.status||uh;if(!(o===uh&&s.expectedStatus===hh)&&o!==s.expectedStatus){s.onError(r.status);return}const u=LA(r);if(o===hh){const d=r.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);g?s.onDone({begin:parseInt(g[1],10),chunk:u}):(bt('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class NA{constructor(t){this._source=t,this._manager=new OA(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return ge(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PA(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new kA(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class PA{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Rl(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...g]=u.split(": ");return[d,g.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=hy({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=dy(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Ir(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class kA{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Rl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Ir(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const zA=/^[a-z][a-z0-9\-+.]+:/i;function BA(h){if(zA.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class IA{constructor(t){this.source=t,this.url=BA(t.url),ge(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ge(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new HA(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new FA(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class HA{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Ir(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new cn("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class FA{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const pr=Symbol("INITIAL_DATA");class my{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:pr}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===pr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==pr}delete(t){const i=this.#t[t];return!i||i.data===pr?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==pr&&(yield[t,i])}}}const UA=1e5,Tm=30;let Rr=class mi{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#s=null;#o=0;#r=0;#h=null;#l=null;#d=0;#u=0;#f=Object.create(null);#g=[];#p=null;#c=[];#m=new WeakMap;#y=null;static#b=new Map;static#A=new Map;static#S=new WeakMap;static#w=null;static#x=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#u=s.scale*xi.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#r=r,this.#o=o,mi.#L(),jn(i,s),this.#t.promise.finally(()=>{mi.#x.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=Ae.platform;return xt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#h.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#a??=i.lang,Object.assign(this.#f,i.styles),this.#C(i.items),t()},this.#t.reject)};return this.#h=this.#p.getReader(),mi.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*xi.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,jn(this.#l,{rotation:r})),s!==this.#u){i?.(),this.#u=s;const o={div:null,properties:null,ctx:mi.#R(this.#a)};for(const c of this.#c)o.properties=this.#m.get(c),o.div=c,this.#E(o)}}cancel(){const t=new cn("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#g}#C(t){if(this.#i)return;this.#s.ctx??=mi.#R(this.#a);const i=this.#c,s=this.#g;for(const r of t){if(i.length>UA){bt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id!==null&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#M(r)}}#M(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#c.push(i);const r=lt.transform(this.#y,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#n&&c.fontSubstitution||c.fontFamily;u=mi.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),g=d*mi.#O(u,c,this.#a);let m,y;o===0?(m=r[4],y=r[5]-g):(m=r[4]+g*Math.sin(o),y=r[5]-g*Math.cos(o));const v="calc(var(--total-scale-factor) *",w=i.style;this.#e===this.#l?(w.left=`${(100*m/this.#r).toFixed(2)}%`,w.top=`${(100*y/this.#o).toFixed(2)}%`):(w.left=`${v}${m.toFixed(2)}px)`,w.top=`${v}${y.toFixed(2)}px)`),w.fontSize=`${v}${(mi.#w*d).toFixed(2)}px)`,w.fontFamily=u,s.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#n&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);E!==C&&Math.max(E,C)/Math.min(E,C)>1.5&&(_=!0)}if(_&&(s.canvasWidth=c.vertical?t.height:t.width),this.#m.set(i,s),this.#s.div=i,this.#s.properties=s,this.#E(this.#s),s.hasText&&this.#e.append(i),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this.#e.append(E)}}#E(t){const{div:i,properties:s,ctx:r}=t,{style:o}=i;let c="";if(mi.#w>1&&(c=`scale(${1/mi.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:g}=s;mi.#T(r,g*this.#u,u);const{width:m}=r.measureText(i.textContent);m>0&&(c=`scaleX(${d*this.#u/m}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:t}of this.#A.values())t.remove();this.#A.clear()}}static#R(t=null){let i=this.#A.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#A.set(t,i),this.#S.set(i,{size:0,family:""})}return i}static#T(t,i,s){const r=this.#S.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#L(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#O(t,i,s){const r=this.#b.get(t);if(r)return r;const o=this.#R(s);o.canvas.width=o.canvas.height=Tm,this.#T(o,Tm,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let g=.8;return u?g=u/(u+d):(Ae.platform.isFirefox&&bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?g=i.ascent:i.descent&&(g=1+i.descent)),this.#b.set(t,g),g}};class Mr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Mr.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&i.push({str:c}),!!o.children)for(const d of o.children)r(d)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const GA=100;function Fh(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new Uh,{docId:i}=t,s=h.url?Zv(h.url):null,r=h.data?Jv(h.data):null,o=h.httpHeaders||null,c=h.withCredentials===!0,u=h.password??null,d=h.range instanceof Gh?h.range:null,g=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let m=h.worker instanceof ga?h.worker:null;const y=h.verbosity,v=typeof h.docBaseUrl=="string"&&!kr(h.docBaseUrl)?h.docBaseUrl:null,w=cl(h.cMapUrl),_=h.cMapPacked!==!1,E=h.CMapReaderFactory||(Ne?rA:gm),C=cl(h.iccUrl),R=cl(h.standardFontDataUrl),L=h.StandardFontDataFactory||(Ne?oA:pm),D=cl(h.wasmUrl),b=h.WasmFactory||(Ne?lA:mm),S=h.stopAtErrors!==!0,T=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,M=h.isEvalSupported!==!1,N=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Ne,B=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Ne&&(Ae.platform.isFirefox||!globalThis.chrome),Y=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,$=typeof h.disableFontFace=="boolean"?h.disableFontFace:Ne,J=h.fontExtraProperties===!0,nt=h.enableXfa===!0,tt=h.ownerDocument||globalThis.document,gt=h.disableRange===!0,k=h.disableStream===!0,j=h.disableAutoFetch===!0,et=h.pdfBug===!0,pt=h.CanvasFactory||(Ne?aA:iA),At=h.FilterFactory||(Ne?sA:nA),P=h.enableHWA===!0,V=h.useWasm!==!1,Q=d?d.length:h.length??NaN,Z=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Ne&&!$,ot=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(E===gm&&L===pm&&b===mm&&w&&R&&D&&Ar(w,document.baseURI)&&Ar(R,document.baseURI)&&Ar(D,document.baseURI)),ut=null;Pv(y);const rt={canvasFactory:new pt({ownerDocument:tt,enableHWA:P}),filterFactory:new At({docId:i,ownerDocument:tt}),cMapReaderFactory:ot?null:new E({baseUrl:w,isCompressed:_}),standardFontDataFactory:ot?null:new L({baseUrl:R}),wasmFactory:ot?null:new b({baseUrl:D})};m||(m=ga.create({verbosity:y,port:Gn.workerPort}),t._worker=m);const Vt={docId:i,apiVersion:"5.3.93",data:r,password:u,disableAutoFetch:j,rangeChunkSize:g,length:Q,docBaseUrl:v,enableXfa:nt,evaluatorOptions:{maxImageSize:T,disableFontFace:$,ignoreErrors:S,isEvalSupported:M,isOffscreenCanvasSupported:N,isImageDecoderSupported:B,canvasMaxAreaInBytes:Y,fontExtraProperties:J,useSystemFonts:Z,useWasm:V,useWorkerFetch:ot,cMapUrl:w,iccUrl:C,standardFontDataUrl:R,wasmUrl:D}},Lt={ownerDocument:tt,pdfBug:et,styleElement:ut,loadingParams:{disableAutoFetch:j,enableXfa:nt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const zt=m.messageHandler.sendWithPromise("GetDocRequest",Vt,r?[r.buffer]:null);let ke;if(d)ke=new _A(d,{disableRange:gt,disableStream:k});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Ye=Ar(s)?RA:Ne?IA:NA;ke=new Ye({url:s,length:Q,httpHeaders:o,withCredentials:c,rangeChunkSize:g,disableRange:gt,disableStream:k})}return zt.then(Ye=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Dt=new Sr(i,Ye,m.port),Ot=new VA(Dt,t,ke,Lt,rt);t._transport=Ot,Dt.send("Ready",null)})}).catch(t._capability.reject),t}class Uh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Uh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Gh=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#a=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#a)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#n)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#i)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Gt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class jA{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class qA{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new hm:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new my,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:o=!1}={}){return new Pr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:i,intent:s="display",annotationMode:r=Ii.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:y=!1}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(s,r,m,y),{renderingIntent:w,cacheKey:_}=v;this.#t=!1,u||=this._transport.getOptionalContentConfig(w);let E=this._intentStates.get(_);E||(E=Object.create(null),this._intentStates.set(_,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const C=!!(w&ii.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const R=b=>{E.renderTasks.delete(L),C&&(this.#t=!0),this.#e(),b?(L.capability.reject(b),this._abortOperatorList({intentState:E,reason:b instanceof Error?b:new Error(b)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new ca({callback:R,params:{canvasContext:t,viewport:i,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:g});(E.renderTasks||=new Set).add(L);const D=L.task;return Promise.all([E.displayReadyCapability.promise,u]).then(([b,S])=>{if(this.destroyed){R();return}if(this._stats?.time("Rendering"),!(S.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:b,optionalContentConfig:S}),L.operatorListChanged()}).catch(R),D}getOperatorList({intent:t="display",annotationMode:i=Ii.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Mr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function o(){c.read().then(function({value:d,done:g}){if(g){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new hm),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:o,transfer:c}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},c).getReader(),g=this._intentStates.get(i);g.streamReader=d;const m=()=>{d.read().then(({value:y,done:v})=>{if(v){g.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,g),m())},y=>{if(g.streamReader=null,!this._transport.destroyed){if(g.operatorList){g.operatorList.lastChunk=!0;for(const v of g.renderTasks)v.operatorListChanged();this.#e()}if(g.displayReadyCapability)g.displayReadyCapability.reject(y);else if(g.opListReadCapability)g.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof Tl){let r=GA;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new cn(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Un,_i,on,ds,El,fs,gs,Pe,ml,yy,by,wr,fa,yl;const Kt=class Kt{constructor({name:t=null,port:i=null,verbosity:s=kv()}={}){Li(this,Pe);Li(this,Un,Promise.withResolvers());Li(this,_i,null);Li(this,on,null);Li(this,ds,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Wt(Kt,gs).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Wt(Kt,gs).set(i,this),Oi(this,Pe,yy).call(this,i)}else Oi(this,Pe,by).call(this)}get promise(){return Wt(this,Un).promise}get port(){return Wt(this,on)}get messageHandler(){return Wt(this,_i)}destroy(){this.destroyed=!0,Wt(this,ds)?.terminate(),je(this,ds,null),Wt(Kt,gs).delete(Wt(this,on)),je(this,on,null),Wt(this,_i)?.destroy(),je(this,_i,null)}static create(t){const i=Wt(this,gs).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Kt(t)}static get workerSrc(){if(Gn.workerSrc)return Gn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return xt(this,"_setupFakeWorkerGlobal",(async()=>Wt(this,fa,yl)?Wt(this,fa,yl):(await import(this.workerSrc)).WorkerMessageHandler)())}};Un=new WeakMap,_i=new WeakMap,on=new WeakMap,ds=new WeakMap,El=new WeakMap,fs=new WeakMap,gs=new WeakMap,Pe=new WeakSet,ml=function(){Wt(this,Un).resolve(),Wt(this,_i).send("configure",{verbosity:this.verbosity})},yy=function(t){je(this,on,t),je(this,_i,new Sr("main","worker",t)),Wt(this,_i).on("ready",()=>{}),Oi(this,Pe,ml).call(this)},by=function(){if(Wt(Kt,fs)||Wt(Kt,fa,yl)){Oi(this,Pe,wr).call(this);return}let{workerSrc:t}=Kt;try{Kt._isSameOrigin(window.location,t)||(t=Kt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new Sr("main","worker",i),r=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?Wt(this,Un).reject(new Error("Worker was destroyed")):Oi(this,Pe,wr).call(this)},o=new AbortController;i.addEventListener("error",()=>{Wt(this,ds)||r()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}je(this,_i,s),je(this,on,i),je(this,ds,i),Oi(this,Pe,ml).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{Oi(this,Pe,wr).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{xl("The worker has been disabled.")}Oi(this,Pe,wr).call(this)},wr=function(){Wt(Kt,fs)||(bt("Setting up fake worker."),je(Kt,fs,!0)),Kt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Wt(this,Un).reject(new Error("Worker was destroyed"));return}const i=new eA;je(this,on,i);const s=`fake${Zp(Kt,El)._++}`,r=new Sr(s+"_worker",s,i);t.setup(r,i),je(this,_i,new Sr(s,s+"_worker",i)),Oi(this,Pe,ml).call(this)}).catch(t=>{Wt(this,Un).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},fa=new WeakSet,yl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Li(Kt,fa),Li(Kt,El,0),Li(Kt,fs,!1),Li(Kt,gs,new WeakMap),Ne&&(je(Kt,fs,!0),Gn.workerSrc||="./pdf.worker.mjs"),Kt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},Kt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Kt.fromPort=t=>{if(qv("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Kt.create(t)};let ga=Kt;class VA{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#a=null;constructor(t,i,s,r,o){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new my,this.fontLoader=new Kv({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return xt(this,"annotationStorage",new zh)}getRenderingIntent(t,i=Ii.ENABLE,s=null,r=!1,o=!1){let c=ii.DISPLAY,u=mh;switch(t){case"any":c=ii.ANY;break;case"display":break;case"print":c=ii.PRINT;break;default:bt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&ii.PRINT&&s instanceof ny?s:this.annotationStorage;switch(i){case Ii.DISABLE:c+=ii.ANNOTATIONS_DISABLE;break;case Ii.ENABLE:break;case Ii.ENABLE_FORMS:c+=ii.ANNOTATIONS_FORMS;break;case Ii.ENABLE_STORAGE:c+=ii.ANNOTATIONS_STORAGE,u=d.serializable;break;default:bt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=ii.IS_EDITING),o&&(c+=ii.OPLIST);const{ids:g,hash:m}=d.modifiedIds,y=[c,u.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:g}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Rr.cleanup(),this._networkStream?.cancelAllRequests(new cn("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{ge(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}ge(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{ge(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}ge(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new jA(s,this))}),t.on("DocException",s=>{i._capability.reject(qe(s))}),t.on("PasswordRequest",s=>{this.#a=Promise.withResolvers();try{if(!i.onPassword)throw qe(s);const r=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};i.onPassword(r,s.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in o){const g=o.error;bt(`Error during font loading: ${g}`),this.commonObjs.resolve(s,g);break}const c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,u=new Qv(o,c);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:d}=o;ge(d,"The imageRef must be defined.");for(const g of this.#e.values())for(const[,m]of g.objs)if(m?.ref===d)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,o,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#i.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const c=new qA(i,o,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#i.set(i,r),r}getPageIndex(t){return yh(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(i=>new EA(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new SA(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Rr.cleanup()}}cachedPageNumber(t){if(!yh(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(i)??null}}class YA{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class ca{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:g,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:v=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=g,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new YA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ca.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ca.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:o,background:c}=this.params;this.gfx=new ua(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ca.#e.delete(this._canvas),t||=new Tl(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ca.#e.delete(this._canvas),this.callback())))}}const vy="5.3.93",Ay="cbeef3233";function Cm(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function mr(h){return Math.max(0,Math.min(255,255*h))}class Rm{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=mr(t),[t,t,t]}static G_HTML([t]){const i=Cm(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(mr)}static RGB_HTML(t){return`#${t.map(Cm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[mr(1-Math.min(1,t+r)),mr(1-Math.min(1,s+r)),mr(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,o=1-i,c=1-s,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class XA{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Gt("Abstract method `_createSVG` called.")}}class Dr extends XA{_createSVG(t){return document.createElementNS(rn,t)}}class jh{static setupStorage(t,i,s,r,o){const c=r.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,g=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(i,{value:g})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:o}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,g]of Object.entries(c))if(g!=null)switch(d){case"class":g.length&&t.setAttribute(d,g.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",g);break;case"style":Object.assign(t.style,g);break;case"textContent":t.textContent=g;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,g)}u&&o.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const g=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&Mr.shouldBuildText(r.name)&&g.push(y)}return{textDivs:g}}const m=[[r,-1,c]];for(;m.length>0;){const[y,v,w]=m.at(-1);if(v+1===y.children.length){m.pop();continue}const _=y.children[++m.at(-1)[1]];if(_===null)continue;const{name:E}=_;if(E==="#text"){const R=document.createTextNode(_.value);g.push(R),w.append(R);continue}const C=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,E):document.createElement(E);if(w.append(C),_.attributes&&this.setAttributes({html:C,element:_,storage:i,intent:o,linkService:s}),_.children?.length>0)m.push([_,-1,C]);else if(_.value){const R=document.createTextNode(_.value);u&&Mr.shouldBuildText(E)&&g.push(R),C.append(R)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:g}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const $A=9,ms=new WeakSet;class Mm{static create(t){switch(t.data.annotationType){case ae.LINK:return new Sy(t);case ae.TEXT:return new WA(t);case ae.WIDGET:switch(t.data.fieldType){case"Tx":return new KA(t);case"Btn":return t.data.radioButton?new wy(t):t.data.checkBox?new ZA(t):new JA(t);case"Ch":return new tS(t);case"Sig":return new QA(t)}return new vs(t);case ae.POPUP:return new vh(t);case ae.FREETEXT:return new Ey(t);case ae.LINE:return new iS(t);case ae.SQUARE:return new nS(t);case ae.CIRCLE:return new sS(t);case ae.POLYLINE:return new _y(t);case ae.CARET:return new rS(t);case ae.INK:return new qh(t);case ae.POLYGON:return new aS(t);case ae.HIGHLIGHT:return new xy(t);case ae.UNDERLINE:return new oS(t);case ae.SQUIGGLY:return new lS(t);case ae.STRIKEOUT:return new cS(t);case ae.STAMP:return new Ty(t);case ae.FILEATTACHMENT:return new uS(t);default:return new le(t)}}}class le{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,i&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return le._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};const{rect:i}=t;i&&this.#n(i),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(c-t[3]+d)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),this instanceof vs||(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof vh){const{rotation:E}=i;return!i.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const E=i.borderStyle.horizontalCornerRadius,C=i.borderStyle.verticalCornerRadius;if(E>0||C>0){const L=`calc(${E}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;c.borderRadius=L}else if(this instanceof wy){const L=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=L}switch(i.borderStyle.style){case ra.SOLID:c.borderStyle="solid";break;case ra.DASHED:c.borderStyle="dashed";break;case ra.BEVELED:bt("Unimplemented border style: beveled");break;case ra.INSET:bt("Unimplemented border style: inset");break;case ra.UNDERLINE:c.borderBottomStyle="solid";break}const R=i.borderColor||null;R?(this.#e=!0,c.borderColor=lt.makeHexColor(R[0]|0,R[1]|0,R[2]|0)):c.borderWidth=0}const g=lt.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:m,pageHeight:y,pageX:v,pageY:w}=r.rawDims;c.left=`${100*(g[0]-v)/m}%`,c.top=`${100*(g[1]-w)/y}%`;const{rotation:_}=i;return i.hasOwnCanvas||_===0?(c.width=`${100*u/m}%`,c.height=`${100*d/y}%`):this.setRotation(_,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),i.style.width=`${100*o/s}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const o=r.detail[i],c=o[0],u=o.slice(1);r.target.style[s]=Rm[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Rm[`${c}_rgb`](u)})};return xt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,o]of Object.entries(i)){const c=s[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,o]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,C,R,L]=t.subarray(2,6);if(r===E&&o===C&&i===R&&s===L)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:E,borderWidth:C}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=r-i,g=o-s,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=m.createElement("defs");y.append(v);const w=m.createElement("clipPath"),_=`clippath_${this.data.id}`;w.setAttribute("id",_),w.setAttribute("clipPathUnits","objectBoundingBox"),v.append(w);for(let E=2,C=t.length;E<C;E+=8){const R=t[E],L=t[E+1],D=t[E+2],b=t[E+3],S=m.createElement("rect"),T=(D-i)/d,M=(o-L)/g,N=(R-D)/d,B=(L-b)/g;S.setAttribute("x",T),S.setAttribute("y",M),S.setAttribute("width",N),S.setAttribute("height",B),w.append(S),u?.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${M}" width="${N}" height="${B}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,i=this.#i=new vh({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(i.render())}render(){Gt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===i)continue;const d=typeof u=="string"?u:null,g=document.querySelector(`[data-element-id="${c}"]`);if(g&&!ms.has(g)){bt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:d,domElement:g})}return s}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==i&&ms.has(r)&&s.push({id:c,exportValue:o,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Sy extends le{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action),r=!0):t.attachment?(this.#e(s,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(this.#i(s,t.setOCGState),r=!0):t.dest?(this._bindLink(s,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t()}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),this.#t()}#e(t,i,s=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,s),!1),this.#t()}#i(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:o,include:c}=i,u=[];if(r.length!==0||o.length!==0){const m=new Set(o);for(const y of r){const v=this._fieldObjects[y]||[];for(const{id:w}of v)m.add(w)}for(const y of Object.values(this._fieldObjects))for(const v of y)m.has(v.id)===c&&u.push(v)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const d=this.annotationStorage,g=[];for(const m of u){const{id:y}=m;switch(g.push(y),m.type){case"text":{const w=m.defaultValue||"";d.setValue(y,{value:w});break}case"checkbox":case"radiobutton":{const w=m.defaultValue===m.exportValues;d.setValue(y,{value:w});break}case"combobox":case"listbox":{const w=m.defaultValue||"";d.setValue(y,{value:w});break}default:continue}const v=document.querySelector(`[data-element-id="${y}"]`);if(v){if(!ms.has(v)){bt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}}),!1}}}class WA extends le{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class vs extends le{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,o){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,i,s,r){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":lt.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||$A,o=t.style;let c;const u=2,d=g=>Math.round(10*g)/10;if(this.data.multiLine){const g=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(g/(sh*r))||1,y=g/m;c=Math.min(r,d(y/sh))}else{const g=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(g/sh))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=lt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class KA extends vs{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),o.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ms.add(s),s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const g=this.data.dateFormat||this.data.timeFormat;g&&(s.title=g),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",y=>{t.setValue(i,{value:y.target.value}),this.setPropertyOnSiblings(s,"value",y.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",y=>{const v=this.data.defaultFieldValue??"";s.value=d.userValue=v,d.formattedValue=null});let m=y=>{const{formattedValue:v}=d;v!=null&&(y.target.value=v),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{if(d.focused)return;const{target:w}=v;d.userValue&&(w.value=d.userValue),d.lastCommittedValue=w.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const w={value(_){d.userValue=_.detail.value??"",t.setValue(i,{value:d.userValue.toString()}),_.target.value=d.userValue},formattedValue(_){const{formattedValue:E}=_.detail;d.formattedValue=E,E!=null&&_.target!==document.activeElement&&(_.target.value=E),t.setValue(i,{formattedValue:E})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:E}=_.detail,{target:C}=_;if(E===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",E);let R=d.userValue;!R||R.length<=E||(R=R.slice(0,E),C.value=d.userValue=R,t.setValue(i,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),s.addEventListener("keydown",v=>{d.commitKey=1;let w=-1;if(v.key==="Escape"?w=0:v.key==="Enter"&&!this.data.multiLine?w=2:v.key==="Tab"&&(d.commitKey=3),w===-1)return;const{value:_}=v.target;d.lastCommittedValue!==_&&(d.lastCommittedValue=_,d.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:_,willCommit:!0,commitKey:w,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const y=m;m=null,s.addEventListener("blur",v=>{if(!d.focused||!v.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{value:w}=v.target;d.userValue=w,d.lastCommittedValue!==w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),y(v)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",v=>{d.lastCommittedValue=null;const{data:w,target:_}=v,{value:E,selectionStart:C,selectionEnd:R}=_;let L=C,D=R;switch(v.inputType){case"deleteWordBackward":{const b=E.substring(0,C).match(/\w*[^\w]*$/);b&&(L-=b[0].length);break}case"deleteWordForward":{const b=E.substring(C).match(/^[^\w]*\w*/);b&&(D+=b[0].length);break}case"deleteContentBackward":C===R&&(L-=1);break;case"deleteContentForward":C===R&&(D+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,change:w||"",willCommit:!1,selStart:L,selEnd:D}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(m&&s.addEventListener("blur",m),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class QA extends vs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class ZA extends vs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ms.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const g of this._getElementsByName(u,s)){const m=d&&g.exportValue===i.exportValue;g.domElement&&(g.domElement.checked=m),t.setValue(g.id,{value:m})}t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class wy extends vs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(ms.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const g of this._getElementsByName(u,s))t.setValue(g.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:g=>{const m=c===g.detail.value;for(const y of this._getElementsByName(g.target.name)){const v=m&&y.id===s;y.domElement&&(y.domElement.checked=v),t.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class JA extends Sy{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class tS extends vs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");ms.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,s.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),c=()=>{m.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=m=>{const y=m?"value":"textContent",{options:v,multiple:w}=r;return w?Array.prototype.filter.call(v,_=>_.selected).map(_=>_[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=u(!1);const g=m=>{const y=m.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(v){c?.();const w=v.detail.value,_=new Set(Array.isArray(w)?w:[w]);for(const E of r.options)E.selected=_.has(E.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(v){r.multiple=!0},remove(v){const w=r.options,_=v.detail.remove;w[_].selected=!1,r.remove(_),w.length>0&&Array.prototype.findIndex.call(w,C=>C.selected)===-1&&(w[0].selected=!0),t.setValue(i,{value:u(!0),items:g(v)}),d=u(!1)},clear(v){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(v){const{index:w,displayValue:_,exportValue:E}=v.detail.insert,C=r.children[w],R=document.createElement("option");R.textContent=_,R.value=E,C?C.before(R):r.append(R),t.setValue(i,{value:u(!0),items:g(v)}),d=u(!1)},items(v){const{items:w}=v.detail;for(;r.length!==0;)r.remove(0);for(const _ of w){const{displayValue:E,exportValue:C}=_,R=document.createElement("option");R.textContent=E,R.value=C,r.append(R)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:g(v)}),d=u(!1)},indices(v){const w=new Set(v.detail.indices);for(const _ of v.target.options)_.selected=w.has(_.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{const y=u(!0),v=u(!1);t.setValue(i,{value:y}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class vh extends le{constructor(t){const{data:i,elements:s}=t;super(t,{isRenderable:le._hasPopupData(i)}),this.elements=s,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=new eS({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Lh}${r}`).join(",")),this.container}}class eS{#t=this.#C.bind(this);#e=this.#T.bind(this);#i=this.#R.bind(this);#n=this.#E.bind(this);#a=null;#s=null;#o=null;#r=null;#h=null;#l=null;#d=null;#u=!1;#f=null;#g=null;#p=null;#c=null;#m=null;#y=null;#b=!1;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:g,parentRect:m,open:y}){this.#s=t,this.#m=r,this.#o=c,this.#c=u,this.#l=d,this.#a=i,this.#p=g,this.#d=m,this.#h=s,this.#r=Oh.toDateObject(o),this.trigger=s.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",this.#n),v.addEventListener("mouseenter",this.#i),v.addEventListener("mouseleave",this.#e),v.classList.add("popupTriggerArea");for(const v of s)v.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,y&&this.#E()}render(){if(this.#f)return;const t=this.#f=document.createElement("div");if(t.className="popup",this.#a){const o=t.style.outlineColor=lt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const i=document.createElement("span");i.className="header";const s=document.createElement("h1");if(i.append(s),{dir:s.dir,str:s.textContent}=this.#m,t.append(i),this.#r){const o=document.createElement("time");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#r.valueOf()})),o.dateTime=this.#r.toISOString(),i.append(o)}const r=this.#A;if(r)jh.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(this.#o);t.append(o)}this.#s.append(t)}get#A(){const t=this.#c,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#c.html||null}get#S(){return this.#A?.attributes?.style?.fontSize||0}get#w(){return this.#A?.attributes?.style?.color||null}#x(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#w,fontSize:this.#S?`calc(${this.#S}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return s}_formatContents({str:t,dir:i}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=i;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const u=r[o];s.append(document.createTextNode(u)),o<c-1&&s.append(document.createElement("br"))}return s}#C(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#u)&&this.#E()}updateEdited({rect:t,popupContent:i}){this.#y||={contentsObj:this.#o,richText:this.#c},t&&(this.#g=null),i&&(this.#c=this.#x(i),this.#o=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#o,richText:this.#c}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#g=null)}#M(){if(this.#g!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.#l;let c=!!this.#d,u=c?this.#d:this.#p;for(const _ of this.#h)if(!u||lt.intersect(_.data.rect,u)!==null){u=_.data.rect,c=!0;break}const d=lt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=c?u[2]-u[0]+5:0,y=d[0]+m,v=d[1];this.#g=[100*(y-r)/i,100*(v-o)/s];const{style:w}=this.#s;w.left=`${this.#g[0]}%`,w.top=`${this.#g[1]}%`}#E(){this.#u=!this.#u,this.#u?(this.#R(),this.#s.addEventListener("click",this.#n),this.#s.addEventListener("keydown",this.#t)):(this.#T(),this.#s.removeEventListener("click",this.#n),this.#s.removeEventListener("keydown",this.#t))}#R(){this.#f||this.render(),this.isVisible?this.#u&&this.#s.classList.add("focused"):(this.#M(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#T(){this.#s.classList.remove("focused"),!(this.#u||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#b=this.isVisible,this.#b&&(this.#s.hidden=!0)}maybeShow(){this.#b&&(this.#f||this.#R(),this.#b=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Ey extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class iS extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nS extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",i-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class sS extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _y extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(o,c,!0);let d=[];for(let m=0,y=i.length;m<y;m+=2){const v=i[m]-t[0],w=t[3]-i[m+1];d.push(`${v},${w}`)}d=d.join(" ");const g=this.#t=this.svgFactory.createElement(this.svgElementName);return g.setAttribute("points",d),g.setAttribute("stroke-width",s.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),u.append(g),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class aS extends _y{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rS extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class qh extends le{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?mt.HIGHLIGHT:mt.INK}#i(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:c,width:u,height:d}=this.#i(i,t),g=this.svgFactory.create(u,d,!0),m=this.#t=this.svgFactory.createElement("svg:g");g.append(m),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",c);for(let y=0,v=s.length;y<v;y++){const w=this.svgFactory.createElement(this.svgElementName);this.#e.push(w),w.setAttribute("points",s[y].join(",")),m.append(w)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:d}=this.#i(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xy extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class oS extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class lS extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class cS extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Ty extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class uS extends le{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=Ae.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Vh=class Cy{#t=null;#e=null;#i=new Map;#n=null;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u}){this.div=t,this.#t=i,this.#e=s,this.#n=u||null,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#i.size>0}async#a(t,i,s){const r=t.firstChild||t,o=r.id=`${Lh}${i}`,c=await this.#n?.getAriaAttributes(o);if(c)for(const[u,d]of c)r.setAttribute(u,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:i}=t,s=this.div;jn(s,this.viewport);const r=new Map,o={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Dr,annotationStorage:t.annotationStorage||new zh,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of i){if(c.noHTML)continue;const u=c.annotationType===ae.POPUP;if(u){const m=r.get(c.id);if(!m)continue;o.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const d=Mm.create(o);if(!d.isRenderable)continue;if(!u&&c.popupRef){const m=r.get(c.popupRef);m?m.push(d):r.set(c.popupRef,[d])}const g=d.render();c.hidden&&(g.style.visibility="hidden"),await this.#a(g,c.id,o.elements),d._isEditable&&(this.#i.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#s()}async addLinkAnnotations(t,i){const s={data:null,layer:this.div,linkService:i,svgFactory:new Dr,parent:this};for(const r of t){r.borderStyle||=Cy._defaultBorderStyle,s.data=r;const o=Mm.create(s);if(!o.isRenderable)continue;const c=o.render();await this.#a(c,r.id,null)}}update({viewport:t}){const i=this.div;this.viewport=t,jn(i,{rotation:t.rotation}),this.#s(),i.hidden=!1}#s(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}static get _defaultBorderStyle(){return xt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ra.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const fl=/\r\n?|\n/g;class me extends ht{#t;#e="";#i=`${this.id}-editor`;#n=null;#a;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=me.prototype,i=o=>o.isEmpty(),s=un.TRANSLATE_SMALL,r=un.TRANSLATE_BIG;return xt(this,"_keyboardManager",new zr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=mt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||me._defaultColor||ht._defaultLineColor,this.#a=t.fontSize||me._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,i){ht.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Rt.FREETEXT_SIZE:me._defaultFontSize=i;break;case Rt.FREETEXT_COLOR:me._defaultColor=i;break}}updateParams(t,i){switch(t){case Rt.FREETEXT_SIZE:this.#s(i);break;case Rt.FREETEXT_COLOR:this.#o(i);break}}static get defaultPropertiesToUpdate(){return[[Rt.FREETEXT_SIZE,me._defaultFontSize],[Rt.FREETEXT_COLOR,me._defaultColor||ht._defaultLineColor]]}get propertiesToUpdate(){return[[Rt.FREETEXT_SIZE,this.#a],[Rt.FREETEXT_COLOR,this.#t]]}#s(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#h()},s=this.#a;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){const i=r=>{this.#t=this.editorDiv.style.color=r},s=this.#t;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-me._internalPadding*t,-(me._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(me.#l(s)),i=s);return t.join(`
`)}#h(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,i=this.#e=this.#r().trimEnd();if(t===i)return;const s=r=>{if(this.#e=r,!r){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){me._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[g,m]=this.pageDimensions,[y,v]=this.pageTranslation;let w,_;switch(this.rotation){case 0:w=t+(c[0]-y)/g,_=i+this.height-(c[1]-v)/m;break;case 90:w=t+(c[0]-y)/g,_=i-(c[1]-v)/m,[u,d]=[d,-u];break;case 180:w=t-this.width+(c[0]-y)/g,_=i-(c[1]-v)/m,[u,d]=[-u,-d];break;case 270:w=t+(c[0]-y-this.height*m)/g,_=i+(c[1]-v-this.width*g)/m,[u,d]=[-d,u];break}this.setAt(w*r,_*o,u,d)}else this._moveAfterPaste(t,i);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(fl,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=me.#f(i.getData("text")||"").replaceAll(fl,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,g=[],m=[];if(u.nodeType===Node.TEXT_NODE){const w=u.parentElement;if(m.push(u.nodeValue.slice(d).replaceAll(fl,"")),w!==this.editorDiv){let _=g;for(const E of this.editorDiv.childNodes){if(E===w){_=m;continue}_.push(me.#l(E))}}g.push(u.nodeValue.slice(0,d).replaceAll(fl,""))}else if(u===this.editorDiv){let w=g,_=0;for(const E of this.editorDiv.childNodes)_++===d&&(w=m),w.push(me.#l(E))}this.#e=`${g.join(`
`)}${r}${m.join(`
`)}`,this.#d();const y=new Range;let v=Math.sumPrecise(g.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const _=w.nodeValue.length;if(v<=_){y.setStart(w,v),y.setEnd(w,v);break}v-=_}o.removeAllRanges(),o.addRange(y)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#u(){return this.#e.replaceAll(" "," ")}static#f(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(t,i,s){let r=null;if(t instanceof Ey){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:g,id:m,popupRef:y},textContent:v,textPosition:w,parent:{page:{pageNumber:_}}}=t;if(!v||v.length===0)return null;r=t={annotationType:mt.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:w,pageIndex:_-1,rect:d.slice(0),rotation:g,annotationElementId:m,id:m,deleted:!1,popupRef:y}}const o=await super.deserialize(t,i,s);return o.#a=t.fontSize,o.#t=lt.makeHexColor(...t.color),o.#e=me.#f(t.value),o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=me._internalPadding*this.parentScale,s=this.getRect(i,i),r=ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:mt.FREETEXT,color:r,fontSize:this.#a,value:this.#u(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!this.#g(o)?null:(o.id=this.annotationElementId,o)}#g(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,s.color=this.#t,i.replaceChildren();for(const o of this.#e.split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),i.append(c)}const r=me._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:this.#e}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){Gt("Abstract method `toSVGPath` must be implemented.")}get box(){Gt("Abstract getter `box` must be implemented.")}serialize(t,i){Gt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u]*r,c[u+1]=s+t[u+1]*o;return c}static _rescaleAndSwap(t,i,s,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u+1]*r,c[u+1]=s+t[u]*o;return c}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)r[o]=i+t[o],r[o+1]=s+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,o){switch(o){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,o,c){return[(t+5*s)/6,(i+5*r)/6,(5*s+o)/6,(5*r+c)/6,(s+o)/2,(r+c)/2]}}class hs{#t;#e=[];#i;#n;#a=[];#s=new Float32Array(18);#o;#r;#h;#l;#d;#u;#f=[];static#g=8;static#p=2;static#c=hs.#g+hs.#p;constructor({x:t,y:i},s,r,o,c,u=0){this.#t=s,this.#u=o*r,this.#n=c,this.#s.set([NaN,NaN,NaN,NaN,t,i],6),this.#i=u,this.#l=hs.#g*r,this.#h=hs.#c*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[s,r,o,c]=this.#t;return[(this.#o+(t[0]-i[0])/2-s)/o,(this.#r+(t[1]-i[1])/2-r)/c,(this.#o+(i[0]-t[0])/2-s)/o,(this.#r+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#o=t,this.#r=i;const[s,r,o,c]=this.#t;let[u,d,g,m]=this.#s.subarray(8,12);const y=t-g,v=i-m,w=Math.hypot(y,v);if(w<this.#h)return!1;const _=w-this.#l,E=_/w,C=E*y,R=E*v;let L=u,D=d;u=g,d=m,g+=C,m+=R,this.#f?.push(t,i);const b=-R/_,S=C/_,T=b*this.#u,M=S*this.#u;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([g+T,m+M],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([g-T,m-M],16),isNaN(this.#s[6])?(this.#a.length===0&&(this.#s.set([u+T,d+M],2),this.#a.push(NaN,NaN,NaN,NaN,(u+T-s)/o,(d+M-r)/c),this.#s.set([u-T,d-M],14),this.#e.push(NaN,NaN,NaN,NaN,(u-T-s)/o,(d-M-r)/c)),this.#s.set([L,D,u,d,g,m],6),!this.isEmpty()):(this.#s.set([L,D,u,d,g,m],6),Math.abs(Math.atan2(D-d,L-u)-Math.atan2(R,C))<Math.PI/2?([u,d,g,m]=this.#s.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+g)/2-s)/o,((d+m)/2-r)/c),[u,d,L,D]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((L+u)/2-s)/o,((D+d)/2-r)/c),!0):([L,D,u,d,g,m]=this.#s.subarray(0,6),this.#a.push(((L+5*u)/6-s)/o,((D+5*d)/6-r)/c,((5*u+g)/6-s)/o,((5*d+m)/6-r)/c,((u+g)/2-s)/o,((d+m)/2-r)/c),[g,m,u,d,L,D]=this.#s.subarray(12,18),this.#e.push(((L+5*u)/6-s)/o,((D+5*d)/6-r)/c,((5*u+g)/6-s)/o,((5*d+m)/6-r)/c,((u+g)/2-s)/o,((d+m)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,i=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#A(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#b(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[o,c,u,d]=this.#m();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-i)/r} L${(this.#s[4]-t)/s} ${(this.#s[5]-i)/r} L${o} ${c} L${u} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-i)/r} L${(this.#s[14]-t)/s} ${(this.#s[15]-i)/r} Z`}#b(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#A(t){const[i,s,r,o]=this.#t,c=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,g,m,y]=this.#m();t.push(`L${(c[0]-i)/r} ${(c[1]-s)/o} L${d} ${g} L${m} ${y} L${(u[0]-i)/r} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,i,s,r,o,c){return new Ry(t,i,s,r,o,c)}getOutlines(){const t=this.#a,i=this.#e,s=this.#s,[r,o,c,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,v=d.length-2;y<v;y+=2)d[y]=(this.#f[y]-r)/c,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#o-r)/c,d[d.length-1]=(this.#r-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#S(d);const g=new Float32Array(this.#a.length+24+this.#e.length);let m=t.length;for(let y=0;y<m;y+=2){if(isNaN(t[y])){g[y]=g[y+1]=NaN;continue}g[y]=t[y],g[y+1]=t[y+1]}m=this.#x(g,m);for(let y=i.length-6;y>=6;y-=6)for(let v=0;v<6;v+=2){if(isNaN(i[y+v])){g[m]=g[m+1]=NaN,m+=2;continue}g[m]=i[y+v],g[m+1]=i[y+v+1],m+=2}return this.#w(g,m),this.newFreeDrawOutline(g,d,this.#t,this.#d,this.#i,this.#n)}#S(t){const i=this.#s,[s,r,o,c]=this.#t,[u,d,g,m]=this.#m(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#w(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#x(t,i){const s=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[o,c,u,d]=this.#t,[g,m,y,v]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/d,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/d],i),i+=24}}class Ry extends it{#t;#e=new Float32Array(4);#i;#n;#a;#s;#o;constructor(t,i,s,r,o,c){super(),this.#o=t,this.#a=i,this.#t=s,this.#s=r,this.#i=o,this.#n=c,this.lastPoint=[NaN,NaN],this.#r(c);const[u,d,g,m]=this.#e;for(let y=0,v=t.length;y<v;y+=2)t[y]=(t[y]-u)/g,t[y+1]=(t[y+1]-d)/m;for(let y=0,v=i.length;y<v;y+=2)i[y]=(i[y]-u)/g,i[y+1]=(i[y+1]-d)/m}toSVGPath(){const t=[`M${this.#o[4]} ${this.#o[5]}`];for(let i=6,s=this.#o.length;i<s;i+=6){if(isNaN(this.#o[i])){t.push(`L${this.#o[i+4]} ${this.#o[i+5]}`);continue}t.push(`C${this.#o[i]} ${this.#o[i+1]} ${this.#o[i+2]} ${this.#o[i+3]} ${this.#o[i+4]} ${this.#o[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const c=s-t,u=r-i;let d,g;switch(o){case 0:d=it._rescale(this.#o,t,r,c,-u),g=it._rescale(this.#a,t,r,c,-u);break;case 90:d=it._rescaleAndSwap(this.#o,t,i,c,u),g=it._rescaleAndSwap(this.#a,t,i,c,u);break;case 180:d=it._rescale(this.#o,s,i,-c,u),g=it._rescale(this.#a,s,i,-c,u);break;case 270:d=it._rescaleAndSwap(this.#o,s,r,-c,-u),g=it._rescaleAndSwap(this.#a,s,r,-c,-u);break}return{outline:Array.from(d),points:[Array.from(g)]}}#r(t){const i=this.#o;let s=i[4],r=i[5];const o=[s,r,s,r];let c=s,u=r;const d=t?Math.max:Math.min;for(let m=6,y=i.length;m<y;m+=6){const v=i[m+4],w=i[m+5];if(isNaN(i[m]))lt.pointBoundingBox(v,w,o),u<w?(c=v,u=w):u===w&&(c=d(c,v));else{const _=[1/0,1/0,-1/0,-1/0];lt.bezierBoundingBox(s,r,...i.slice(m,m+6),_),lt.rectBoundingBox(..._,o),u<_[3]?(c=_[2],u=_[3]):u===_[3]&&(c=d(c,_[2]))}s=v,r=w}const g=this.#e;g[0]=o[0]-this.#i,g[1]=o[1]-this.#i,g[2]=o[2]-o[0]+2*this.#i,g[3]=o[3]-o[1]+2*this.#i,this.lastPoint=[c,u]}get box(){return this.#e}newOutliner(t,i,s,r,o,c=0){return new hs(t,i,s,r,o,c)}getNewOutline(t,i){const[s,r,o,c]=this.#e,[u,d,g,m]=this.#t,y=o*g,v=c*m,w=s*g+u,_=r*m+d,E=this.newOutliner({x:this.#a[0]*y+w,y:this.#a[1]*v+_},this.#t,this.#s,t,this.#n,i??this.#i);for(let C=2;C<this.#a.length;C+=2)E.add({x:this.#a[C]*y+w,y:this.#a[C+1]*v+_});return E.getOutlines()}}class Ah{#t;#e;#i=[];#n=[];constructor(t,i=0,s=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:w,y:_,width:E,height:C}of t){const R=Math.floor((w-i)/c)*c,L=Math.ceil((w+E+i)/c)*c,D=Math.floor((_-i)/c)*c,b=Math.ceil((_+C+i)/c)*c,S=[R,D,b,!0],T=[L,D,b,!1];this.#i.push(S,T),lt.rectBoundingBox(R,D,L,b,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,g=o[0]-s,m=o[1]-s,y=this.#i.at(r?-1:-2),v=[y[0],y[2]];for(const w of this.#i){const[_,E,C]=w;w[0]=(_-g)/u,w[1]=(E-m)/d,w[2]=(C-m)/d}this.#t=new Float32Array([g,m,u,d]),this.#e=v}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#h(i)),this.#o(i)):(this.#r(i),t.push(...this.#h(i)));return this.#a(t)}#a(t){const i=[],s=new Set;for(const c of t){const[u,d,g]=c;i.push([u,d,c],[u,g,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const d=i[c][2],g=i[c+1][2];d.push(g),g.push(d),s.add(d),s.add(g)}const r=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,d,g,m,y]=c;s.delete(c);let v=u,w=d;for(o=[u,g],r.push(o);;){let _;if(s.has(m))_=m;else if(s.has(y))_=y;else break;s.delete(_),[u,d,g,m,y]=_,v!==u&&(o.push(v,w,u,w===d?d:g),v=u),w=w===d?g:d}o.push(v,w)}return new hS(r,this.#t,this.#e)}#s(t){const i=this.#n;let s=0,r=i.length-1;for(;s<=r;){const o=s+r>>1,c=i[o][0];if(c===t)return o;c<t?s=o+1:r=o-1}return r+1}#o([,t,i]){const s=this.#s(t);this.#n.splice(s,0,[t,i])}#r([,t,i]){const s=this.#s(t);for(let r=s;r<this.#n.length;r++){const[o,c]=this.#n[r];if(o!==t)break;if(o===t&&c===i){this.#n.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[o,c]=this.#n[r];if(o!==t)break;if(o===t&&c===i){this.#n.splice(r,1);return}}}#h(t){const[i,s,r]=t,o=[[i,s,r]],c=this.#s(r);for(let u=0;u<c;u++){const[d,g]=this.#n[u];for(let m=0,y=o.length;m<y;m++){const[,v,w]=o[m];if(!(g<=v||w<=d)){if(v>=d){if(w>g)o[m][1]=g;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=d,w>g&&o.push([i,g,w])}}}return o}}class hS extends it{#t;#e;constructor(t,i,s){super(),this.#e=t,this.#t=i,this.lastPoint=s}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const c=i[o],u=i[o+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const c=[],u=s-t,d=r-i;for(const g of this.#e){const m=new Array(g.length);for(let y=0;y<g.length;y+=2)m[y]=t+g[y]*u,m[y+1]=r-g[y+1]*d;c.push(m)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Sh extends hs{newFreeDrawOutline(t,i,s,r,o,c){return new dS(t,i,s,r,o,c)}}class dS extends Ry{newOutliner(t,i,s,r,o,c=0){return new Sh(t,i,s,r,o,c)}}class ni{#t=null;#e=null;#i;#n=null;#a=!1;#s=!1;#o=null;#r;#h=null;#l=null;#d;static#u=null;static get _keyboardManager(){return xt(this,"_keyboardManager",new zr([[["Escape","mac+Escape"],ni.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ni.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ni.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ni.prototype._moveToPrevious],[["Home","mac+Home"],ni.prototype._moveToBeginning],[["End","mac+End"],ni.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#s=!1,this.#d=Rt.HIGHLIGHT_COLOR,this.#o=t):(this.#s=!0,this.#d=Rt.HIGHLIGHT_DEFAULT_COLOR),this.#l=t?._uiManager||i,this.#r=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",ni.#u||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#o&&(t.ariaControls=`${this.#o.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#c.bind(this),{signal:i}),t.addEventListener("keydown",this.#p.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#f();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#f(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",yi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=s,o.setAttribute("data-l10n-id",ni.#u[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.ariaSelected=r===this.#i,o.addEventListener("click",this.#g.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#p.bind(this),{signal:i}),t}#g(t,i){i.stopPropagation(),this.#r.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#c(t);return}const i=t.target.getAttribute("data-color");i&&this.#g(i,t)}_moveToNext(t){if(!this.#y){this.#c(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#c(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#y){this.#c(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#y){this.#c(t);return}this.#n.lastChild?.focus()}#p(t){ni._keyboardManager.exec(this,t)}#c(t){if(this.#y){this.hideDropdown();return}if(this.#a=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#l.combinedSignal(this.#h)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const i=this.#n=this.#f();this.#t.append(i)}#m(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#h?.abort(),this.#h=null}get#y(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#o?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const i=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class re extends ht{#t=null;#e=0;#i;#n=null;#a=null;#s=null;#o=null;#r=0;#h=null;#l=null;#d=null;#u=!1;#f=null;#g;#p=null;#c="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=re.prototype;return xt(this,"_keyboardManager",new zr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||re._defaultColor,this.#m=t.thickness||re._defaultThickness,this.#g=t.opacity||re._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#c=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#A(t),this.#M()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#o=t.focusNode,this.#r=t.focusOffset,this.#b(),this.#M(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Ah(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new Ah(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=i.getOutlines();const{lastPoint:s}=this.#s;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#A({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#s=t.getNewOutline(this.#m/2+r,.0025),i>=0)this.#d=i,this.#n=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:re.#E(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:re.#E(this.#s.box,m),path:{d:this.#s.toSVGPath()}})}const[o,c,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*y/m,this.height=d*m/y;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*y/m,this.height=d*m/y;break}}const{lastPoint:g}=this.#s;this.#f=[(g[0]-o)/u,(g[1]-c)/d]}static initialize(t,i){ht.initialize(t,i),re._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Rt.HIGHLIGHT_DEFAULT_COLOR:re._defaultColor=i;break;case Rt.HIGHLIGHT_THICKNESS:re._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#f}updateParams(t,i){switch(t){case Rt.HIGHLIGHT_COLOR:this.#S(i);break;case Rt.HIGHLIGHT_THICKNESS:this.#w(i);break}}static get defaultPropertiesToUpdate(){return[[Rt.HIGHLIGHT_DEFAULT_COLOR,re._defaultColor],[Rt.HIGHLIGHT_THICKNESS,re._defaultThickness]]}get propertiesToUpdate(){return[[Rt.HIGHLIGHT_COLOR,this.color||re._defaultColor],[Rt.HIGHLIGHT_THICKNESS,this.#m||re._defaultThickness],[Rt.HIGHLIGHT_FREE,this.#u]]}#S(t){const i=(o,c)=>{this.color=o,this.#g=c,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:o,"fill-opacity":c}}),this.#a?.updateColor(o)},s=this.color,r=this.#g;this.addCommands({cmd:i.bind(this,t,re._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#w(t){const i=this.#m,s=r=>{this.#m=r,this.#x(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Rt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new ni({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#L())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#L())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#M(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#C():t&&(this.#M(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#x(t){if(!this.#u)return;this.#A({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#M(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#u),this.#h&&(this.#h.style.clipPath=this.#n))}static#E([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#u?(t=(t-this.rotation+360)%360,s=re.#E(this.#l.box,t)):s=re.#E([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#p,{bbox:re.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#c&&(t.setAttribute("aria-label",this.#c),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const i=this.#h=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#n;const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),ey(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){re._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#o,this.#r)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#T(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#L(){return this.#u?this.rotation:0}#O(){if(this.#u)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=this.#i,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:g,width:m,height:y}of o){const v=d*t+s,w=(1-g)*i+r;c[u]=c[u+4]=v,c[u+1]=c[u+3]=w,c[u+2]=c[u+6]=v+m*t,c[u+5]=c[u+7]=w-y*i,u+=8}return c}#N(t){return this.#l.serialize(t,this.#L())}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:c,y:u,width:d,height:g}=s.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),v=w=>{m.abort(),this.#_(t,w)};window.addEventListener("blur",v,{signal:y}),window.addEventListener("pointerup",v,{signal:y}),window.addEventListener("pointerdown",oe,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",yi,{signal:y}),s.addEventListener("pointermove",this.#F.bind(this,t),{signal:y}),this._freeHighlight=new Sh({x:r,y:o},[c,u,d,g],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#F(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#_(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof xy){const{data:{quadPoints:_,rect:E,rotation:C,id:R,color:L,opacity:D,popupRef:b},parent:{page:{pageNumber:S}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(L),opacity:D,quadPoints:_,boxes:null,pageIndex:S-1,rect:E.slice(0),rotation:C,annotationElementId:R,id:R,deleted:!1,popupRef:b}}else if(t instanceof qh){const{data:{inkLists:_,rect:E,rotation:C,id:R,color:L,borderStyle:{rawWidth:D},popupRef:b},parent:{page:{pageNumber:S}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(L),thickness:D,inkLists:_,boxes:null,pageIndex:S-1,rect:E.slice(0),rotation:C,annotationElementId:R,id:R,deleted:!1,popupRef:b}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,g=await super.deserialize(t,i,s);g.color=lt.makeHexColor(...o),g.#g=d||1,u&&(g.#m=t.thickness),g._initialData=r;const[m,y]=g.pageDimensions,[v,w]=g.pageTranslation;if(c){const _=g.#i=[];for(let E=0;E<c.length;E+=8)_.push({x:(c[E]-v)/m,y:1-(c[E+1]-w)/y,width:(c[E+2]-c[E])/m,height:(c[E+1]-c[E+5])/y});g.#b(),g.#M(),g.rotate(g.rotation)}else if(u){g.#u=!0;const _=u[0],E={x:_[0]-v,y:y-(_[1]-w)},C=new Sh(E,[0,0,m,y],1,g.#m/2,!0,.001);for(let D=0,b=_.length;D<b;D+=2)E.x=_[D]-v,E.y=y-(_[D+1]-w),C.add(E);const{id:R,clipPathId:L}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);g.#A({highlightOutlines:C.getOutlines(),highlightId:R,clipPathId:L}),g.#M(),g.rotate(g.parentRotation)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=ht._colorManager.convert(this.color),r={annotationType:mt.HIGHLIGHT,color:s,opacity:this.#g,thickness:this.#m,quadPoints:this.#O(),outlines:this.#N(i),pageIndex:this.pageIndex,rect:i,rotation:this.#L(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#v(r)?null:(r.id=this.annotationElementId,r)}#v(t){const{color:i}=this._initialData;return t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class My{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Gt("Not implemented")}}class ft extends ht{#t=null;#e;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static#s=NaN;static#o=null;static#r=null;static#h=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#c(t.box)}#d(t,i){const{id:s}=i.drawLayer.draw(ft._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Gt("Not implemented")}static get typesMap(){Gt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(ft.#i.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],c=u=>{r.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#c(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#u()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,i,s,r]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/o),r*(o/c)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(c/o),r*(o/c)];default:return[t,i,s,r]}}#p(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(o/c),r*(c/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/c),r*(c/o)];default:return[t,i,s,r]}}#c(t){if([this.x,this.y,this.width,this.height]=this.#g(t),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()}#m(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:c,parentDimensions:[u,d]}=this;switch((o*4+c)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/d),r*(d/u),s*(u/d)];case 5:return[1-i,t,s*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-i,r*(d/u),s*(u/d)];case 7:return[i-s*(u/d),1-t-r*(d/u),s*(u/d),r*(d/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(d/u),i,r*(d/u),s*(u/d)];case 13:return[1-i-s*(u/d),t-r*(d/u),s*(u/d),r*(d/u)];case 14:return[1-t,1-i-s*(u/d),r*(d/u),s*(u/d)];case 15:return[i,1-t,s*(u/d),r*(d/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,c]=this.parentDimensions;return this.setDims(this.width*o,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){Gt("Not implemented")}static startDrawing(t,i,s,r){const{target:o,offsetX:c,offsetY:u,pointerId:d,pointerType:g}=r;if(ft.#o&&ft.#o!==g)return;const{viewport:{rotation:m}}=t,{width:y,height:v}=o.getBoundingClientRect(),w=ft.#n=new AbortController,_=t.combinedSignal(w);if(ft.#s||=d,ft.#o??=g,window.addEventListener("pointerup",E=>{ft.#s===E.pointerId?this._endDraw(E):ft.#r?.delete(E.pointerId)},{signal:_}),window.addEventListener("pointercancel",E=>{ft.#s===E.pointerId?this._currentParent.endDrawingSession():ft.#r?.delete(E.pointerId)},{signal:_}),window.addEventListener("pointerdown",E=>{ft.#o===E.pointerType&&((ft.#r||=new Set).add(E.pointerId),ft.#i.isCancellable()&&(ft.#i.removeLastElement(),ft.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",yi,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",E=>{E.timeStamp===ft.#h&&oe(E)},{signal:_}),t.toggleDrawing(),i._editorUndoBar?.hide(),ft.#i){t.drawLayer.updateProperties(this._currentDrawId,ft.#i.startNew(c,u,y,v,m));return}i.updateUIForDefaultProperties(this),ft.#i=this.createDrawerInstance(c,u,y,v,m),ft.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ft.#a.toSVGProperties(),ft.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ft.#h=-1,!ft.#i)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(ft.#s===r){if(ft.#r?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ft.#i.add(i,s)),ft.#h=t.timeStamp,oe(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ft.#i=null,ft.#a=null,ft.#o=null,ft.#h=NaN),ft.#n&&(ft.#n.abort(),ft.#n=null,ft.#s=NaN,ft.#r=null)}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,ft.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=ft.#i,r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:Rt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Rt.DRAW_STEP),!ft.#i.isEmpty()){const{pageDimensions:[s,r],scale:o}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ft.#i.getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:ft.#a,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,c){Gt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}=i.viewport,d=this.deserializeDraw(c,u,r,o,this._INNER_MARGIN,t),g=await super.deserialize(t,i,s);return g.createDrawingOptions(t),g.#l({drawOutlines:d}),g.#f(),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class fS{#t=new Float64Array(6);#e;#i;#n;#a;#s;#o="";#r=0;#h=new Hr;#l;#d;constructor(t,i,s,r,o,c){this.#l=s,this.#d=r,this.#n=o,this.#a=c,[t,i]=this.#u(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i],this.#i=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#a=i)}#u(t,i){return it._normalizePoint(t,i,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,i){[t,i]=this.#u(t,i);const[s,r,o,c]=this.#t.subarray(2,6),u=t-o,d=i-c;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,i),isNaN(s)?(this.#t.set([o,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,o,c,t,i],0),this.#e.push(...it.createBezierPoints(s,r,o,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,o){this.#l=s,this.#d=r,this.#n=o,[t,i]=this.#u(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:c,points:this.#s}),this.#t.set(c,0),this.#r=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#r=0,{path:{d:this.toSVGPath()}}):this.#h.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#h.removeLastElement();this.#i.pop(),this.#o="";for(let t=0,i=this.#i.length;t<i;t++){const{line:s,points:r}=this.#i[t];this.#e=s,this.#s=r,this.#r=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){const t=it.svgRound(this.#e[4]),i=it.svgRound(this.#e[5]);if(this.#s.length===2)return this.#o=`${this.#o} M ${t} ${i} Z`,this.#o;if(this.#s.length<=6){const r=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,r)} M ${t} ${i}`,this.#r=6}if(this.#s.length===4){const r=it.svgRound(this.#e[10]),o=it.svgRound(this.#e[11]);return this.#o=`${this.#o} L ${r} ${o}`,this.#r=12,this.#o}const s=[];this.#r===0&&(s.push(`M ${t} ${i}`),this.#r=6);for(let r=this.#r,o=this.#e.length;r<o;r+=6){const[c,u,d,g,m,y]=this.#e.slice(r,r+6).map(it.svgRound);s.push(`C${c} ${u} ${d} ${g} ${m} ${y}`)}return this.#o+=s.join(" "),this.#r=this.#e.length,this.#o}getOutlines(t,i,s,r){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#h.build(this.#i,t,i,s,this.#n,this.#a,r),this.#t=null,this.#e=null,this.#i=null,this.#o=null,this.#h}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Hr extends it{#t;#e=0;#i;#n;#a;#s;#o;#r;#h;build(t,i,s,r,o,c,u){this.#a=i,this.#s=s,this.#o=r,this.#r=o,this.#h=c,this.#i=u??0,this.#n=t,this.#u()}get thickness(){return this.#h}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#n){if(t.push(`M${it.svgRound(i[4])} ${it.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${it.svgRound(i[10])} ${it.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,c,u,d,g,m]=i.subarray(s,s+6).map(it.svgRound);t.push(`C${o} ${c} ${u} ${d} ${g} ${m}`)}}return t.join("")}serialize([t,i,s,r],o){const c=[],u=[],[d,g,m,y]=this.#d();let v,w,_,E,C,R,L,D,b;switch(this.#r){case 0:b=it._rescale,v=t,w=i+r,_=s,E=-r,C=t+d*s,R=i+(1-g-y)*r,L=t+(d+m)*s,D=i+(1-g)*r;break;case 90:b=it._rescaleAndSwap,v=t,w=i,_=s,E=r,C=t+g*s,R=i+d*r,L=t+(g+y)*s,D=i+(d+m)*r;break;case 180:b=it._rescale,v=t+s,w=i,_=-s,E=r,C=t+(1-d-m)*s,R=i+g*r,L=t+(1-d)*s,D=i+(g+y)*r;break;case 270:b=it._rescaleAndSwap,v=t+s,w=i+r,_=-s,E=-r,C=t+(1-g-y)*s,R=i+(1-d-m)*r,L=t+(1-g)*s,D=i+(1-d)*r;break}for(const{line:S,points:T}of this.#n)c.push(b(S,v,w,_,E,o?new Array(S.length):null)),u.push(b(T,v,w,_,E,o?new Array(T.length):null));return{lines:c,points:u,rect:[C,R,L,D]}}static deserialize(t,i,s,r,o,{paths:{lines:c,points:u},rotation:d,thickness:g}){const m=[];let y,v,w,_,E;switch(d){case 0:E=it._rescale,y=-t/s,v=i/r+1,w=1/s,_=-1/r;break;case 90:E=it._rescaleAndSwap,y=-i/r,v=-t/s,w=1/r,_=1/s;break;case 180:E=it._rescale,y=t/s+1,v=-i/r,w=-1/s,_=1/r;break;case 270:E=it._rescaleAndSwap,y=i/r+1,v=t/s+1,w=-1/r,_=-1/s;break}if(!c){c=[];for(const R of u){const L=R.length;if(L===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1]]));continue}if(L===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1],NaN,NaN,NaN,NaN,R[2],R[3]]));continue}const D=new Float32Array(3*(L-2));c.push(D);let[b,S,T,M]=R.subarray(0,4);D.set([NaN,NaN,NaN,NaN,b,S],0);for(let N=4;N<L;N+=2){const B=R[N],Y=R[N+1];D.set(it.createBezierPoints(b,S,T,M,B,Y),(N-2)*3),[b,S,T,M]=[T,M,B,Y]}}}for(let R=0,L=c.length;R<L;R++)m.push({line:E(c[R].map(D=>D??NaN),y,v,w,_),points:E(u[R].map(D=>D??NaN),y,v,w,_)});const C=new this.prototype.constructor;return C.build(m,s,r,1,d,g,o),C}#l(t=this.#h){const i=this.#i+t/2*this.#o;return this.#r%180===0?[i/this.#a,i/this.#s]:[i/this.#s,i/this.#a]}#d(){const[t,i,s,r]=this.#t,[o,c]=this.#l(0);return[t+o,i+c,s-2*o,r-2*c]}#u(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)lt.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],c=r[5];for(let u=6,d=r.length;u<d;u+=6){const[g,m,y,v,w,_]=r.subarray(u,u+6);lt.bezierBoundingBox(o,c,g,m,y,v,w,_,t),o=w,c=_}}const[i,s]=this.#l();t[0]=Me(t[0]-i,0,1),t[1]=Me(t[1]-s,0,1),t[2]=Me(t[2]+i,0,1),t[3]=Me(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#h=t;const[r,o]=this.#l(),[c,u]=[r-i,o-s],d=this.#t;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateParentDimensions([t,i],s){const[r,o]=this.#l();this.#a=t,this.#s=i,this.#o=s;const[c,u]=this.#l(),d=c-r,g=u-o,m=this.#t;return m[0]-=d,m[1]-=g,m[2]+=2*d,m[3]+=2*g,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,o=0,c=0,u=0,d=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,d=i;break;case 270:r=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${s} ${r} ${o} ${c} ${it.svgRound(u)} ${it.svgRound(d)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,c]=this.#l(),[u,d,g,m]=this.#t;if(Math.abs(g-o)<=it.PRECISION||Math.abs(m-c)<=it.PRECISION){const E=t+s/2-(u+g/2),C=i+r/2-(d+m/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:`${this.rotationTransform} translate(${E} ${C})`}}}const y=(s-2*o)/(g-2*o),v=(r-2*c)/(m-2*c),w=g/s,_=m/r;return{path:{"transform-origin":`${it.svgRound(u)} ${it.svgRound(d)}`,transform:`${this.rotationTransform} scale(${w} ${_}) translate(${it.svgRound(o)} ${it.svgRound(c)}) scale(${y} ${v}) translate(${it.svgRound(-o)} ${it.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,c]=this.#l(),u=this.#t,[d,g,m,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(m-o)<=it.PRECISION||Math.abs(y-c)<=it.PRECISION){const C=t+s/2-(d+m/2),R=i+r/2-(g+y/2);for(const{line:L,points:D}of this.#n)it._translate(L,C,R,L),it._translate(D,C,R,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(s-2*o)/(m-2*o),w=(r-2*c)/(y-2*c),_=-v*(d+o)+t+o,E=-w*(g+c)+i+c;if(v!==1||w!==1||_!==0||E!==0)for(const{line:C,points:R}of this.#n)it._rescale(C,_,E,v,w,C),it._rescale(R,_,E,v,w,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,c=this.#t,u=t-c[0],d=i-c[1];if(this.#a===r&&this.#s===o)for(const{line:g,points:m}of this.#n)it._translate(g,u,d,g),it._translate(m,u,d,m);else{const g=this.#a/r,m=this.#s/o;this.#a=r,this.#s=o;for(const{line:y,points:v}of this.#n)it._rescale(y,u,d,g,m,y),it._rescale(v,u,d,g,m,v);c[2]*=g,c[3]*=m}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Ml extends My{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ht._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Ml(this._viewParameters);return t.updateAll(this),t}}class Yh extends ft{static _type="ink";static _editorType=mt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){ht.initialize(t,i),this._defaultDrawingOptions=new Ml(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return xt(this,"typesMap",new Map([[Rt.INK_THICKNESS,"stroke-width"],[Rt.INK_COLOR,"stroke"],[Rt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new fS(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,c){return Hr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){let r=null;if(t instanceof qh){const{data:{inkLists:c,rect:u,rotation:d,id:g,color:m,opacity:y,borderStyle:{rawWidth:v},popupRef:w},parent:{page:{pageNumber:_}}}=t;r=t={annotationType:mt.INK,color:Array.from(m),thickness:v,opacity:y,paths:{points:c},boxes:null,pageIndex:_-1,rect:u.slice(0),rotation:d,annotationElementId:g,id:g,deleted:!1,popupRef:w}}const o=await super.deserialize(t,i,s);return o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Yh.getDefaultDrawingOptions({stroke:lt.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":u}}=this,d={annotationType:mt.INK,color:ht._colorManager.convert(o),opacity:c,thickness:u,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(d.isCopy=!0,d):this.annotationElementId&&!this.#t(d)?null:(d.id=this.annotationElementId,d)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i}),null}}class wh extends Hr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const gl=8,yr=3;class us{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,i,s,r,o,c,u){const d=this.#e(s,r,o,c);for(let g=0;g<8;g++){const m=(-g+d-u+16)%8,y=this.#i[2*m],v=this.#i[2*m+1];if(t[(s+y)*i+(r+v)]!==0)return m}return-1}static#a(t,i,s,r,o,c,u){const d=this.#e(s,r,o,c);for(let g=0;g<8;g++){const m=(g+d+u+16)%8,y=this.#i[2*m],v=this.#i[2*m+1];if(t[(s+y)*i+(r+v)]!==0)return m}return-1}static#s(t,i,s,r){const o=t.length,c=new Int32Array(o);for(let m=0;m<o;m++)c[m]=t[m]<=r?1:0;for(let m=1;m<s-1;m++)c[m*i]=c[m*i+i-1]=0;for(let m=0;m<i;m++)c[m]=c[i*s-1-m]=0;let u=1,d;const g=[];for(let m=1;m<s-1;m++){d=1;for(let y=1;y<i-1;y++){const v=m*i+y,w=c[v];if(w===0)continue;let _=m,E=y;if(w===1&&c[v-1]===0)u+=1,E-=1;else if(w>=1&&c[v+1]===0)u+=1,E+=1,w>1&&(d=w);else{w!==1&&(d=Math.abs(w));continue}const C=[y,m],R=E===y+1,L={isHole:R,points:C,id:u,parent:0};g.push(L);let D;for(const $ of g)if($.id===d){D=$;break}D?D.isHole?L.parent=R?D.parent:d:L.parent=R?d:D.parent:L.parent=R?d:0;const b=this.#n(c,i,m,y,_,E,0);if(b===-1){c[v]=-u,c[v]!==1&&(d=Math.abs(c[v]));continue}let S=this.#i[2*b],T=this.#i[2*b+1];const M=m+S,N=y+T;_=M,E=N;let B=m,Y=y;for(;;){const $=this.#a(c,i,B,Y,_,E,1);S=this.#i[2*$],T=this.#i[2*$+1];const J=B+S,nt=Y+T;C.push(nt,J);const tt=B*i+Y;if(c[tt+1]===0?c[tt]=-u:c[tt]===1&&(c[tt]=u),J===m&&nt===y&&B===M&&Y===N){c[v]!==1&&(d=Math.abs(c[v]));break}else _=B,E=Y,B=J,Y=nt}}}return g}static#o(t,i,s,r){if(s-i<=4){for(let M=i;M<s-2;M+=2)r.push(t[M],t[M+1]);return}const o=t[i],c=t[i+1],u=t[s-4]-o,d=t[s-3]-c,g=Math.hypot(u,d),m=u/g,y=d/g,v=m*c-y*o,w=d/u,_=1/g,E=Math.atan(w),C=Math.cos(E),R=Math.sin(E),L=_*(Math.abs(C)+Math.abs(R)),D=_*(1-L+L**2),b=Math.max(Math.atan(Math.abs(R+C)*D),Math.atan(Math.abs(R-C)*D));let S=0,T=i;for(let M=i+2;M<s-2;M+=2){const N=Math.abs(v-m*t[M+1]+y*t[M]);N>S&&(T=M,S=N)}S>(g*b)**2?(this.#o(t,i,T+2,r),this.#o(t,T,s,r)):r.push(o,c)}static#r(t){const i=[],s=t.length;return this.#o(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#h(t,i,s,r,o,c){const u=new Float32Array(c**2),d=-2*r**2,g=c>>1;for(let E=0;E<c;E++){const C=(E-g)**2;for(let R=0;R<c;R++)u[E*c+R]=Math.exp((C+(R-g)**2)/d)}const m=new Float32Array(256),y=-2*o**2;for(let E=0;E<256;E++)m[E]=Math.exp(E**2/y);const v=t.length,w=new Uint8Array(v),_=new Uint32Array(256);for(let E=0;E<s;E++)for(let C=0;C<i;C++){const R=E*i+C,L=t[R];let D=0,b=0;for(let T=0;T<c;T++){const M=E+T-g;if(!(M<0||M>=s))for(let N=0;N<c;N++){const B=C+N-g;if(B<0||B>=i)continue;const Y=t[M*i+B],$=u[T*c+N]*m[Math.abs(Y-L)];D+=Y*$,b+=$}}const S=w[R]=Math.round(D/b);_[S]++}return[w,_]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){if(t[(u<<2)+3]===0){r=s[u]=255;continue}const m=s[u]=t[u<<2];m>r&&(r=m),m<o&&(o=m)}const c=255/(r-o);for(let u=0;u<i;u++)s[u]=(s[u]-o)*c;return s}static#u(t){let i,s=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let c=o,u=o;for(i=o;i<256;i++){const d=t[i];d>s&&(i-c>r&&(r=i-c,u=i-1),s=d,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:o}=this.#t;let c=s,u=r;if(s>o||r>o){let v=s,w=r,_=Math.log2(Math.max(s,r)/o);const E=Math.floor(_);_=_===E?E-1:E;for(let R=0;R<_;R++){c=Math.ceil(v/2),u=Math.ceil(w/2);const L=new OffscreenCanvas(c,u);L.getContext("2d").drawImage(t,0,0,v,w,0,0,c,u),v=c,w=u,t!==i&&t.close(),t=L.transferToImageBitmap()}const C=Math.min(o/c,o/u);c=Math.round(c*C),u=Math.round(u*C)}const g=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});g.filter="grayscale(1)",g.drawImage(t,0,0,t.width,t.height,0,0,c,u);const m=g.getImageData(0,0,c,u).data;return[this.#d(m),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},o,c,u,d){let g=new OffscreenCanvas(1,1),m=g.getContext("2d",{alpha:!1});const y=200,v=m.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:_,actualBoundingBoxAscent:E,actualBoundingBoxDescent:C,fontBoundingBoxAscent:R,fontBoundingBoxDescent:L,width:D}=m.measureText(t),b=1.5,S=Math.ceil(Math.max(Math.abs(w)+Math.abs(_)||0,D)*b),T=Math.ceil(Math.max(Math.abs(E)+Math.abs(C)||y,Math.abs(R)+Math.abs(L)||y)*b);g=new OffscreenCanvas(S,T),m=g.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=v,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,S,T),m.fillStyle="black",m.fillText(t,S*(b-1)/2,T*(3-b)/2);const M=this.#d(m.getImageData(0,0,S,T).data),N=this.#l(M),B=this.#u(N),Y=this.#s(M,S,T,B);return this.processDrawnLines({lines:{curves:Y,width:S,height:T},pageWidth:o,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,o){const[c,u,d]=this.#f(t),[g,m]=this.#h(c,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#u(m),v=this.#s(g,u,d,y);return this.processDrawnLines({lines:{curves:v,width:u,height:d},pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:o,mustSmooth:c,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:d,width:g,height:m}=t,y=t.thickness??0,v=[],w=Math.min(i/g,s/m),_=w/i,E=w/s,C=[];for(const{points:L}of d){const D=c?this.#r(L):L;if(!D)continue;C.push(D);const b=D.length,S=new Float32Array(b),T=new Float32Array(3*(b===2?2:b-2));if(v.push({line:T,points:S}),b===2){S[0]=D[0]*_,S[1]=D[1]*E,T.set([NaN,NaN,NaN,NaN,S[0],S[1]],0);continue}let[M,N,B,Y]=D;M*=_,N*=E,B*=_,Y*=E,S.set([M,N,B,Y],0),T.set([NaN,NaN,NaN,NaN,M,N],0);for(let $=4;$<b;$+=2){const J=S[$]=D[$]*_,nt=S[$+1]=D[$+1]*E;T.set(it.createBezierPoints(M,N,B,Y,J,nt),($-2)*3),[M,N,B,Y]=[B,Y,J,nt]}}if(v.length===0)return null;const R=u?new wh:new Hr;return R.build(v,i,s,1,r,u?0:y,o),{outline:R,newCurves:C,areContours:u,thickness:y,width:g,height:m}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:o}){let c=1/0,u=-1/0,d=0;for(const D of t){d+=D.length;for(let b=2,S=D.length;b<S;b++){const T=D[b]-D[b-2];c=Math.min(c,T),u=Math.max(u,T)}}let g;c>=-128&&u<=127?g=Int8Array:c>=-32768&&u<=32767?g=Int16Array:g=Int32Array;const m=t.length,y=gl+yr*m,v=new Uint32Array(y);let w=0;v[w++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*m)*g.BYTES_PER_ELEMENT,v[w++]=0,v[w++]=r,v[w++]=o,v[w++]=i?0:1,v[w++]=Math.max(0,Math.floor(s??0)),v[w++]=m,v[w++]=g.BYTES_PER_ELEMENT;for(const D of t)v[w++]=D.length-2,v[w++]=D[0],v[w++]=D[1];const _=new CompressionStream("deflate-raw"),E=_.writable.getWriter();await E.ready,E.write(v);const C=g.prototype.constructor;for(const D of t){const b=new C(D.length-2);for(let S=2,T=D.length;S<T;S++)b[S-2]=D[S]-D[S-2];E.write(b)}E.close();const R=await new Response(_.readable).arrayBuffer(),L=new Uint8Array(R);return Qm(L)}static async decompressSignature(t){try{const i=jv(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const D of s)c||=new Uint8Array(new Uint32Array(D.buffer,0,4)[0]),c.set(D,u),u+=D.length;const d=new Uint32Array(c.buffer,0,c.length>>2),g=d[1];if(g!==0)throw new Error(`Invalid version: ${g}`);const m=d[2],y=d[3],v=d[4]===0,w=d[5],_=d[6],E=d[7],C=[],R=(gl+yr*_)*Uint32Array.BYTES_PER_ELEMENT;let L;switch(E){case Int8Array.BYTES_PER_ELEMENT:L=new Int8Array(c.buffer,R);break;case Int16Array.BYTES_PER_ELEMENT:L=new Int16Array(c.buffer,R);break;case Int32Array.BYTES_PER_ELEMENT:L=new Int32Array(c.buffer,R);break}u=0;for(let D=0;D<_;D++){const b=d[yr*D+gl],S=new Float32Array(b+2);C.push(S);for(let T=0;T<yr-1;T++)S[T]=d[yr*D+gl+T+1];for(let T=0;T<b;T++)S[T+2]=S[T]+L[u++]}return{areContours:v,thickness:w,outlines:C,width:m,height:y}}catch(i){return bt(`decompressSignature: ${i}`),null}}}class Xh extends My{constructor(){super(),super.updateProperties({fill:ht._defaultLineColor,"stroke-width":0})}clone(){const t=new Xh;return t.updateAll(this),t}}class $h extends Ml{constructor(t){super(t),super.updateProperties({stroke:ht._defaultLineColor,"stroke-width":1})}clone(){const t=new $h(this._viewParameters);return t.updateAll(this),t}}class ki extends ft{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=mt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){ht.initialize(t,i),this._defaultDrawingOptions=new Xh,this._defaultDrawnSignatureOptions=new $h(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return xt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:o,areContours:c,description:u,uuid:d,heightInPage:g}=this.#i,{rawDims:{pageWidth:m,pageHeight:y},rotation:v}=this.parent.viewport,w=us.processDrawnLines({lines:r,pageWidth:m,pageHeight:y,rotation:v,innerMargin:ki._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(w,g,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=this.#i,c=Math.max(r,o),u=us.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:r,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:c}=this,{outline:u}=this.#i=t;this.#t=u instanceof wh,this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let d;this.#t?d=ki.getDefaultDrawingOptions():(d=ki._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[g,m]=this.parentDimensions,[,y]=this.pageDimensions;let v=i/y;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(g*this.width,m*this.height),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return us.process(t,i,s,r,ki._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return us.extractContoursFromText(t,i,s,r,o,ki._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return us.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:ki._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=ki.getDefaultDrawingOptions():(this._drawingOptions=ki._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,c={annotationType:mt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(c.paths={lines:i,points:s},c.uuid=this.#n,c.isCopy=!0):c.lines=i,this.#e&&(c.accessibilityData={type:"Figure",alt:this.#e}),c}static deserializeDraw(t,i,s,r,o,c){return c.areContours?wh.deserialize(t,i,s,r,o,c):Hr.deserialize(t,i,s,r,o,c)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.#e=t.accessibilityData?.alt||"",r.#n=t.uuid,r}}class gS extends ht{#t=null;#e=null;#i=null;#n=null;#a=null;#s="";#o=null;#r=!1;#h=null;#l=!1;#d=!1;static _type="stamp";static _editorType=mt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){ht.initialize(t,i)}static isHandlingMimeForPasting(t){return Sl.includes(t)}static paste(t,i){i.pasteEditor({mode:mt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#u(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#u(r)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(r=>this.#u(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Sl.join(",");const i=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#o?.remove(),this.#o=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#o===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#a||this.#e||this.#r)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#r||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#r=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#h!==null&&clearTimeout(this.#h);const t=200;this.#h=setTimeout(()=>{this.#h=null,this.#m()},t)}#p(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>c*r||s>c*o){const m=Math.min(c*r/i,c*o/s);i*=m,s*=m}const[u,d]=this.parentDimensions;this.setDims(i*u/r,s*d/o),this._uiManager.enableWaiting(!1);const g=this.#o=document.createElement("canvas");g.setAttribute("role","img"),this.addContainer(g),this.width=i/r,this.height=s/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new xi;let u=this.#t,d=r,g=o,m=null;if(i){if(r>i||o>i){const T=Math.min(i/r,i/o);d=Math.floor(r*T),g=Math.floor(o*T)}m=document.createElement("canvas");const v=m.width=Math.ceil(d*c.sx),w=m.height=Math.ceil(g*c.sy);this.#l||(u=this.#c(v,w));const _=m.getContext("2d");_.filter=this._uiManager.hcmFilter;let E="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(E="#8f8f9d",C="#42414d");const R=15,L=R*c.sx,D=R*c.sy,b=new OffscreenCanvas(L*2,D*2),S=b.getContext("2d");S.fillStyle=E,S.fillRect(0,0,L*2,D*2),S.fillStyle=C,S.fillRect(0,0,L,D),S.fillRect(L,D,L,D),_.fillStyle=_.createPattern(b,"repeat"),_.fillRect(0,0,v,w),_.drawImage(u,0,0,u.width,u.height,0,0,v,w)}let y=null;if(s){let v,w;if(c.symmetric&&u.width<t&&u.height<t)v=u.width,w=u.height;else if(u=this.#t,r>t||o>t){const C=Math.min(t/r,t/o);v=Math.floor(r*C),w=Math.floor(o*C),this.#l||(u=this.#c(v,w))}const E=new OffscreenCanvas(v,w).getContext("2d",{willReadFrequently:!0});E.drawImage(u,0,0,u.width,u.height,0,0,v,w),y={width:v,height:w,data:E.getImageData(0,0,v,w).data}}return{canvas:m,width:d,height:g,imageData:y}}#c(t,i){const{width:s,height:r}=this.#t;let o=s,c=r,u=this.#t;for(;o>2*t||c>2*i;){const d=o,g=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(o,c);m.getContext("2d").drawImage(u,0,0,d,g,0,0,o,c),u=m.transferToImageBitmap()}return u}#m(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new xi,c=Math.ceil(s*t*o.sx),u=Math.ceil(r*i*o.sy),d=this.#o;if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const g=this.#l?this.#t:this.#c(c,u),m=d.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(g,0,0,g.width,g.height,0,0,c,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*ps.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ps.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,o=!1;if(t instanceof Ty){const{data:{rect:E,rotation:C,id:R,structParent:L,popupRef:D},container:b,parent:{page:{pageNumber:S}},canvas:T}=t;let M,N;T?(delete t.canvas,{id:M,bitmap:N}=s.imageManager.getFromCanvas(b.id,T),T.remove()):(o=!0,t._hasNoCanvas=!0);const B=(await i._structTree.getAriaAttributes(`${Lh}${R}`))?.get("aria-label")||"";r=t={annotationType:mt.STAMP,bitmapId:M,bitmap:N,pageIndex:S-1,rect:E.slice(0),rotation:C,annotationElementId:R,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:B},isSvg:!1,structParent:L,popupRef:D}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:d,bitmapUrl:g,bitmapId:m,isSvg:y,accessibilityData:v}=t;o?(s.addMissingCanvas(t.id,c),c.#r=!0):m&&s.imageManager.isValidId(m)?(c.#e=m,d&&(c.#t=d)):c.#n=g,c.#l=y;const[w,_]=c.pageDimensions;return c.width=(u[2]-u[0])/w,c.height=(u[3]-u[1])/_,v&&(c.altTextData=v),c._initialData=r,c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:mt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#b(s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#b(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}class Bi{#t;#e=!1;#i=null;#n=null;#a=null;#s=new Map;#o=!1;#r=!1;#h=!1;#l=null;#d=null;#u=null;#f=null;#g=null;#p=-1;#c;static _initialized=!1;static#m=new Map([me,Yh,gS,re,ki].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:g,l10n:m}){const y=[...Bi.#m.values()];if(!Bi._initialized){Bi._initialized=!0;for(const v of y)v.initialize(m,t)}t.registerEditorTypes(y),this.#c=t,this.pageIndex=i,this.div=s,this.#t=o,this.#i=c,this.viewport=g,this.#u=d,this.drawLayer=u,this._structTree=r,this.#c.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===mt.NONE}updateToolbar(t){this.#c.updateToolbar(t)}updateMode(t=this.#c.getMode()){switch(this.#w(),t){case mt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const s of Bi.#m.values())i.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#u?.div}setEditingState(t){this.#c.setEditingState(t)}addCommands(t){this.#c.addCommands(t)}cleanUndoStack(t){this.#c.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.#h=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;const t=new Set;for(const s of this.#s.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#c.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!this.#i){this.#h=!1;return}const i=this.#i.getEditableAnnotations();for(const s of i){if(s.hide(),this.#c.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#h=!1}disable(){if(this.#r=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#g){this.#g=new AbortController;const r=this.#c.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:g}=o,m=this.#p;if(g-m>500){this.#p=g;return}this.#p=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const v=document.elementsFromPoint(u,d);if(y.toggle("getElements",!1),!this.div.contains(v[0]))return;let w;const _=new RegExp(`^${Ym}[0-9]+$`);for(const C of v)if(_.test(C.id)){w=C.id;break}if(!w)return;const E=this.#s.get(w);E?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),E.dblclick())},{signal:r,capture:!0})}const t=new Map,i=new Map;for(const r of this.#s.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else i.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#i){const r=this.#i.getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(this.#c.isDeletedAnnotationElement(c))continue;let u=i.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=t.get(c),u&&(this.#c.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of Bi.#m.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#r=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#c.getActive()!==t&&this.#c.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const t=this.#c.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#y(t){this.#c.unselectAll();const{target:i}=t;if(i===this.#u.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#u.div.contains(i)){const{isMac:s}=Ae.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#c.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),re.startHighlighting(this,this.#c.direction==="ltr",{target:this.#u.div,x:t.x,y:t.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:i}=t;i&&this.#c.isDeletedAnnotationElement(i)&&this.#c.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#r&&t.annotationElementId&&this.#c.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#c.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#c.addDeletedAnnotationElement(t.annotationElementId),ht.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#c.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#h),this.#c.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getNextId(){return this.#c.getId()}get#b(){return Bi.#m.get(this.#c.getMode())}combinedSignal(t){return this.#c.combinedSignal(t)}#A(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#c.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#S(),o=this.getNextId(),c=this.#A({parent:this,id:o,x:s,y:r,uiManager:this.#c,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await Bi.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#c)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),o=this.#A({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#c,isCentered:i,...s});return o&&this.add(o),o}#S(){const{x:t,y:i,width:s,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,i+r),g=(o+u)/2-t,m=(c+d)/2-i,[y,v]=this.viewport.rotation%180===0?[g,m]:[m,g];return{offsetX:y,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#c.setSelected(t)}toggleSelected(t){this.#c.toggleSelected(t)}unselect(t){this.#c.unselect(t)}pointerup(t){const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#o||(this.#o=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#c.getMode();if(s===mt.STAMP||s===mt.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#c.getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#o=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#c.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#c,!1,t);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#c,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#c.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#c.removeLayer(this)}#w(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,jn(this.div,t);for(const i of this.#c.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#c.commitOrRemove(),this.#w();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,jn(this.div,{rotation:s}),i!==s)for(const r of this.#s.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#c.viewParameters.realScale}}class ve{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return xt(this,"_svgFactory",new Dr)}static#a(t,[i,s,r,o]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#s(){const t=ve._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,i){const s=ve._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const o=ve._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#r(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=ve.#n++,o=this.#s(),c=ve._svgFactory.createElement("defs");o.append(c);const u=ve._svgFactory.createElement("path");c.append(u);const d=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#i.set(r,u);const g=s?this.#o(c,d):null,m=ve._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${g})`}}drawOutline(t,i){const s=ve.#n++,r=this.#s(),o=ve._svgFactory.createElement("defs");r.append(o);const c=ve._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const y=ve._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const v=ve._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const w=ve._svgFactory.createElement("use");y.append(w),w.setAttribute("href",`#${u}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const g=ve._svgFactory.createElement("use");r.append(g),g.setAttribute("href",`#${u}`),d&&g.setAttribute("mask",`url(#${d})`);const m=g.cloneNode();return r.append(m),g.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#i.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:o,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#r(u,s),r&&ve.#a(u,r),o){const{classList:d}=u;for(const[g,m]of Object.entries(o))d.toggle(g,m)}if(c){const g=u.firstChild.firstChild;this.#r(g,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ah};globalThis.pdfjsLib={AbortException:cn,AnnotationEditorLayer:Bi,AnnotationEditorParamsType:Rt,AnnotationEditorType:mt,AnnotationEditorUIManager:un,AnnotationLayer:Vh,AnnotationMode:Ii,AnnotationType:ae,build:Ay,ColorPicker:ni,createValidAbsoluteUrl:Rh,DOMSVGFactory:Dr,DrawLayer:ve,FeatureTest:Ae,fetchData:ma,getDocument:Fh,getFilenameFromUrl:Zm,getPdfFilenameFromUrl:Jm,getUuid:Dh,getXfaPageViewport:ty,GlobalWorkerOptions:Gn,ImageKind:_r,InvalidPDFException:Al,isDataScheme:kr,isPdfFile:Cl,isValidExplicitDest:sy,MathClamp:Me,noContextMenu:yi,normalizeUnicode:Km,OPS:Tr,OutputScale:xi,PasswordResponses:$m,PDFDataRangeTransport:Gh,PDFDateString:Oh,PDFWorker:ga,PermissionFlag:Xm,PixelsPerInch:ps,RenderingCancelledException:Tl,ResponseException:Cr,setLayerDimensions:jn,shadow:xt,SignatureExtractor:us,stopEvent:oe,SupportedImageMimeTypes:Sl,TextLayer:Rr,TouchManager:Br,updateUrlHash:Mh,Util:lt,VerbosityLevel:Or,version:vy,XfaLayer:jh};const pS=Object.freeze(Object.defineProperty({__proto__:null,AbortException:cn,AnnotationEditorLayer:Bi,AnnotationEditorParamsType:Rt,AnnotationEditorType:mt,AnnotationEditorUIManager:un,AnnotationLayer:Vh,AnnotationMode:Ii,AnnotationType:ae,ColorPicker:ni,DOMSVGFactory:Dr,DrawLayer:ve,FeatureTest:Ae,GlobalWorkerOptions:Gn,ImageKind:_r,InvalidPDFException:Al,MathClamp:Me,OPS:Tr,OutputScale:xi,PDFDataRangeTransport:Gh,PDFDateString:Oh,PDFWorker:ga,PasswordResponses:$m,PermissionFlag:Xm,PixelsPerInch:ps,RenderingCancelledException:Tl,ResponseException:Cr,SignatureExtractor:us,SupportedImageMimeTypes:Sl,TextLayer:Rr,TouchManager:Br,Util:lt,VerbosityLevel:Or,XfaLayer:jh,build:Ay,createValidAbsoluteUrl:Rh,fetchData:ma,getDocument:Fh,getFilenameFromUrl:Zm,getPdfFilenameFromUrl:Jm,getUuid:Dh,getXfaPageViewport:ty,isDataScheme:kr,isPdfFile:Cl,isValidExplicitDest:sy,noContextMenu:yi,normalizeUnicode:Km,setLayerDimensions:jn,shadow:xt,stopEvent:oe,updateUrlHash:Mh,version:vy},Symbol.toStringTag,{value:"Module"}));function Dy(h){var t,i,s="";if(typeof h=="string"||typeof h=="number")s+=h;else if(typeof h=="object")if(Array.isArray(h)){var r=h.length;for(t=0;t<r;t++)h[t]&&(i=Dy(h[t]))&&(s&&(s+=" "),s+=i)}else for(i in h)h[i]&&(s&&(s+=" "),s+=i);return s}function Dl(){for(var h,t,i=0,s="",r=arguments.length;i<r;i++)(h=arguments[i])&&(t=Dy(h))&&(s&&(s+=" "),s+=t);return s}var Dm=Object.prototype.hasOwnProperty;function Lm(h,t,i){for(i of h.keys())if(ha(i,t))return i}function ha(h,t){var i,s,r;if(h===t)return!0;if(h&&t&&(i=h.constructor)===t.constructor){if(i===Date)return h.getTime()===t.getTime();if(i===RegExp)return h.toString()===t.toString();if(i===Array){if((s=h.length)===t.length)for(;s--&&ha(h[s],t[s]););return s===-1}if(i===Set){if(h.size!==t.size)return!1;for(s of h)if(r=s,r&&typeof r=="object"&&(r=Lm(t,r),!r)||!t.has(r))return!1;return!0}if(i===Map){if(h.size!==t.size)return!1;for(s of h)if(r=s[0],r&&typeof r=="object"&&(r=Lm(t,r),!r)||!ha(s[1],t.get(r)))return!1;return!0}if(i===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(i===DataView){if((s=h.byteLength)===t.byteLength)for(;s--&&h.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(h)){if((s=h.byteLength)===t.byteLength)for(;s--&&h[s]===t[s];);return s===-1}if(!i||typeof h=="object"){s=0;for(i in h)if(Dm.call(h,i)&&++s&&!Dm.call(t,i)||!(i in t)||!ha(h[i],t[i]))return!1;return Object.keys(t).length===s}}return h!==h&&t!==t}function Fr(h){let t=!1;return{promise:new Promise((s,r)=>{h.then(o=>!t&&s(o)).catch(o=>!t&&r(o))}),cancel(){t=!0}}}const mS=["onCopy","onCut","onPaste"],yS=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],bS=["onFocus","onBlur"],vS=["onInput","onInvalid","onReset","onSubmit"],AS=["onLoad","onError"],SS=["onKeyDown","onKeyPress","onKeyUp"],wS=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],ES=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],_S=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],xS=["onSelect"],TS=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],CS=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],RS=["onScroll"],MS=["onWheel"],DS=["onAnimationStart","onAnimationEnd","onAnimationIteration"],LS=["onTransitionEnd"],OS=["onToggle"],NS=["onChange"],PS=[...mS,...yS,...bS,...vS,...AS,...SS,...wS,...ES,..._S,...xS,...TS,...CS,...RS,...MS,...DS,...LS,...NS,...OS];function Ly(h,t){const i={};for(const s of PS){const r=h[s];r&&(t?i[s]=(o=>r(o,t(s))):i[s]=r)}return i}var kS="Invariant failed";function qt(h,t){if(!h)throw new Error(kS)}var dh,Om;function zS(){if(Om)return dh;Om=1;var h=function(){};return dh=h,dh}var BS=zS();const De=Vm(BS),Oy=I.createContext(null),IS="noopener noreferrer nofollow";class HS{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return qt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){qt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(i=>{qt(this.pdfDocument),qt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(i):Array.isArray(t)?i(t):t.then(i)}).then(i=>{qt(Array.isArray(i));const s=i[0];new Promise(r=>{qt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{r(o)}).catch(()=>{qt(!1)}):typeof s=="number"?r(s):qt(!1)}).then(r=>{const o=r+1;qt(this.pdfViewer),qt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:i,pageIndex:r,pageNumber:o})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const i=t-1;qt(this.pdfViewer),qt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:i,pageNumber:t})}addLinkAttributes(t,i,s){t.href=i,t.rel=this.externalLinkRel||IS,t.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function da({children:h,type:t}){return wt.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const Nm={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function FS(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function pa(){return I.useReducer(FS,{value:void 0,error:void 0})}const Ll=typeof window<"u",Ny=Ll&&window.location.protocol==="file:";function US(h){return typeof h<"u"}function cs(h){return US(h)&&h!==null}function GS(h){return typeof h=="string"}function jS(h){return h instanceof ArrayBuffer}function qS(h){return qt(Ll),h instanceof Blob}function Eh(h){return GS(h)&&/^data:/.test(h)}function Pm(h){qt(Eh(h));const[t="",i=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(i):unescape(i)}function VS(){return Ll&&window.devicePixelRatio||1}const Py="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function km(){De(!Ny,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Py}`)}function YS(){De(!Ny,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Py}`)}function ys(h){h?.cancel&&h.cancel()}function _h(h,t){return Object.defineProperty(h,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.view[3]},configurable:!0}),h}function XS(h){return h.name==="RenderingCancelledException"}function $S(h){return new Promise((t,i)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return i(new Error("Error while reading a file."));t(s.result)},s.onerror=r=>{if(!r.target)return i(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return i(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return i(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return i(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return i(new Error("Error while reading a file: Aborted."));default:return i(new Error("Error while reading a file."))}},s.readAsArrayBuffer(h)})}const{PDFDataRangeTransport:WS}=pS,KS=(h,t)=>{switch(t){case Nm.NEED_PASSWORD:{const i=prompt("Enter the password to open this PDF file.");h(i);break}case Nm.INCORRECT_PASSWORD:{const i=prompt("Invalid password. Please try again.");h(i);break}}};function zm(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const QS=I.forwardRef(function({children:t,className:i,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:o,file:c,inputRef:u,imageResourcesPath:d,loading:g="Loading PDF…",noData:m="No PDF file specified.",onItemClick:y,onLoadError:v,onLoadProgress:w,onLoadSuccess:_,onPassword:E=KS,onSourceError:C,onSourceSuccess:R,options:L,renderMode:D,rotate:b,scale:S,...T},M){const[N,B]=pa(),{value:Y,error:$}=N,[J,nt]=pa(),{value:tt,error:gt}=J,k=I.useRef(new HS),j=I.useRef([]),et=I.useRef(void 0),pt=I.useRef(void 0);c&&c!==et.current&&zm(c)&&(De(!ha(c,et.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),et.current=c),L&&L!==pt.current&&(De(!ha(L,pt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),pt.current=L);const At=I.useRef({scrollPageIntoView:Dt=>{const{dest:Ot,pageNumber:Qt,pageIndex:te=Qt-1}=Dt;if(y){y({dest:Ot,pageIndex:te,pageNumber:Qt});return}const fn=j.current[te];if(fn){fn.scrollIntoView();return}De(!1,`An internal link leading to page ${Qt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});I.useImperativeHandle(M,()=>({linkService:k,pages:j,viewer:At}),[]);function P(){R&&R()}function V(){$&&(De(!1,$.toString()),C&&C($))}function Q(){B({type:"RESET"})}I.useEffect(Q,[c,B]);const Z=I.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return Eh(c)?{data:Pm(c)}:(km(),{url:c});if(c instanceof WS)return{range:c};if(jS(c))return{data:c};if(Ll&&qS(c))return{data:await $S(c)};if(qt(typeof c=="object"),qt(zm(c)),"url"in c&&typeof c.url=="string"){if(Eh(c.url)){const{url:Dt,...Ot}=c;return{data:Pm(Dt),...Ot}}km()}return c},[c]);I.useEffect(()=>{const Dt=Fr(Z());return Dt.promise.then(Ot=>{B({type:"RESOLVE",value:Ot})}).catch(Ot=>{B({type:"REJECT",error:Ot})}),()=>{ys(Dt)}},[Z,B]),I.useEffect(()=>{if(!(typeof Y>"u")){if(Y===!1){V();return}P()}},[Y]);function ot(){tt&&(_&&_(tt),j.current=new Array(tt.numPages),k.current.setDocument(tt))}function ut(){gt&&(De(!1,gt.toString()),v&&v(gt))}I.useEffect(function(){nt({type:"RESET"})},[nt,Y]),I.useEffect(function(){if(!Y)return;const Ot=L?{...Y,...L}:Y,Qt=Fh(Ot);w&&(Qt.onProgress=w),E&&(Qt.onPassword=E);const te=Qt,fn=te.promise.then(gn=>{nt({type:"RESOLVE",value:gn})}).catch(gn=>{te.destroyed||nt({type:"REJECT",error:gn})});return()=>{fn.finally(()=>te.destroy())}},[L,nt,Y]),I.useEffect(()=>{if(!(typeof tt>"u")){if(tt===!1){ut();return}ot()}},[tt]),I.useEffect(function(){k.current.setViewer(At.current),k.current.setExternalLinkRel(r),k.current.setExternalLinkTarget(o)},[r,o]);const rt=I.useCallback((Dt,Ot)=>{j.current[Dt]=Ot},[]),Vt=I.useCallback(Dt=>{delete j.current[Dt]},[]),Lt=I.useMemo(()=>({imageResourcesPath:d,linkService:k.current,onItemClick:y,pdf:tt,registerPage:rt,renderMode:D,rotate:b,scale:S,unregisterPage:Vt}),[d,y,tt,rt,D,b,S,Vt]),zt=I.useMemo(()=>Ly(T,()=>tt),[T,tt]);function ke(){function Dt(Qt){return!!Qt?.pdf}if(!Dt(Lt))throw new Error("pdf is undefined");const Ot=typeof t=="function"?t(Lt):t;return wt.jsx(Oy.Provider,{value:Lt,children:Ot})}function Ye(){return c?tt==null?wt.jsx(da,{type:"loading",children:typeof g=="function"?g():g}):tt===!1?wt.jsx(da,{type:"error",children:typeof s=="function"?s():s}):ke():wt.jsx(da,{type:"no-data",children:typeof m=="function"?m():m})}return wt.jsx("div",{className:Dl("react-pdf__Document",i),ref:u,...zt,children:Ye()})});function ky(){return I.useContext(Oy)}function zy(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var i=h.filter(Boolean);if(i.length<=1){var s=i[0];return s||null}return function(o){for(var c=0,u=i;c<u.length;c++){var d=u[c];typeof d=="function"?d(o):d&&(d.current=o)}}}const By=I.createContext(null);function Ol(){return I.useContext(By)}function ZS(){const h=ky(),t=Ol();qt(t);const i={...h,...t},{imageResourcesPath:s,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:g,pdf:m,renderForms:y,rotate:v,scale:w=1}=i;qt(m),qt(g),qt(r);const[_,E]=pa(),{value:C,error:R}=_,L=I.useRef(null);De(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){C&&c&&c(C)}function b(){R&&(De(!1,R.toString()),o&&o(R))}I.useEffect(function(){E({type:"RESET"})},[E,g]),I.useEffect(function(){if(!g)return;const B=Fr(g.getAnnotations()),Y=B;return B.promise.then($=>{E({type:"RESOLVE",value:$})}).catch($=>{E({type:"REJECT",error:$})}),()=>{ys(Y)}},[E,g]),I.useEffect(()=>{if(C!==void 0){if(C===!1){b();return}D()}},[C]);function S(){d&&d()}function T(N){De(!1,`${N}`),u&&u(N)}const M=I.useMemo(()=>g.getViewport({scale:w,rotation:v}),[g,v,w]);return I.useEffect(function(){if(!m||!g||!r||!C)return;const{current:B}=L;if(!B)return;const Y=M.clone({dontFlip:!0}),$={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:B,l10n:null,page:g,structTreeLayer:null,viewport:Y},J={annotations:C,annotationStorage:m.annotationStorage,div:B,imageResourcesPath:s,linkService:r,page:g,renderForms:y,viewport:Y};B.innerHTML="";try{new Vh($).render(J),S()}catch(nt){T(nt)}return()=>{}},[C,s,r,g,m,y,M]),wt.jsx("div",{className:Dl("react-pdf__Page__annotations","annotationLayer"),ref:L})}const Iy={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},JS=/^H(\d+)$/;function tw(h){return h in Iy}function Nl(h){return"children"in h}function Hy(h){return Nl(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function ew(h){const t={};if(Nl(h)){const{role:i}=h,s=i.match(JS);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(tw(i)){const r=Iy[i];r&&(t.role=r)}}return t}function Fy(h){const t={};if(Nl(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),Hy(h)){const[i]=h.children;if(i){const s=Fy(i);return{...t,...s}}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function iw(h){return h?{...ew(h),...Fy(h)}:null}function Uy({className:h,node:t}){const i=I.useMemo(()=>iw(t),[t]),s=I.useMemo(()=>!Nl(t)||Hy(t)?null:t.children.map((r,o)=>wt.jsx(Uy,{node:r},o)),[t]);return wt.jsx("span",{className:h,...i,children:s})}function nw(){const h=Ol();qt(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:i}=h,[s,r]=pa(),{value:o,error:c}=s,{customTextRenderer:u,page:d}=h;function g(){o&&i&&i(o)}function m(){c&&(De(!1,c.toString()),t&&t(c))}return I.useEffect(function(){r({type:"RESET"})},[r,d]),I.useEffect(function(){if(u||!d)return;const v=Fr(d.getStructTree()),w=v;return v.promise.then(_=>{r({type:"RESOLVE",value:_})}).catch(_=>{r({type:"REJECT",error:_})}),()=>ys(w)},[u,d,r]),I.useEffect(()=>{if(o!==void 0){if(o===!1){m();return}g()}},[o]),o?wt.jsx(Uy,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Bm=Ii;function sw(h){const t=Ol();qt(t);const i={...t,...h},{_className:s,canvasBackground:r,devicePixelRatio:o=VS(),onRenderError:c,onRenderSuccess:u,page:d,renderForms:g,renderTextLayer:m,rotate:y,scale:v}=i,{canvasRef:w}=h;qt(d);const _=I.useRef(null);function E(){d&&u&&u(_h(d,v))}function C(b){XS(b)||(De(!1,b.toString()),c&&c(b))}const R=I.useMemo(()=>d.getViewport({scale:v*o,rotation:y}),[o,d,y,v]),L=I.useMemo(()=>d.getViewport({scale:v,rotation:y}),[d,y,v]);I.useEffect(function(){if(!d)return;d.cleanup();const{current:S}=_;if(!S)return;S.width=R.width,S.height=R.height,S.style.width=`${Math.floor(L.width)}px`,S.style.height=`${Math.floor(L.height)}px`,S.style.visibility="hidden";const T={annotationMode:g?Bm.ENABLE_FORMS:Bm.ENABLE,canvasContext:S.getContext("2d",{alpha:!1}),viewport:R};r&&(T.background=r);const M=d.render(T),N=M;return M.promise.then(()=>{S.style.visibility="",E()}).catch(C),()=>ys(N)},[r,d,g,R,L]);const D=I.useCallback(()=>{const{current:b}=_;b&&(b.width=0,b.height=0)},[]);return I.useEffect(()=>D,[D]),wt.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:zy(w,_),style:{display:"block",userSelect:"none"},children:m?wt.jsx(nw,{}):null})}function aw(h){return"str"in h}function rw(){const h=Ol();qt(h);const{customTextRenderer:t,onGetTextError:i,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:d,rotate:g,scale:m}=h;qt(c);const[y,v]=pa(),{value:w,error:_}=y,E=I.useRef(null);De(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){w&&s&&s(w)}function R(){_&&(De(!1,_.toString()),i&&i(_))}I.useEffect(function(){v({type:"RESET"})},[c,v]),I.useEffect(function(){if(!c)return;const N=Fr(c.getTextContent()),B=N;return N.promise.then(Y=>{v({type:"RESOLVE",value:Y})}).catch(Y=>{v({type:"REJECT",error:Y})}),()=>ys(B)},[c,v]),I.useEffect(()=>{if(w!==void 0){if(w===!1){R();return}C()}},[w]);const L=I.useCallback(()=>{o&&o()},[o]),D=I.useCallback(M=>{De(!1,M.toString()),r&&r(M)},[r]);function b(){const M=E.current;M&&M.classList.add("selecting")}function S(){const M=E.current;M&&M.classList.remove("selecting")}const T=I.useMemo(()=>c.getViewport({scale:m,rotation:g}),[c,g,m]);return I.useLayoutEffect(function(){if(!c||!w)return;const{current:N}=E;if(!N)return;N.innerHTML="";const B=c.streamTextContent({includeMarkedContent:!0}),Y={container:N,textContentSource:B,viewport:T},$=new Rr(Y),J=$;return $.render().then(()=>{const nt=document.createElement("div");nt.className="endOfContent",N.append(nt);const tt=N.querySelectorAll('[role="presentation"]');if(t){let gt=0;w.items.forEach((k,j)=>{if(!aw(k))return;const et=tt[gt];if(!et)return;const pt=t({pageIndex:u,pageNumber:d,itemIndex:j,...k});et.innerHTML=pt,gt+=k.str&&k.hasEOL?2:1})}L()}).catch(D),()=>ys(J)},[t,D,L,c,u,d,w,T]),wt.jsx("div",{className:Dl("react-pdf__Page__textContent","textLayer"),onMouseUp:S,onMouseDown:b,ref:E})}const Im=1;function ow(h){const i={...ky(),...h},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:c,children:u,className:d,customRenderer:g,customTextRenderer:m,devicePixelRatio:y,error:v="Failed to load the page.",height:w,inputRef:_,loading:E="Loading page…",noData:C="No page specified.",onGetAnnotationsError:R,onGetAnnotationsSuccess:L,onGetStructTreeError:D,onGetStructTreeSuccess:b,onGetTextError:S,onGetTextSuccess:T,onLoadError:M,onLoadSuccess:N,onRenderAnnotationLayerError:B,onRenderAnnotationLayerSuccess:Y,onRenderError:$,onRenderSuccess:J,onRenderTextLayerError:nt,onRenderTextLayerSuccess:tt,pageIndex:gt,pageNumber:k,pdf:j,registerPage:et,renderAnnotationLayer:pt=!0,renderForms:At=!1,renderMode:P="canvas",renderTextLayer:V=!0,rotate:Q,scale:Z=Im,unregisterPage:ot,width:ut,...rt}=i,[Vt,Lt]=pa(),{value:zt,error:ke}=Vt,Ye=I.useRef(null);qt(j);const Dt=cs(k)?k-1:gt??null,Ot=k??(cs(gt)?gt+1:null),Qt=Q??(zt?zt.rotate:null),te=I.useMemo(()=>{if(!zt)return null;let bi=1;const vi=Z??Im;if(ut||w){const Ti=zt.getViewport({scale:1,rotation:Qt});ut?bi=ut/Ti.width:w&&(bi=w/Ti.height)}return vi*bi},[w,zt,Qt,Z,ut]);I.useEffect(function(){return()=>{cs(Dt)&&r&&ot&&ot(Dt)}},[r,j,Dt,ot]);function fn(){if(N){if(!zt||!te)return;N(_h(zt,te))}if(r&&et){if(!cs(Dt)||!Ye.current)return;et(Dt,Ye.current)}}function gn(){ke&&(De(!1,ke.toString()),M&&M(ke))}I.useEffect(function(){Lt({type:"RESET"})},[Lt,j,Dt]),I.useEffect(function(){if(!j||!Ot)return;const vi=Fr(j.getPage(Ot)),Ti=vi;return vi.promise.then(Ss=>{Lt({type:"RESOLVE",value:Ss})}).catch(Ss=>{Lt({type:"REJECT",error:Ss})}),()=>ys(Ti)},[Lt,j,Ot]),I.useEffect(()=>{if(zt!==void 0){if(zt===!1){gn();return}fn()}},[zt,te]);const qn=I.useMemo(()=>cs(Dt)&&Ot&&cs(Qt)&&cs(te)?{_className:s,canvasBackground:o,customTextRenderer:m,devicePixelRatio:y,onGetAnnotationsError:R,onGetAnnotationsSuccess:L,onGetStructTreeError:D,onGetStructTreeSuccess:b,onGetTextError:S,onGetTextSuccess:T,onRenderAnnotationLayerError:B,onRenderAnnotationLayerSuccess:Y,onRenderError:$,onRenderSuccess:J,onRenderTextLayerError:nt,onRenderTextLayerSuccess:tt,page:zt,pageIndex:Dt,pageNumber:Ot,renderForms:At,renderTextLayer:V,rotate:Qt,scale:te}:null,[s,o,m,y,R,L,D,b,S,T,B,Y,$,J,nt,tt,zt,Dt,Ot,At,V,Qt,te]),va=I.useMemo(()=>Ly(rt,()=>zt&&(te?_h(zt,te):void 0)),[rt,zt,te]),pn=`${Dt}@${te}/${Qt}`;function zl(){switch(P){case"custom":return qt(g),wt.jsx(g,{},`${pn}_custom`);case"none":return null;case"canvas":default:return wt.jsx(sw,{canvasRef:c},`${pn}_canvas`)}}function Bl(){return V?wt.jsx(rw,{},`${pn}_text`):null}function Le(){return pt?wt.jsx(ZS,{},`${pn}_annotations`):null}function Il(){function bi(Ti){return!!Ti?.page}if(!bi(qn))throw new Error("page is undefined");const vi=typeof u=="function"?u(qn):u;return wt.jsxs(By.Provider,{value:qn,children:[zl(),Bl(),Le(),vi]})}function qr(){return Ot?j===null||zt===void 0||zt===null?wt.jsx(da,{type:"loading",children:typeof E=="function"?E():E}):j===!1||zt===!1?wt.jsx(da,{type:"error",children:typeof v=="function"?v():v}):Il():wt.jsx(da,{type:"no-data",children:typeof C=="function"?C():C})}return wt.jsx("div",{className:Dl(s,d),"data-page-number":Ot,ref:zy(_,Ye),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${te}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...va,children:qr()})}YS();Gn.workerSrc="pdf.worker.mjs";var Er={exports:{}},lw=Er.exports,Hm;function cw(){return Hm||(Hm=1,(function(h,t){(function(i,s){s(t)})(lw,(function(i){class s{constructor(b,S){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=S,this.nowDrawingDensity=this.createdDensity,this.render=b}setDensity(b){this.createdDensity=b,this.nowDrawingDensity=b}setDrawingDensity(b){this.nowDrawingDensity=b}setPosition(b){this.state.position=b}setAngle(b){this.state.angle=b}setArea(b){this.state.area=b}setHardDrawingAngle(b){this.state.hardDrawingAngle=b}setHardAngle(b){this.state.hardAngle=b,this.state.hardDrawingAngle=b}setOrientation(b){this.orientation=b}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class r extends s{constructor(b,S,T){super(b,T),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=S}draw(b){const S=this.render.getContext(),T=this.render.convertToGlobal(this.state.position),M=this.render.getRect().pageWidth,N=this.render.getRect().height;S.save(),S.translate(T.x,T.y),S.beginPath();for(let B of this.state.area)B!==null&&(B=this.render.convertToGlobal(B),S.lineTo(B.x-T.x,B.y-T.y));S.rotate(this.state.angle),S.clip(),this.isLoad?S.drawImage(this.image,0,0,M,N):this.drawLoader(S,{x:0,y:0},M,N),S.restore()}simpleDraw(b){const S=this.render.getRect(),T=this.render.getContext(),M=S.pageWidth,N=S.height,B=b===1?S.left+S.pageWidth:S.left,Y=S.top;this.isLoad?T.drawImage(this.image,B,Y,M,N):this.drawLoader(T,{x:B,y:Y},M,N)}drawLoader(b,S,T,M){b.beginPath(),b.strokeStyle="rgb(200, 200, 200)",b.fillStyle="rgb(255, 255, 255)",b.lineWidth=1,b.rect(S.x+1,S.y+1,T-1,M-1),b.stroke(),b.fill();const N={x:S.x+T/2,y:S.y+M/2};b.beginPath(),b.lineWidth=10,b.arc(N.x,N.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),b.stroke(),b.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class o{constructor(b,S){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=S,this.app=b,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let S=0;S<this.pages.length;S++)this.portraitSpread.push([S]);let b=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([b]),b++);for(let S=b;S<this.pages.length;S+=2)S<this.pages.length-1?this.landscapeSpread.push([S,S+1]):(this.landscapeSpread.push([S]),this.pages[S].setDensity("hard"))}getSpread(){return this.render.getOrientation()==="landscape"?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(b){const S=this.getSpread();for(let T=0;T<S.length;T++)if(b===S[T][0]||b===S[T][1])return T;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(b){if(b>=0&&b<this.pages.length)return this.pages[b];throw new Error("Invalid page number")}nextBy(b){const S=this.pages.indexOf(b);return S<this.pages.length-1?this.pages[S+1]:null}prevBy(b){const S=this.pages.indexOf(b);return S>0?this.pages[S-1]:null}getFlippingPage(b){const S=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return b===0?this.pages[S].newTemporaryCopy():this.pages[S-1];{const T=b===0?this.getSpread()[S+1]:this.getSpread()[S-1];return T.length===1||b===0?this.pages[T[0]]:this.pages[T[1]]}}getBottomPage(b){const S=this.currentSpreadIndex;if(this.render.getOrientation()==="portrait")return b===0?this.pages[S+1]:this.pages[S-1];{const T=b===0?this.getSpread()[S+1]:this.getSpread()[S-1];return T.length===1?this.pages[T[0]]:b===0?this.pages[T[1]]:this.pages[T[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(b=null){if(b===null&&(b=this.currentPageIndex),b<0||b>=this.pages.length)return;const S=this.getSpreadIndexByPage(b);S!==null&&(this.currentSpreadIndex=S,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(b){if(!(b>=0&&b<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=b}showSpread(){const b=this.getSpread()[this.currentSpreadIndex];b.length===2?(this.render.setLeftPage(this.pages[b[0]]),this.render.setRightPage(this.pages[b[1]])):this.render.getOrientation()==="landscape"&&b[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[b[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[b[0]])),this.currentPageIndex=b[0],this.app.updatePageIndex(this.currentPageIndex)}}class c extends o{constructor(b,S,T){super(b,S),this.imagesHref=T}load(){for(const b of this.imagesHref){const S=new r(this.render,b,"soft");S.load(),this.pages.push(S)}this.createSpread()}}class u{static GetDistanceBetweenTwoPoint(b,S){return b===null||S===null?1/0:Math.sqrt(Math.pow(S.x-b.x,2)+Math.pow(S.y-b.y,2))}static GetSegmentLength(b){return u.GetDistanceBetweenTwoPoint(b[0],b[1])}static GetAngleBetweenTwoLine(b,S){const T=b[0].y-b[1].y,M=S[0].y-S[1].y,N=b[1].x-b[0].x,B=S[1].x-S[0].x;return Math.acos((T*M+N*B)/(Math.sqrt(T*T+N*N)*Math.sqrt(M*M+B*B)))}static PointInRect(b,S){return S===null?null:S.x>=b.left&&S.x<=b.width+b.left&&S.y>=b.top&&S.y<=b.top+b.height?S:null}static GetRotatedPoint(b,S,T){return{x:b.x*Math.cos(T)+b.y*Math.sin(T)+S.x,y:b.y*Math.cos(T)-b.x*Math.sin(T)+S.y}}static LimitPointToCircle(b,S,T){if(u.GetDistanceBetweenTwoPoint(b,T)<=S)return T;const M=b.x,N=b.y,B=T.x,Y=T.y;let $=Math.sqrt(Math.pow(S,2)*Math.pow(M-B,2)/(Math.pow(M-B,2)+Math.pow(N-Y,2)))+M;T.x<0&&($*=-1);let J=($-M)*(N-Y)/(M-B)+N;return M-B+N===0&&(J=S),{x:$,y:J}}static GetIntersectBetweenTwoSegment(b,S,T){return u.PointInRect(b,u.GetIntersectBeetwenTwoLine(S,T))}static GetIntersectBeetwenTwoLine(b,S){const T=b[0].y-b[1].y,M=S[0].y-S[1].y,N=b[1].x-b[0].x,B=S[1].x-S[0].x,Y=b[0].x*b[1].y-b[1].x*b[0].y,$=S[0].x*S[1].y-S[1].x*S[0].y,J=T*$-M*Y,nt=N*$-B*Y,tt=-(Y*B-$*N)/(T*B-M*N),gt=-(T*$-M*Y)/(T*B-M*N);if(isFinite(tt)&&isFinite(gt))return{x:tt,y:gt};if(Math.abs(J-nt)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(b,S){const T=Math.abs(b.x-S.x),M=Math.abs(b.y-S.y),N=Math.max(T,M),B=[b];function Y($,J,nt,tt,gt){return J>$?$+gt*(nt/tt):J<$?$-gt*(nt/tt):$}for(let $=1;$<=N;$+=1)B.push({x:Y(b.x,S.x,T,N,$),y:Y(b.y,S.y,M,N,$)});return B}}class d extends s{constructor(b,S,T){super(b,T),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=S,this.element.classList.add("stf__item"),this.element.classList.add("--"+T)}newTemporaryCopy(){return this.nowDrawingDensity==="hard"?this:(this.temporaryCopy===null&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new d(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){this.temporaryCopy!==null&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(b){const S=b||this.nowDrawingDensity,T=this.render.convertToGlobal(this.state.position),M=this.render.getRect().pageWidth,N=this.render.getRect().height;this.element.classList.remove("--simple");const B=`
            display: block;
            z-index: ${this.element.style.zIndex};
            left: 0;
            top: 0;
            width: ${M}px;
            height: ${N}px;
        `;S==="hard"?this.drawHard(B):this.drawSoft(T,B)}drawHard(b=""){const S=this.render.getRect().left+this.render.getRect().width/2,T=this.state.hardDrawingAngle,M=b+`
                backface-visibility: hidden;
                -webkit-backface-visibility: hidden;
                clip-path: none;
                -webkit-clip-path: none;
            `+(this.orientation===0?`transform-origin: ${this.render.getRect().pageWidth}px 0; 
                   transform: translate3d(0, 0, 0) rotateY(${T}deg);`:`transform-origin: 0 0; 
                   transform: translate3d(${S}px, 0, 0) rotateY(${T}deg);`);this.element.style.cssText=M}drawSoft(b,S=""){let T="polygon( ";for(const N of this.state.area)if(N!==null){let B=this.render.getDirection()===1?{x:-N.x+this.state.position.x,y:N.y-this.state.position.y}:{x:N.x-this.state.position.x,y:N.y-this.state.position.y};B=u.GetRotatedPoint(B,{x:0,y:0},this.state.angle),T+=B.x+"px "+B.y+"px, "}T=T.slice(0,-2),T+=")";const M=S+`transform-origin: 0 0; clip-path: ${T}; -webkit-clip-path: ${T};`+(this.render.isSafari()&&this.state.angle===0?`transform: translate(${b.x}px, ${b.y}px);`:`transform: translate3d(${b.x}px, ${b.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=M}simpleDraw(b){const S=this.render.getRect(),T=S.pageWidth,M=S.height,N=b===1?S.left+S.pageWidth:S.left,B=S.top;this.element.classList.add("--simple"),this.element.style.cssText=`
            position: absolute; 
            display: block; 
            height: ${M}px; 
            left: ${N}px; 
            top: ${B}px; 
            width: ${T}px; 
            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(b){super.setOrientation(b),this.element.classList.remove("--left","--right"),this.element.classList.add(b===1?"--right":"--left")}setDrawingDensity(b){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+b),super.setDrawingDensity(b)}}class g extends o{constructor(b,S,T,M){super(b,S),this.element=T,this.pagesElement=M}load(){for(const b of this.pagesElement){const S=new d(this.render,b,b.dataset.density==="hard"?"hard":"soft");S.load(),this.pages.push(S)}this.createSpread()}}class m{constructor(b,S,T,M){this.direction=b,this.corner=S,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(T,10),this.pageHeight=parseInt(M,10)}calc(b){try{return this.position=this.calcAngleAndPosition(b),this.calculateIntersectPoint(this.position),!0}catch{return!1}}getFlippingClipArea(){const b=[];let S=!1;return b.push(this.rect.topLeft),b.push(this.topIntersectPoint),this.sideIntersectPoint===null?S=!0:(b.push(this.sideIntersectPoint),this.bottomIntersectPoint===null&&(S=!1)),b.push(this.bottomIntersectPoint),(S||this.corner==="bottom")&&b.push(this.rect.bottomLeft),b}getBottomClipArea(){const b=[];return b.push(this.topIntersectPoint),this.corner==="top"?b.push({x:this.pageWidth,y:0}):(this.topIntersectPoint!==null&&b.push({x:this.pageWidth,y:0}),b.push({x:this.pageWidth,y:this.pageHeight})),this.sideIntersectPoint!==null?u.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&b.push(this.sideIntersectPoint):this.corner==="top"&&b.push({x:this.pageWidth,y:this.pageHeight}),b.push(this.bottomIntersectPoint),b.push(this.topIntersectPoint),b}getAngle(){return this.direction===0?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return this.direction===0?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return this.direction===1?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return this.corner==="top"?this.topIntersectPoint:this.sideIntersectPoint!==null?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const b=u.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return this.direction===0?b:Math.PI-b}calcAngleAndPosition(b){let S=b;if(this.updateAngleAndGeometry(S),S=this.corner==="top"?this.checkPositionAtCenterLine(S,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(S,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(S.x-this.pageWidth)<1&&Math.abs(S.y)<1)throw new Error("Point is too small");return S}updateAngleAndGeometry(b){this.angle=this.calculateAngle(b),this.rect=this.getPageRect(b)}calculateAngle(b){const S=this.pageWidth-b.x+1,T=this.corner==="bottom"?this.pageHeight-b.y:b.y;let M=2*Math.acos(S/Math.sqrt(T*T+S*S));T<0&&(M=-M);const N=Math.PI-M;if(!isFinite(M)||N>=0&&N<.003)throw new Error("The G point is too small");return this.corner==="bottom"&&(M=-M),M}getPageRect(b){return this.corner==="top"?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],b):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],b)}getRectFromBasePoint(b,S){return{topLeft:this.getRotatedPoint(b[0],S),topRight:this.getRotatedPoint(b[1],S),bottomLeft:this.getRotatedPoint(b[2],S),bottomRight:this.getRotatedPoint(b[3],S)}}getRotatedPoint(b,S){return{x:b.x*Math.cos(this.angle)+b.y*Math.sin(this.angle)+S.x,y:b.y*Math.cos(this.angle)-b.x*Math.sin(this.angle)+S.y}}calculateIntersectPoint(b){const S={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};this.corner==="top"?(this.topIntersectPoint=u.GetIntersectBetweenTwoSegment(S,[b,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=u.GetIntersectBetweenTwoSegment(S,[b,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=u.GetIntersectBetweenTwoSegment(S,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=u.GetIntersectBetweenTwoSegment(S,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=u.GetIntersectBetweenTwoSegment(S,[b,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=u.GetIntersectBetweenTwoSegment(S,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(b,S,T){let M=b;const N=u.LimitPointToCircle(S,this.pageWidth,M);M!==N&&(M=N,this.updateAngleAndGeometry(M));const B=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let Y=this.rect.bottomRight,$=this.rect.topLeft;if(this.corner==="bottom"&&(Y=this.rect.topRight,$=this.rect.bottomLeft),Y.x<=0){const J=u.LimitPointToCircle(T,B,$);J!==M&&(M=J,this.updateAngleAndGeometry(M))}return M}getSegmentToShadowLine(){const b=this.getShadowStartPoint();return[b,b!==this.sideIntersectPoint&&this.sideIntersectPoint!==null?this.sideIntersectPoint:this.bottomIntersectPoint]}}class y{constructor(b,S){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=b,this.app=S}fold(b){this.setState("user_fold"),this.calc===null&&this.start(b),this.do(this.render.convertToPage(b))}flip(b){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(b)||(this.calc!==null&&this.render.finishAnimation(),!this.start(b)))return;const S=this.getBoundsRect();this.setState("flipping");const T=S.height/10,M=this.calc.getCorner()==="bottom"?S.height-T:T,N=this.calc.getCorner()==="bottom"?S.height:0;this.calc.calc({x:S.pageWidth-T,y:M}),this.animateFlippingTo({x:S.pageWidth-T,y:M},{x:-S.pageWidth,y:N},!0)}start(b){this.reset();const S=this.render.convertToBook(b),T=this.getBoundsRect(),M=this.getDirectionByPoint(S),N=S.y>=T.height/2?"bottom":"top";if(!this.checkDirection(M))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(M),this.bottomPage=this.app.getPageCollection().getBottomPage(M),this.render.getOrientation()==="landscape")if(M===1){const B=this.app.getPageCollection().nextBy(this.flippingPage);B!==null&&this.flippingPage.getDensity()!==B.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),B.setDrawingDensity("hard"))}else{const B=this.app.getPageCollection().prevBy(this.flippingPage);B!==null&&this.flippingPage.getDensity()!==B.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),B.setDrawingDensity("hard"))}return this.render.setDirection(M),this.calc=new m(M,N,T.pageWidth.toString(10),T.height.toString(10)),!0}catch{return!1}}do(b){if(this.calc!==null&&this.calc.calc(b)){const S=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),this.calc.getDirection()===0?this.flippingPage.setHardAngle(90*(200-2*S)/100):this.flippingPage.setHardAngle(-90*(200-2*S)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),S,this.calc.getDirection())}}flipToPage(b,S){const T=this.app.getPageCollection().getCurrentSpreadIndex(),M=this.app.getPageCollection().getSpreadIndexByPage(b);try{M>T&&(this.app.getPageCollection().setCurrentSpreadIndex(M-1),this.flipNext(S)),M<T&&(this.app.getPageCollection().setCurrentSpreadIndex(M+1),this.flipPrev(S))}catch{}}flipNext(b){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:b==="top"?1:this.render.getRect().height-2})}flipPrev(b){this.flip({x:10,y:b==="top"?1:this.render.getRect().height-2})}stopMove(){if(this.calc===null)return;const b=this.calc.getPosition(),S=this.getBoundsRect(),T=this.calc.getCorner()==="bottom"?S.height:0;b.x<=0?this.animateFlippingTo(b,{x:-S.pageWidth,y:T},!0):this.animateFlippingTo(b,{x:S.pageWidth,y:T},!1)}showCorner(b){if(!this.checkState("read","fold_corner"))return;const S=this.getBoundsRect(),T=S.pageWidth;if(this.isPointOnCorners(b))if(this.calc===null){if(!this.start(b))return;this.setState("fold_corner"),this.calc.calc({x:T-1,y:1});const M=50,N=this.calc.getCorner()==="bottom"?S.height-1:1,B=this.calc.getCorner()==="bottom"?S.height-M:M;this.animateFlippingTo({x:T-1,y:N},{x:T-M,y:B},!1,!1)}else this.do(this.render.convertToPage(b));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(b,S,T,M=!0){const N=u.GetCordsFromTwoPoint(b,S),B=[];for(const $ of N)B.push(()=>this.do($));const Y=this.getAnimationDuration(N.length);this.render.startAnimation(B,Y,()=>{this.calc&&(T&&(this.calc.getDirection()===1?this.app.turnToPrevPage():this.app.turnToNextPage()),M&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState("read"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(b){this.state!==b&&(this.app.updateState(b),this.state=b)}getDirectionByPoint(b){const S=this.getBoundsRect();if(this.render.getOrientation()==="portrait"){if(b.x-S.pageWidth<=S.width/5)return 1}else if(b.x<S.width/2)return 1;return 0}getAnimationDuration(b){const S=this.app.getSettings().flippingTime;return b>=1e3?S:b/1e3*S}checkDirection(b){return b===0?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...b){for(const S of b)if(this.state===S)return!0;return!1}isPointOnCorners(b){const S=this.getBoundsRect(),T=S.pageWidth,M=Math.sqrt(Math.pow(T,2)+Math.pow(S.height,2))/5,N=this.render.convertToBook(b);return N.x>0&&N.y>0&&N.x<S.width&&N.y<S.height&&(N.x<M||N.x>S.width-M)&&(N.y<M||N.y>S.height-M)}}class v{constructor(b,S){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=S,this.app=b;const T=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=T.exec(window.navigator.userAgent)!==null}render(b){if(this.animation!==null){const S=Math.round((b-this.animation.startedAt)/this.animation.durationFrame);S<this.animation.frames.length?this.animation.frames[S]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=b,this.drawFrame()}start(){this.update();const b=S=>{this.render(S),requestAnimationFrame(b)};requestAnimationFrame(b)}startAnimation(b,S,T){this.finishAnimation(),this.animation={frames:b,duration:S,durationFrame:S/b.length,onAnimateEnd:T,startedAt:this.timer}}finishAnimation(){this.animation!==null&&(this.animation.frames[this.animation.frames.length-1](),this.animation.onAnimateEnd!==null&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const b=this.calculateBoundsRect();this.orientation!==b&&(this.orientation=b,this.app.updateOrientation(b))}calculateBoundsRect(){let b="landscape";const S=this.getBlockWidth(),T=S/2,M=this.getBlockHeight()/2,N=this.setting.width/this.setting.height;let B=this.setting.width,Y=this.setting.height,$=T-B;return this.setting.size==="stretch"?(S<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(b="portrait"),B=b==="portrait"?this.getBlockWidth():this.getBlockWidth()/2,B>this.setting.maxWidth&&(B=this.setting.maxWidth),Y=B/N,Y>this.getBlockHeight()&&(Y=this.getBlockHeight(),B=Y*N),$=b==="portrait"?T-B/2-B:T-B):S<2*B&&this.app.getSettings().usePortrait&&(b="portrait",$=T-B/2-B),this.boundsRect={left:$,top:M-Y/2,width:2*B,height:Y,pageWidth:B},b}setShadowData(b,S,T,M){if(!this.app.getSettings().drawShadow)return;const N=100*this.getSettings().maxShadowOpacity;this.shadow={pos:b,angle:S,width:3*this.getRect().pageWidth/4*T/100,opacity:(100-T)*N/100/100,direction:M,progress:2*T}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return this.boundsRect===null&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(b){this.pageRect=b}setDirection(b){this.direction=b}setRightPage(b){b!==null&&b.setOrientation(1),this.rightPage=b}setLeftPage(b){b!==null&&b.setOrientation(0),this.leftPage=b}setBottomPage(b){b!==null&&b.setOrientation(this.direction===1?0:1),this.bottomPage=b}setFlippingPage(b){b!==null&&b.setOrientation(this.direction===0&&this.orientation!=="portrait"?0:1),this.flippingPage=b}convertToBook(b){const S=this.getRect();return{x:b.x-S.left,y:b.y-S.top}}isSafari(){return this.safari}convertToPage(b,S){S||(S=this.direction);const T=this.getRect();return{x:S===0?b.x-T.left-T.width/2:T.width/2-b.x+T.left,y:b.y-T.top}}convertToGlobal(b,S){if(S||(S=this.direction),b==null)return null;const T=this.getRect();return{x:S===0?b.x+T.left+T.width/2:T.width/2-b.x+T.left,y:b.y+T.top}}convertRectToGlobal(b,S){return S||(S=this.direction),{topLeft:this.convertToGlobal(b.topLeft,S),topRight:this.convertToGlobal(b.topRight,S),bottomLeft:this.convertToGlobal(b.bottomLeft,S),bottomRight:this.convertToGlobal(b.bottomRight,S)}}}class w extends v{constructor(b,S,T){super(b,S),this.canvas=T,this.ctx=T.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),this.orientation!=="portrait"&&this.leftPage!=null&&this.leftPage.simpleDraw(0),this.rightPage!=null&&this.rightPage.simpleDraw(1),this.bottomPage!=null&&this.bottomPage.draw(),this.drawBookShadow(),this.flippingPage!=null&&this.flippingPage.draw(),this.shadow!=null&&(this.drawOuterShadow(),this.drawInnerShadow());const b=this.getRect();this.orientation==="portrait"&&(this.ctx.beginPath(),this.ctx.rect(b.left+b.pageWidth,b.top,b.width,b.height),this.ctx.clip())}drawBookShadow(){const b=this.getRect();this.ctx.save(),this.ctx.beginPath();const S=b.width/20;this.ctx.rect(b.left,b.top,b.width,b.height);const T={x:b.left+b.width/2-S/2,y:0};this.ctx.translate(T.x,T.y);const M=this.ctx.createLinearGradient(0,0,S,0);M.addColorStop(0,"rgba(0, 0, 0, 0)"),M.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),M.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),M.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),M.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),M.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=M,this.ctx.fillRect(0,0,S,2*b.height),this.ctx.restore()}drawOuterShadow(){const b=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(b.left,b.top,b.width,b.height);const S=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(S.x,S.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const T=this.ctx.createLinearGradient(0,0,this.shadow.width,0);this.shadow.direction===0?(this.ctx.translate(0,-100),T.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),T.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),T.addColorStop(0,"rgba(0, 0, 0, 0)"),T.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=T,this.ctx.fillRect(0,0,this.shadow.width,2*b.height),this.ctx.restore()}drawInnerShadow(){const b=this.getRect();this.ctx.save(),this.ctx.beginPath();const S=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),T=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(T.topLeft.x,T.topLeft.y),this.ctx.lineTo(T.topRight.x,T.topRight.y),this.ctx.lineTo(T.bottomRight.x,T.bottomRight.y),this.ctx.lineTo(T.bottomLeft.x,T.bottomLeft.y),this.ctx.translate(S.x,S.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const M=3*this.shadow.width/4,N=this.ctx.createLinearGradient(0,0,M,0);this.shadow.direction===0?(this.ctx.translate(-M,-100),N.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),N.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),N.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),N.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),N.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),N.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),N.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),N.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=N,this.ctx.fillRect(0,0,M,2*b.height),this.ctx.restore()}clear(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class _{constructor(b,S,T){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=N=>{if(this.checkTarget(N.target)){const B=this.getMousePos(N.clientX,N.clientY);this.app.startUserTouch(B),N.preventDefault()}},this.onTouchStart=N=>{if(this.checkTarget(N.target)&&N.changedTouches.length>0){const B=N.changedTouches[0],Y=this.getMousePos(B.clientX,B.clientY);this.touchPoint={point:Y,time:Date.now()},setTimeout(()=>{this.touchPoint!==null&&this.app.startUserTouch(Y)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||N.preventDefault()}},this.onMouseUp=N=>{const B=this.getMousePos(N.clientX,N.clientY);this.app.userStop(B)},this.onMouseMove=N=>{const B=this.getMousePos(N.clientX,N.clientY);this.app.userMove(B,!1)},this.onTouchMove=N=>{if(N.changedTouches.length>0){const B=N.changedTouches[0],Y=this.getMousePos(B.clientX,B.clientY);this.app.getSettings().mobileScrollSupport?(this.touchPoint!==null&&(Math.abs(this.touchPoint.point.x-Y.x)>10||this.app.getState()!=="read")&&N.cancelable&&this.app.userMove(Y,!0),this.app.getState()!=="read"&&N.preventDefault()):this.app.userMove(Y,!0)}},this.onTouchEnd=N=>{if(N.changedTouches.length>0){const B=N.changedTouches[0],Y=this.getMousePos(B.clientX,B.clientY);let $=!1;if(this.touchPoint!==null){const J=Y.x-this.touchPoint.point.x,nt=Math.abs(Y.y-this.touchPoint.point.y);Math.abs(J)>this.swipeDistance&&nt<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(J>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"),$=!0),this.touchPoint=null}this.app.userStop(Y,$)}},this.parentElement=b,b.classList.add("stf__parent"),b.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=b.querySelector(".stf__wrapper"),this.app=S;const M=this.app.getSettings().usePortrait?1:2;b.style.minWidth=T.minWidth*M+"px",b.style.minHeight=T.minHeight+"px",T.size==="fixed"&&(b.style.minWidth=T.width*M+"px",b.style.minHeight=T.height+"px"),T.autoSize&&(b.style.width="100%",b.style.maxWidth=2*T.maxWidth+"px"),b.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=T.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(b){this.wrapper.classList.remove("--portrait","--landscape"),b==="portrait"?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}getMousePos(b,S){const T=this.distElement.getBoundingClientRect();return{x:b-T.left,y:S-T.top}}checkTarget(b){return!this.app.getSettings().clickEventForward||!["a","button"].includes(b.tagName.toLowerCase())}}class E extends _{constructor(b,S,T,M){super(b,S,T),this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),this.distElement=b.querySelector(".stf__block"),this.items=M;for(const N of M)this.distElement.appendChild(N);this.setHandlers()}clear(){for(const b of this.items)this.parentElement.appendChild(b)}updateItems(b){this.removeHandlers(),this.distElement.innerHTML="";for(const S of b)this.distElement.appendChild(S);this.items=b,this.setHandlers()}update(){this.app.getRender().update()}}class C extends _{constructor(b,S,T){super(b,S,T),this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',this.canvas=b.querySelectorAll("canvas")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const b=getComputedStyle(this.canvas),S=parseInt(b.getPropertyValue("width"),10),T=parseInt(b.getPropertyValue("height"),10);this.canvas.width=S,this.canvas.height=T}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class R extends v{constructor(b,S,T){super(b,S),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=T,this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",`<div class="stf__outerShadow"></div>
             <div class="stf__innerShadow"></div>
             <div class="stf__hardShadow"></div>
             <div class="stf__hardInnerShadow"></div>`),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const b=this.getRect(),S=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let T=(100-S)*(2.5*b.pageWidth)/100+20;T>b.pageWidth&&(T=b.pageWidth);let M=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+5).toString(10)};
            width: ${T}px;
            height: ${b.height}px;
            background: linear-gradient(to right,
                rgba(0, 0, 0, ${this.shadow.opacity*S/100}) 5%,
                rgba(0, 0, 0, 0) 100%);
            left: ${b.left+b.width/2}px;
            transform-origin: 0 0;
        `;M+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=M}drawHardOuterShadow(){const b=this.getRect();let S=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*b.pageWidth)/100+20;S>b.pageWidth&&(S=b.pageWidth);let T=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+4).toString(10)};
            width: ${S}px;
            height: ${b.height}px;
            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);
            left: ${b.left+b.width/2}px;
            transform-origin: 0 0;
        `;T+=this.getDirection()===0&&this.shadow.progress>100||this.getDirection()===1&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=T}drawInnerShadow(){const b=this.getRect(),S=3*this.shadow.width/4,T=this.getDirection()===0?S:0,M=this.getDirection()===0?"to left":"to right",N=this.convertToGlobal(this.shadow.pos),B=this.shadow.angle+3*Math.PI/2,Y=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let $="polygon( ";for(const nt of Y){let tt=this.getDirection()===1?{x:-nt.x+this.shadow.pos.x,y:nt.y-this.shadow.pos.y}:{x:nt.x-this.shadow.pos.x,y:nt.y-this.shadow.pos.y};tt=u.GetRotatedPoint(tt,{x:T,y:100},B),$+=tt.x+"px "+tt.y+"px, "}$=$.slice(0,-2),$+=")";const J=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${S}px;
            height: ${2*b.height}px;
            background: linear-gradient(${M},
                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,
                rgba(0, 0, 0, 0.05) 15%,
                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,
                rgba(0, 0, 0, 0) 100%);
            transform-origin: ${T}px 100px;
            transform: translate3d(${N.x-T}px, ${N.y-100}px, 0) rotate(${B}rad);
            clip-path: ${$};
            -webkit-clip-path: ${$};
        `;this.innerShadow.style.cssText=J}drawOuterShadow(){const b=this.getRect(),S=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),T=this.shadow.angle+3*Math.PI/2,M=this.getDirection()===1?this.shadow.width:0,N=this.getDirection()===0?"to right":"to left",B=[{x:0,y:0},{x:b.pageWidth,y:0},{x:b.pageWidth,y:b.height},{x:0,y:b.height}];let Y="polygon( ";for(const J of B)if(J!==null){let nt=this.getDirection()===1?{x:-J.x+this.shadow.pos.x,y:J.y-this.shadow.pos.y}:{x:J.x-this.shadow.pos.x,y:J.y-this.shadow.pos.y};nt=u.GetRotatedPoint(nt,{x:M,y:100},T),Y+=nt.x+"px "+nt.y+"px, "}Y=Y.slice(0,-2),Y+=")";const $=`
            display: block;
            z-index: ${(this.getSettings().startZIndex+10).toString(10)};
            width: ${this.shadow.width}px;
            height: ${2*b.height}px;
            background: linear-gradient(${N}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));
            transform-origin: ${M}px 100px;
            transform: translate3d(${S.x-M}px, ${S.y-100}px, 0) rotate(${T}rad);
            clip-path: ${Y};
            -webkit-clip-path: ${Y};
        `;this.outerShadow.style.cssText=$}drawLeftPage(){this.orientation!=="portrait"&&this.leftPage!==null&&(this.direction===1&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){this.rightPage!==null&&(this.direction===0&&this.flippingPage!==null&&this.flippingPage.getDrawingDensity()==="hard"?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(this.bottomPage===null)return;const b=this.flippingPage!=null?this.flippingPage.getDrawingDensity():null;this.orientation==="portrait"&&this.direction===1||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(b))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),this.flippingPage!=null&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),this.shadow!=null&&this.flippingPage!==null&&(this.flippingPage.getDrawingDensity()==="soft"?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const b of this.app.getPageCollection().getPages())b!==this.leftPage&&b!==this.rightPage&&b!==this.flippingPage&&b!==this.bottomPage&&(b.getElement().style.cssText="display: none"),b.getTemporaryCopy()!==this.flippingPage&&b.hideTemporaryCopy()}update(){super.update(),this.rightPage!==null&&this.rightPage.setOrientation(1),this.leftPage!==null&&this.leftPage.setOrientation(0)}}class L{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(b){const S=this._default;if(Object.assign(S,b),S.size!=="stretch"&&S.size!=="fixed")throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(S.width<=0||S.height<=0)throw new Error("Invalid width or height");if(S.flippingTime<=0)throw new Error("Invalid flipping time");return S.size==="stretch"?(S.minWidth<=0&&(S.minWidth=100),S.maxWidth<S.minWidth&&(S.maxWidth=2e3),S.minHeight<=0&&(S.minHeight=100),S.maxHeight<S.minHeight&&(S.maxHeight=2e3)):(S.minWidth=S.width,S.maxWidth=S.width,S.minHeight=S.height,S.maxHeight=S.height),S}}(function(D,b){b===void 0&&(b={});var S=b.insertAt;if(typeof document<"u"){var T=document.head||document.getElementsByTagName("head")[0],M=document.createElement("style");M.type="text/css",S==="top"&&T.firstChild?T.insertBefore(M,T.firstChild):T.appendChild(M),M.styleSheet?M.styleSheet.cssText=D:M.appendChild(document.createTextNode(D))}})(`.stf__parent {
  position: relative;
  display: block;
  box-sizing: border-box;
  transform: translateZ(0);

  -ms-touch-action: pan-y;
  touch-action: pan-y;
}

.sft__wrapper {
  position: relative;
  width: 100%;
  box-sizing: border-box;
}

.stf__parent canvas {
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
}

.stf__block {
  position: absolute;
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  perspective: 2000px;
}

.stf__item {
  display: none;
  position: absolute;
  transform-style: preserve-3d;
}

.stf__outerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__innerShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardShadow {
  position: absolute;
  left: 0;
  top: 0;
}

.stf__hardInnerShadow {
  position: absolute;
  left: 0;
  top: 0;
}`),i.PageFlip=class extends class{constructor(){this.events=new Map}on(D,b){return this.events.has(D)?this.events.get(D).push(b):this.events.set(D,[b]),this}off(D){this.events.delete(D)}trigger(D,b,S=null){if(this.events.has(D))for(const T of this.events.get(D))T({data:S,object:b})}}{constructor(D,b){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=new L().getSettings(b),this.block=D}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(D){this.ui=new C(this.block,this,this.setting);const b=this.ui.getCanvas();this.render=new w(this,this.setting,b),this.flipController=new y(this.render,this),this.pages=new c(this,this.render,D),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(D){this.ui=new E(this.block,this,this.setting,D),this.render=new R(this,this.setting,this.ui.getDistElement()),this.flipController=new y(this.render,this),this.pages=new g(this,this.render,this.ui.getDistElement(),D),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(D){const b=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new c(this,this.render,D),this.pages.load(),this.pages.show(b),this.trigger("update",this,{page:b,mode:this.render.getOrientation()})}updateFromHtml(D){const b=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new g(this,this.render,this.ui.getDistElement(),D),this.pages.load(),this.ui.updateItems(D),this.render.reload(),this.pages.show(b),this.trigger("update",this,{page:b,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(D){this.pages.show(D)}flipNext(D="top"){this.flipController.flipNext(D)}flipPrev(D="top"){this.flipController.flipPrev(D)}flip(D,b="top"){this.flipController.flipToPage(D,b)}updateState(D){this.trigger("changeState",this,D)}updatePageIndex(D){this.trigger("flip",this,D)}updateOrientation(D){this.ui.setOrientationStyle(D),this.update(),this.trigger("changeOrientation",this,D)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(D){return this.pages.getPage(D)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(D){this.mousePosition=D,this.isUserTouch=!0,this.isUserMove=!1}userMove(D,b){this.isUserTouch||b||!this.setting.showPageCorners?this.isUserTouch&&u.GetDistanceBetweenTwoPoint(this.mousePosition,D)>5&&(this.isUserMove=!0,this.flipController.fold(D)):this.flipController.showCorner(D)}userStop(D,b=!1){this.isUserTouch&&(this.isUserTouch=!1,b||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(D)))}},Object.defineProperty(i,"__esModule",{value:!0})}))})(Er,Er.exports)),Er.exports}var uw=cw();const hw=vr.forwardRef((h,t)=>{const i=I.useRef(null),s=I.useRef([]),r=I.useRef(),[o,c]=I.useState([]);I.useImperativeHandle(t,()=>({pageFlip:()=>r.current}));const u=I.useCallback(()=>{r.current&&r.current.clear()},[]),d=I.useCallback(()=>{const g=r.current;g&&(g.off("flip"),g.off("changeOrientation"),g.off("changeState"),g.off("init"),g.off("update"))},[]);return I.useEffect(()=>{if(s.current=[],h.children){const g=vr.Children.map(h.children,m=>vr.cloneElement(m,{ref:y=>{y&&s.current.push(y)}}));(!h.renderOnlyPageLengthChange||o.length!==g.length)&&(g.length<o.length&&u(),c(g))}},[h.children]),I.useEffect(()=>{const g=()=>{const m=r.current;m&&(h.onFlip&&m.on("flip",y=>h.onFlip(y)),h.onChangeOrientation&&m.on("changeOrientation",y=>h.onChangeOrientation(y)),h.onChangeState&&m.on("changeState",y=>h.onChangeState(y)),h.onInit&&m.on("init",y=>h.onInit(y)),h.onUpdate&&m.on("update",y=>h.onUpdate(y)))};o.length>0&&s.current.length>0&&(d(),i.current&&!r.current&&(r.current=new uw.PageFlip(i.current,h)),r.current.getFlipController()?r.current.updateFromHtml(s.current):r.current.loadFromHTML(s.current),g())},[o]),vr.createElement("div",{ref:i,className:h.className,style:h.style},o)}),dw=vr.memo(hw),fw="_main_hz90w_1",gw="_uploadSection_hz90w_15",pw="_dropArea_hz90w_29",mw="_uploadIcon_hz90w_59",yw="_uploadPrompt_hz90w_69",bw="_readButton_diable_hz90w_167",vw="_readButton_hz90w_167",Aw="_document_hz90w_231",Sw="_flipbook_hz90w_251",ww="_demoPage_hz90w_265",Ei={main:fw,uploadSection:gw,dropArea:pw,uploadIcon:mw,uploadPrompt:yw,readButton_diable:bw,readButton:vw,document:Aw,flipbook:Sw,demoPage:ww};Gn.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/5.3.93/pdf.worker.min.mjs";const Ew=()=>{const[h,t]=I.useState(null),[i,s]=I.useState(null),[r,o]=I.useState(!1),c=I.useRef(null),u=E=>E&&E.type.includes("pdf")&&E.size<=30*1024*1024,d=E=>{const C=E.target.files[0];u(C)?(t(C),s(null),o(!1)):alert("Please upload a PDF file (max 30MB).")},g=E=>{E.preventDefault();const C=E.dataTransfer.files[0];u(C)?(t(C),s(null),o(!1)):alert("Please drop a PDF file (max 30MB).")},m=E=>E.preventDefault(),[y,v]=I.useState(0),w=({numPages:E})=>{s(E)},_=E=>{if(!E)return"Upload your file here";const C=E.name;if(C.length<=18)return C;const R=C.lastIndexOf("."),L=R!==-1?C.slice(R):"";return`${C.slice(0,10)}......${L}`};return wt.jsxs("div",{className:Ei.main,children:[wt.jsxs("div",{className:Ei.uploadSection,children:[wt.jsxs("div",{className:Ei.dropArea,onDrop:g,onDragOver:m,onClick:()=>c.current.click(),role:"button","aria-label":"Upload PDF file",tabIndex:0,onKeyDown:E=>E.key==="Enter"&&c.current.click(),children:[wt.jsx("i",{className:"fa-solid fa-cloud-arrow-up",id:Ei.uploadIcon}),wt.jsx("span",{className:Ei.uploadPrompt,children:_(h)}),wt.jsx("input",{type:"file",accept:"application/pdf",ref:c,style:{display:"none"},onChange:d})]}),wt.jsx("button",{className:!h||r?Ei.readButton_diable:Ei.readButton,disabled:!h||r,onClick:()=>o(!0),children:"Read"})]}),h&&r&&wt.jsx(QS,{file:h,onLoadSuccess:w,loading:"Loading PDF...",className:Ei.document,children:i&&wt.jsx(dw,{width:450,height:600,showCover:!0,startPage:0,size:"stretch",maxShadowOpacity:.5,drawShadow:!0,mobileScrollSupport:!0,className:`${Ei.flipbook} ${y>0?Ei.hasShadow:""}`,onFlip:E=>v(E.data),children:[...Array(i)].map((E,C)=>wt.jsx("div",{className:Ei.demoPage,children:wt.jsx(ow,{pageNumber:C+1,width:450,height:600,renderTextLayer:!1,renderAnnotationLayer:!1})},`page_${C+1}`))})})]})};/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fm="popstate";function _w(h={}){function t(s,r){let{pathname:o,search:c,hash:u}=s.location;return xh("",{pathname:o,search:c,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(s,r){return typeof r=="string"?r:Lr(r)}return Tw(t,i,null,h)}function Jt(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function Hi(h,t){if(!h){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xw(){return Math.random().toString(36).substring(2,10)}function Um(h,t){return{usr:h.state,key:h.key,idx:t}}function xh(h,t,i=null,s){return{pathname:typeof h=="string"?h:h.pathname,search:"",hash:"",...typeof t=="string"?ya(t):t,state:i,key:t&&t.key||s||xw()}}function Lr({pathname:h="/",search:t="",hash:i=""}){return t&&t!=="?"&&(h+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(h+=i.charAt(0)==="#"?i:"#"+i),h}function ya(h){let t={};if(h){let i=h.indexOf("#");i>=0&&(t.hash=h.substring(i),h=h.substring(0,i));let s=h.indexOf("?");s>=0&&(t.search=h.substring(s),h=h.substring(0,s)),h&&(t.pathname=h)}return t}function Tw(h,t,i,s={}){let{window:r=document.defaultView,v5Compat:o=!1}=s,c=r.history,u="POP",d=null,g=m();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function m(){return(c.state||{idx:null}).idx}function y(){u="POP";let C=m(),R=C==null?null:C-g;g=C,d&&d({action:u,location:E.location,delta:R})}function v(C,R){u="PUSH";let L=xh(E.location,C,R);g=m()+1;let D=Um(L,g),b=E.createHref(L);try{c.pushState(D,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(b)}o&&d&&d({action:u,location:E.location,delta:1})}function w(C,R){u="REPLACE";let L=xh(E.location,C,R);g=m();let D=Um(L,g),b=E.createHref(L);c.replaceState(D,"",b),o&&d&&d({action:u,location:E.location,delta:0})}function _(C){return Cw(C)}let E={get action(){return u},get location(){return h(r,c)},listen(C){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Fm,y),d=C,()=>{r.removeEventListener(Fm,y),d=null}},createHref(C){return t(r,C)},createURL:_,encodeLocation(C){let R=_(C);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:v,replace:w,go(C){return c.go(C)}};return E}function Cw(h,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(i,"No window.location.(origin|href) available to create URL");let s=typeof h=="string"?h:Lr(h);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Gy(h,t,i="/"){return Rw(h,t,i,!1)}function Rw(h,t,i,s){let r=typeof t=="string"?ya(t):t,o=hn(r.pathname||"/",i);if(o==null)return null;let c=jy(h);Mw(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let g=Fw(o);u=Iw(c[d],g,s)}return u}function jy(h,t=[],i=[],s="",r=!1){let o=(c,u,d=r,g)=>{let m={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(s)&&d)return;Jt(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length)}let y=ln([s,m.relativePath]),v=i.concat(m);c.children&&c.children.length>0&&(Jt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),jy(c.children,t,v,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:zw(y,c.index),routesMeta:v})};return h.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let d of qy(c.path))o(c,u,!0,d)}),t}function qy(h){let t=h.split("/");if(t.length===0)return[];let[i,...s]=t,r=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return r?[o,""]:[o];let c=qy(s.join("/")),u=[];return u.push(...c.map(d=>d===""?o:[o,d].join("/"))),r&&u.push(...c),u.map(d=>h.startsWith("/")&&d===""?"/":d)}function Mw(h){h.sort((t,i)=>t.score!==i.score?i.score-t.score:Bw(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var Dw=/^:[\w-]+$/,Lw=3,Ow=2,Nw=1,Pw=10,kw=-2,Gm=h=>h==="*";function zw(h,t){let i=h.split("/"),s=i.length;return i.some(Gm)&&(s+=kw),t&&(s+=Ow),i.filter(r=>!Gm(r)).reduce((r,o)=>r+(Dw.test(o)?Lw:o===""?Nw:Pw),s)}function Bw(h,t){return h.length===t.length&&h.slice(0,-1).every((s,r)=>s===t[r])?h[h.length-1]-t[t.length-1]:0}function Iw(h,t,i=!1){let{routesMeta:s}=h,r={},o="/",c=[];for(let u=0;u<s.length;++u){let d=s[u],g=u===s.length-1,m=o==="/"?t:t.slice(o.length)||"/",y=wl({path:d.relativePath,caseSensitive:d.caseSensitive,end:g},m),v=d.route;if(!y&&g&&i&&!s[s.length-1].route.index&&(y=wl({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!y)return null;Object.assign(r,y.params),c.push({params:r,pathname:ln([o,y.pathname]),pathnameBase:qw(ln([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ln([o,y.pathnameBase]))}return c}function wl(h,t){typeof h=="string"&&(h={path:h,caseSensitive:!1,end:!0});let[i,s]=Hw(h.path,h.caseSensitive,h.end),r=t.match(i);if(!r)return null;let o=r[0],c=o.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((g,{paramName:m,isOptional:y},v)=>{if(m==="*"){let _=u[v]||"";c=o.slice(0,o.length-_.length).replace(/(.)\/+$/,"$1")}const w=u[v];return y&&!w?g[m]=void 0:g[m]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:h}}function Hw(h,t=!1,i=!0){Hi(h==="*"||!h.endsWith("*")||h.endsWith("/*"),`Route path "${h}" will be treated as if it were "${h.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${h.replace(/\*$/,"/*")}".`);let s=[],r="^"+h.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return h.endsWith("*")?(s.push({paramName:"*"}),r+=h==="*"||h==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?r+="\\/*$":h!==""&&h!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function Fw(h){try{return h.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hi(!1,`The URL path "${h}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),h}}function hn(h,t){if(t==="/")return h;if(!h.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=h.charAt(i);return s&&s!=="/"?null:h.slice(i)||"/"}function Uw(h,t="/"){let{pathname:i,search:s="",hash:r=""}=typeof h=="string"?ya(h):h;return{pathname:i?i.startsWith("/")?i:Gw(i,t):t,search:Vw(s),hash:Yw(r)}}function Gw(h,t){let i=t.replace(/\/+$/,"").split("/");return h.split("/").forEach(r=>{r===".."?i.length>1&&i.pop():r!=="."&&i.push(r)}),i.length>1?i.join("/"):"/"}function fh(h,t,i,s){return`Cannot include a '${h}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jw(h){return h.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Vy(h){let t=jw(h);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function Yy(h,t,i,s=!1){let r;typeof h=="string"?r=ya(h):(r={...h},Jt(!r.pathname||!r.pathname.includes("?"),fh("?","pathname","search",r)),Jt(!r.pathname||!r.pathname.includes("#"),fh("#","pathname","hash",r)),Jt(!r.search||!r.search.includes("#"),fh("#","search","hash",r)));let o=h===""||r.pathname==="",c=o?"/":r.pathname,u;if(c==null)u=i;else{let y=t.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;r.pathname=v.join("/")}u=y>=0?t[y]:"/"}let d=Uw(r,u),g=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&i.endsWith("/");return!d.pathname.endsWith("/")&&(g||m)&&(d.pathname+="/"),d}var ln=h=>h.join("/").replace(/\/\/+/g,"/"),qw=h=>h.replace(/\/+$/,"").replace(/^\/*/,"/"),Vw=h=>!h||h==="?"?"":h.startsWith("?")?h:"?"+h,Yw=h=>!h||h==="#"?"":h.startsWith("#")?h:"#"+h;function Xw(h){return h!=null&&typeof h.status=="number"&&typeof h.statusText=="string"&&typeof h.internal=="boolean"&&"data"in h}var Xy=["POST","PUT","PATCH","DELETE"];new Set(Xy);var $w=["GET",...Xy];new Set($w);var ba=I.createContext(null);ba.displayName="DataRouter";var Pl=I.createContext(null);Pl.displayName="DataRouterState";I.createContext(!1);var $y=I.createContext({isTransitioning:!1});$y.displayName="ViewTransition";var Ww=I.createContext(new Map);Ww.displayName="Fetchers";var Kw=I.createContext(null);Kw.displayName="Await";var Fi=I.createContext(null);Fi.displayName="Navigation";var Ur=I.createContext(null);Ur.displayName="Location";var dn=I.createContext({outlet:null,matches:[],isDataRoute:!1});dn.displayName="Route";var Wh=I.createContext(null);Wh.displayName="RouteError";function Qw(h,{relative:t}={}){Jt(Gr(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=I.useContext(Fi),{hash:r,pathname:o,search:c}=jr(h,{relative:t}),u=o;return i!=="/"&&(u=o==="/"?i:ln([i,o])),s.createHref({pathname:u,search:c,hash:r})}function Gr(){return I.useContext(Ur)!=null}function As(){return Jt(Gr(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Ur).location}var Wy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ky(h){I.useContext(Fi).static||I.useLayoutEffect(h)}function Zw(){let{isDataRoute:h}=I.useContext(dn);return h?h1():Jw()}function Jw(){Jt(Gr(),"useNavigate() may be used only in the context of a <Router> component.");let h=I.useContext(ba),{basename:t,navigator:i}=I.useContext(Fi),{matches:s}=I.useContext(dn),{pathname:r}=As(),o=JSON.stringify(Vy(s)),c=I.useRef(!1);return Ky(()=>{c.current=!0}),I.useCallback((d,g={})=>{if(Hi(c.current,Wy),!c.current)return;if(typeof d=="number"){i.go(d);return}let m=Yy(d,JSON.parse(o),r,g.relative==="path");h==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ln([t,m.pathname])),(g.replace?i.replace:i.push)(m,g.state,g)},[t,i,o,r,h])}I.createContext(null);function jr(h,{relative:t}={}){let{matches:i}=I.useContext(dn),{pathname:s}=As(),r=JSON.stringify(Vy(i));return I.useMemo(()=>Yy(h,JSON.parse(r),s,t==="path"),[h,r,s,t])}function t1(h,t){return Qy(h,t)}function Qy(h,t,i,s,r){Jt(Gr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(Fi),{matches:c}=I.useContext(dn),u=c[c.length-1],d=u?u.params:{},g=u?u.pathname:"/",m=u?u.pathnameBase:"/",y=u&&u.route;{let L=y&&y.path||"";Zy(g,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let v=As(),w;if(t){let L=typeof t=="string"?ya(t):t;Jt(m==="/"||L.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${L.pathname}" was given in the \`location\` prop.`),w=L}else w=v;let _=w.pathname||"/",E=_;if(m!=="/"){let L=m.replace(/^\//,"").split("/");E="/"+_.replace(/^\//,"").split("/").slice(L.length).join("/")}let C=Gy(h,{pathname:E});Hi(y||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Hi(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=a1(C&&C.map(L=>Object.assign({},L,{params:Object.assign({},d,L.params),pathname:ln([m,o.encodeLocation?o.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?m:ln([m,o.encodeLocation?o.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,i,s,r);return t&&R?I.createElement(Ur.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},R):R}function e1(){let h=u1(),t=Xw(h)?`${h.status} ${h.statusText}`:h instanceof Error?h.message:JSON.stringify(h),i=h instanceof Error?h.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",h),c=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),i?I.createElement("pre",{style:r},i):null,c)}var i1=I.createElement(e1,null),n1=class extends I.Component{constructor(h){super(h),this.state={location:h.location,revalidation:h.revalidation,error:h.error}}static getDerivedStateFromError(h){return{error:h}}static getDerivedStateFromProps(h,t){return t.location!==h.location||t.revalidation!=="idle"&&h.revalidation==="idle"?{error:h.error,location:h.location,revalidation:h.revalidation}:{error:h.error!==void 0?h.error:t.error,location:t.location,revalidation:h.revalidation||t.revalidation}}componentDidCatch(h,t){this.props.unstable_onError?this.props.unstable_onError(h,t):console.error("React Router caught the following error during render",h)}render(){return this.state.error!==void 0?I.createElement(dn.Provider,{value:this.props.routeContext},I.createElement(Wh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function s1({routeContext:h,match:t,children:i}){let s=I.useContext(ba);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(dn.Provider,{value:h},i)}function a1(h,t=[],i=null,s=null,r=null){if(h==null){if(!i)return null;if(i.errors)h=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)h=i.matches;else return null}let o=h,c=i?.errors;if(c!=null){let g=o.findIndex(m=>m.route.id&&c?.[m.route.id]!==void 0);Jt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let u=!1,d=-1;if(i)for(let g=0;g<o.length;g++){let m=o[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=g),m.route.id){let{loaderData:y,errors:v}=i,w=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((g,m,y)=>{let v,w=!1,_=null,E=null;i&&(v=c&&m.route.id?c[m.route.id]:void 0,_=m.route.errorElement||i1,u&&(d<0&&y===0?(Zy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,E=null):d===y&&(w=!0,E=m.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,y+1)),R=()=>{let L;return v?L=_:w?L=E:m.route.Component?L=I.createElement(m.route.Component,null):m.route.element?L=m.route.element:L=g,I.createElement(s1,{match:m,routeContext:{outlet:g,matches:C,isDataRoute:i!=null},children:L})};return i&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?I.createElement(n1,{location:i.location,revalidation:i.revalidation,component:_,error:v,children:R(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:s}):R()},null)}function Kh(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r1(h){let t=I.useContext(ba);return Jt(t,Kh(h)),t}function o1(h){let t=I.useContext(Pl);return Jt(t,Kh(h)),t}function l1(h){let t=I.useContext(dn);return Jt(t,Kh(h)),t}function Qh(h){let t=l1(h),i=t.matches[t.matches.length-1];return Jt(i.route.id,`${h} can only be used on routes that contain a unique "id"`),i.route.id}function c1(){return Qh("useRouteId")}function u1(){let h=I.useContext(Wh),t=o1("useRouteError"),i=Qh("useRouteError");return h!==void 0?h:t.errors?.[i]}function h1(){let{router:h}=r1("useNavigate"),t=Qh("useNavigate"),i=I.useRef(!1);return Ky(()=>{i.current=!0}),I.useCallback(async(r,o={})=>{Hi(i.current,Wy),i.current&&(typeof r=="number"?h.navigate(r):await h.navigate(r,{fromRouteId:t,...o}))},[h,t])}var jm={};function Zy(h,t,i){!t&&!jm[h]&&(jm[h]=!0,Hi(!1,i))}I.memo(d1);function d1({routes:h,future:t,state:i,unstable_onError:s}){return Qy(h,void 0,i,s,t)}function Jy(h){Jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function f1({basename:h="/",children:t=null,location:i,navigationType:s="POP",navigator:r,static:o=!1}){Jt(!Gr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=h.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:c,navigator:r,static:o,future:{}}),[c,r,o]);typeof i=="string"&&(i=ya(i));let{pathname:d="/",search:g="",hash:m="",state:y=null,key:v="default"}=i,w=I.useMemo(()=>{let _=hn(d,c);return _==null?null:{location:{pathname:_,search:g,hash:m,state:y,key:v},navigationType:s}},[c,d,g,m,y,v,s]);return Hi(w!=null,`<Router basename="${c}"> is not able to match the URL "${d}${g}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:I.createElement(Fi.Provider,{value:u},I.createElement(Ur.Provider,{children:t,value:w}))}function g1({children:h,location:t}){return t1(Th(h),t)}function Th(h,t=[]){let i=[];return I.Children.forEach(h,(s,r)=>{if(!I.isValidElement(s))return;let o=[...t,r];if(s.type===I.Fragment){i.push.apply(i,Th(s.props.children,o));return}Jt(s.type===Jy,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Th(s.props.children,o)),i.push(c)}),i}var bl="get",vl="application/x-www-form-urlencoded";function kl(h){return h!=null&&typeof h.tagName=="string"}function p1(h){return kl(h)&&h.tagName.toLowerCase()==="button"}function m1(h){return kl(h)&&h.tagName.toLowerCase()==="form"}function y1(h){return kl(h)&&h.tagName.toLowerCase()==="input"}function b1(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)}function v1(h,t){return h.button===0&&(!t||t==="_self")&&!b1(h)}var pl=null;function A1(){if(pl===null)try{new FormData(document.createElement("form"),0),pl=!1}catch{pl=!0}return pl}var S1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gh(h){return h!=null&&!S1.has(h)?(Hi(!1,`"${h}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vl}"`),null):h}function w1(h,t){let i,s,r,o,c;if(m1(h)){let u=h.getAttribute("action");s=u?hn(u,t):null,i=h.getAttribute("method")||bl,r=gh(h.getAttribute("enctype"))||vl,o=new FormData(h)}else if(p1(h)||y1(h)&&(h.type==="submit"||h.type==="image")){let u=h.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=h.getAttribute("formaction")||u.getAttribute("action");if(s=d?hn(d,t):null,i=h.getAttribute("formmethod")||u.getAttribute("method")||bl,r=gh(h.getAttribute("formenctype"))||gh(u.getAttribute("enctype"))||vl,o=new FormData(u,h),!A1()){let{name:g,type:m,value:y}=h;if(m==="image"){let v=g?`${g}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else g&&o.append(g,y)}}else{if(kl(h))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=bl,s=null,r=vl,c=h}return o&&r==="text/plain"&&(c=o,o=void 0),{action:s,method:i.toLowerCase(),encType:r,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zh(h,t){if(h===!1||h===null||typeof h>"u")throw new Error(t)}function E1(h,t,i){let s=typeof h=="string"?new URL(h,typeof window>"u"?"server://singlefetch/":window.location.origin):h;return s.pathname==="/"?s.pathname=`_root.${i}`:t&&hn(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function _1(h,t){if(h.id in t)return t[h.id];try{let i=await import(h.module);return t[h.id]=i,i}catch(i){return console.error(`Error loading route module \`${h.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function x1(h){return h==null?!1:h.href==null?h.rel==="preload"&&typeof h.imageSrcSet=="string"&&typeof h.imageSizes=="string":typeof h.rel=="string"&&typeof h.href=="string"}async function T1(h,t,i){let s=await Promise.all(h.map(async r=>{let o=t.routes[r.route.id];if(o){let c=await _1(o,i);return c.links?c.links():[]}return[]}));return D1(s.flat(1).filter(x1).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function qm(h,t,i,s,r,o){let c=(d,g)=>i[g]?d.route.id!==i[g].route.id:!0,u=(d,g)=>i[g].pathname!==d.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,g)=>c(d,g)||u(d,g)):o==="data"?t.filter((d,g)=>{let m=s.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,g)||u(d,g))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(h,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function C1(h,t,{includeHydrateFallback:i}={}){return R1(h.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function R1(h){return[...new Set(h)]}function M1(h){let t={},i=Object.keys(h).sort();for(let s of i)t[s]=h[s];return t}function D1(h,t){let i=new Set;return new Set(t),h.reduce((s,r)=>{let o=JSON.stringify(M1(r));return i.has(o)||(i.add(o),s.push({key:o,link:r})),s},[])}function t0(){let h=I.useContext(ba);return Zh(h,"You must render this element inside a <DataRouterContext.Provider> element"),h}function L1(){let h=I.useContext(Pl);return Zh(h,"You must render this element inside a <DataRouterStateContext.Provider> element"),h}var Jh=I.createContext(void 0);Jh.displayName="FrameworkContext";function e0(){let h=I.useContext(Jh);return Zh(h,"You must render this element inside a <HydratedRouter> element"),h}function O1(h,t){let i=I.useContext(Jh),[s,r]=I.useState(!1),[o,c]=I.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:g,onMouseLeave:m,onTouchStart:y}=t,v=I.useRef(null);I.useEffect(()=>{if(h==="render"&&c(!0),h==="viewport"){let E=R=>{R.forEach(L=>{c(L.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[h]),I.useEffect(()=>{if(s){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[s]);let w=()=>{r(!0)},_=()=>{r(!1),c(!1)};return i?h!=="intent"?[o,v,{}]:[o,v,{onFocus:br(u,w),onBlur:br(d,_),onMouseEnter:br(g,w),onMouseLeave:br(m,_),onTouchStart:br(y,w)}]:[!1,v,{}]}function br(h,t){return i=>{h&&h(i),i.defaultPrevented||t(i)}}function N1({page:h,...t}){let{router:i}=t0(),s=I.useMemo(()=>Gy(i.routes,h,i.basename),[i.routes,h,i.basename]);return s?I.createElement(k1,{page:h,matches:s,...t}):null}function P1(h){let{manifest:t,routeModules:i}=e0(),[s,r]=I.useState([]);return I.useEffect(()=>{let o=!1;return T1(h,t,i).then(c=>{o||r(c)}),()=>{o=!0}},[h,t,i]),s}function k1({page:h,matches:t,...i}){let s=As(),{manifest:r,routeModules:o}=e0(),{basename:c}=t0(),{loaderData:u,matches:d}=L1(),g=I.useMemo(()=>qm(h,t,d,r,s,"data"),[h,t,d,r,s]),m=I.useMemo(()=>qm(h,t,d,r,s,"assets"),[h,t,d,r,s]),y=I.useMemo(()=>{if(h===s.pathname+s.search+s.hash)return[];let _=new Set,E=!1;if(t.forEach(R=>{let L=r.routes[R.route.id];!L||!L.hasLoader||(!g.some(D=>D.route.id===R.route.id)&&R.route.id in u&&o[R.route.id]?.shouldRevalidate||L.hasClientLoader?E=!0:_.add(R.route.id))}),_.size===0)return[];let C=E1(h,c,"data");return E&&_.size>0&&C.searchParams.set("_routes",t.filter(R=>_.has(R.route.id)).map(R=>R.route.id).join(",")),[C.pathname+C.search]},[c,u,s,r,g,t,h,o]),v=I.useMemo(()=>C1(m,r),[m,r]),w=P1(m);return I.createElement(I.Fragment,null,y.map(_=>I.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...i})),v.map(_=>I.createElement("link",{key:_,rel:"modulepreload",href:_,...i})),w.map(({key:_,link:E})=>I.createElement("link",{key:_,nonce:i.nonce,...E})))}function z1(...h){return t=>{h.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var i0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{i0&&(window.__reactRouterVersion="7.9.3")}catch{}function B1({basename:h,children:t,window:i}){let s=I.useRef();s.current==null&&(s.current=_w({window:i,v5Compat:!0}));let r=s.current,[o,c]=I.useState({action:r.action,location:r.location}),u=I.useCallback(d=>{I.startTransition(()=>c(d))},[c]);return I.useLayoutEffect(()=>r.listen(u),[r,u]),I.createElement(f1,{basename:h,children:t,location:o.location,navigationType:o.action,navigator:r})}var n0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,s0=I.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:r,reloadDocument:o,replace:c,state:u,target:d,to:g,preventScrollReset:m,viewTransition:y,...v},w){let{basename:_}=I.useContext(Fi),E=typeof g=="string"&&n0.test(g),C,R=!1;if(typeof g=="string"&&E&&(C=g,i0))try{let B=new URL(window.location.href),Y=g.startsWith("//")?new URL(B.protocol+g):new URL(g),$=hn(Y.pathname,_);Y.origin===B.origin&&$!=null?g=$+Y.search+Y.hash:R=!0}catch{Hi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=Qw(g,{relative:r}),[D,b,S]=O1(s,v),T=U1(g,{replace:c,state:u,target:d,preventScrollReset:m,relative:r,viewTransition:y});function M(B){t&&t(B),B.defaultPrevented||T(B)}let N=I.createElement("a",{...v,...S,href:C||L,onClick:R||o?t:M,ref:z1(w,b),target:d,"data-discover":!E&&i==="render"?"true":void 0});return D&&!E?I.createElement(I.Fragment,null,N,I.createElement(N1,{page:L})):N});s0.displayName="Link";var I1=I.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:r=!1,style:o,to:c,viewTransition:u,children:d,...g},m){let y=jr(c,{relative:g.relative}),v=As(),w=I.useContext(Pl),{navigator:_,basename:E}=I.useContext(Fi),C=w!=null&&Y1(y)&&u===!0,R=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,L=v.pathname,D=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(L=L.toLowerCase(),D=D?D.toLowerCase():null,R=R.toLowerCase()),D&&E&&(D=hn(D,E)||D);const b=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let S=L===R||!r&&L.startsWith(R)&&L.charAt(b)==="/",T=D!=null&&(D===R||!r&&D.startsWith(R)&&D.charAt(R.length)==="/"),M={isActive:S,isPending:T,isTransitioning:C},N=S?t:void 0,B;typeof s=="function"?B=s(M):B=[s,S?"active":null,T?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Y=typeof o=="function"?o(M):o;return I.createElement(s0,{...g,"aria-current":N,className:B,ref:m,style:Y,to:c,viewTransition:u},typeof d=="function"?d(M):d)});I1.displayName="NavLink";var H1=I.forwardRef(({discover:h="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:r,state:o,method:c=bl,action:u,onSubmit:d,relative:g,preventScrollReset:m,viewTransition:y,...v},w)=>{let _=q1(),E=V1(u,{relative:g}),C=c.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&n0.test(u),L=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let b=D.nativeEvent.submitter,S=b?.getAttribute("formmethod")||c;_(b||D.currentTarget,{fetcherKey:t,method:S,navigate:i,replace:r,state:o,relative:g,preventScrollReset:m,viewTransition:y})};return I.createElement("form",{ref:w,method:C,action:E,onSubmit:s?d:L,...v,"data-discover":!R&&h==="render"?"true":void 0})});H1.displayName="Form";function F1(h){return`${h} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function a0(h){let t=I.useContext(ba);return Jt(t,F1(h)),t}function U1(h,{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:c}={}){let u=Zw(),d=As(),g=jr(h,{relative:o});return I.useCallback(m=>{if(v1(m,t)){m.preventDefault();let y=i!==void 0?i:Lr(d)===Lr(g);u(h,{replace:y,state:s,preventScrollReset:r,relative:o,viewTransition:c})}},[d,u,g,i,s,t,h,r,o,c])}var G1=0,j1=()=>`__${String(++G1)}__`;function q1(){let{router:h}=a0("useSubmit"),{basename:t}=I.useContext(Fi),i=c1();return I.useCallback(async(s,r={})=>{let{action:o,method:c,encType:u,formData:d,body:g}=w1(s,t);if(r.navigate===!1){let m=r.fetcherKey||j1();await h.fetch(m,i,r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:g,formMethod:r.method||c,formEncType:r.encType||u,flushSync:r.flushSync})}else await h.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:d,body:g,formMethod:r.method||c,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[h,t,i])}function V1(h,{relative:t}={}){let{basename:i}=I.useContext(Fi),s=I.useContext(dn);Jt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o={...jr(h||".",{relative:t})},c=As();if(h==null){o.search=c.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(m=>m==="")){u.delete("index"),d.filter(y=>y).forEach(y=>u.append("index",y));let m=u.toString();o.search=m?`?${m}`:""}}return(!h||h===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:ln([i,o.pathname])),Lr(o)}function Y1(h,{relative:t}={}){let i=I.useContext($y);Jt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=a0("useViewTransitionState"),r=jr(h,{relative:t});if(!i.isTransitioning)return!1;let o=hn(i.currentLocation.pathname,s)||i.currentLocation.pathname,c=hn(i.nextLocation.pathname,s)||i.nextLocation.pathname;return wl(r.pathname,c)!=null||wl(r.pathname,o)!=null}function X1(){return wt.jsx(wt.Fragment,{children:wt.jsx(B1,{children:wt.jsx(g1,{children:wt.jsx(Jy,{path:"/",element:wt.jsx(Ew,{})})})})})}Nv.createRoot(document.getElementById("root")).render(wt.jsx(I.StrictMode,{children:wt.jsx(X1,{})}));
